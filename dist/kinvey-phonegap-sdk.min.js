!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Kinvey=t():e.Kinvey=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";n(2);var r=n(293),o=n(433),i=n(497),a=n(589),u=n(594),s=o.NetworkRack.sharedInstance();s.useAfter(i.SerializeMiddleware,new a.HttpMiddleware);var c=r.Kinvey.init;r.Kinvey.init=function(e){var t=c(e);return r.Kinvey.Push=new u.Push,t},e.exports=r.Kinvey},function(e,t,n){(function(e){"use strict";function t(e,t,n){e[t]||Object[r](e,t,{writable:!0,configurable:!0,value:n})}if(n(3),n(288),n(290),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var r="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,function(){return this}())},function(e,t,n){n(4),n(51),n(52),n(53),n(54),n(56),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(69),n(71),n(73),n(75),n(78),n(79),n(80),n(84),n(86),n(88),n(92),n(93),n(94),n(95),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(105),n(106),n(107),n(109),n(110),n(111),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(131),n(132),n(136),n(137),n(138),n(139),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(159),n(160),n(166),n(167),n(169),n(170),n(171),n(174),n(175),n(176),n(177),n(178),n(180),n(181),n(182),n(183),n(186),n(188),n(189),n(190),n(192),n(194),n(196),n(197),n(198),n(200),n(201),n(202),n(203),n(209),n(212),n(213),n(215),n(216),n(219),n(220),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(243),n(244),n(245),n(246),n(247),n(248),n(250),n(251),n(252),n(253),n(254),n(255),n(257),n(258),n(260),n(261),n(262),n(263),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(286),n(287),e.exports=n(6)},function(e,t,n){"use strict";var r=n(5),o=n(6),i=n(7),a=n(8),u=n(10),s=n(19),c=n(23).KEY,l=n(9),f=n(24),h=n(25),p=n(20),d=n(26),v=n(27),y=n(40),m=n(43),g=n(13),_=n(30),b=n(17),w=n(18),E=n(44),x=n(47),k=n(49),O=n(12),j=k.f,S=O.f,T=x.f,I=r.Symbol,A=r.JSON,P=A&&A.stringify,C=!1,R="prototype",N=d("_hidden"),D=d("toPrimitive"),M={}.propertyIsEnumerable,F=f("symbol-registry"),L=f("symbols"),B=Object[R],q="function"==typeof I,U=r.QObject,K=a&&l(function(){return 7!=E(S({},"a",{get:function(){return S(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=j(B,t);r&&delete B[t],S(e,t,n),r&&e!==B&&S(B,t,r)}:S,H=function(e){var t=L[e]=E(I[R]);return t._k=e,a&&C&&K(B,e,{configurable:!0,set:function(t){i(this,N)&&i(this[N],e)&&(this[N][e]=!1),K(this,e,w(1,t))}}),t},V=q&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},$=function(e,t,n){return g(e),t=b(t,!0),g(n),i(L,t)?(n.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),n=E(n,{enumerable:w(0,!1)})):(i(e,N)||S(e,N,w(1,{})),e[N][t]=!0),K(e,t,n)):S(e,t,n)},z=function(e,t){g(e);for(var n,r=y(t=_(t)),o=0,i=r.length;i>o;)$(e,n=r[o++],t[n]);return e},G=function(e,t){return void 0===t?E(e):z(E(e),t)},Y=function(e){var t=M.call(this,e=b(e,!0));return t||!i(this,e)||!i(L,e)||i(this,N)&&this[N][e]?t:!0},J=function(e,t){var n=j(e=_(e),t=b(t,!0));return!n||!i(L,t)||i(e,N)&&e[N][t]||(n.enumerable=!0),n},W=function(e){for(var t,n=T(_(e)),r=[],o=0;n.length>o;)i(L,t=n[o++])||t==N||t==c||r.push(t);return r},Q=function(e){for(var t,n=T(_(e)),r=[],o=0;n.length>o;)i(L,t=n[o++])&&r.push(L[t]);return r},X=function(e){if(void 0!==e&&!V(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&m(t)||(t=function(e,t){return n&&(t=n.call(this,e,t)),V(t)?void 0:t}),r[1]=t,P.apply(A,r)}},Z=l(function(){var e=I();return"[null]"!=P([e])||"{}"!=P({a:e})||"{}"!=P(Object(e))});q||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");return H(p(arguments.length>0?arguments[0]:void 0))},s(I[R],"toString",function(){return this._k}),k.f=J,O.f=$,n(48).f=x.f=W,n(42).f=Y,n(41).f=Q,a&&!n(50)&&s(B,"propertyIsEnumerable",Y,!0)),u(u.G+u.W+u.F*!q,{Symbol:I});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;){var ne=ee[te++],re=o.Symbol,oe=d(ne);ne in re||S(re,ne,{value:q?oe:H(oe)})}U&&U[R]&&U[R].findChild||(C=!0),u(u.S+u.F*!q,"Symbol",{"for":function(e){return i(F,e+="")?F[e]:F[e]=I(e)},keyFor:function(e){if(V(e))return v(F,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){C=!0},useSimple:function(){C=!1}}),u(u.S+u.F*!q,"Object",{create:G,defineProperty:$,defineProperties:z,getOwnPropertyDescriptor:J,getOwnPropertyNames:W,getOwnPropertySymbols:Q}),A&&u(u.S+u.F*(!q||Z),"JSON",{stringify:X}),I[R][D]||n(11)(I[R],D,I[R].valueOf),h(I,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.2.2"};"number"==typeof __e&&(__e=n)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=!n(9)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(5),o=n(6),i=n(11),a=n(19),u=n(21),s="prototype",c=function(e,t,n){var l,f,h,p,d=e&c.F,v=e&c.G,y=e&c.S,m=e&c.P,g=e&c.B,_=v?r:y?r[t]||(r[t]={}):(r[t]||{})[s],b=v?o:o[t]||(o[t]={}),w=b[s]||(b[s]={});v&&(n=t);for(l in n)f=!d&&_&&void 0!==_[l],h=(f?_:n)[l],p=g&&f?u(h,r):m&&"function"==typeof h?u(Function.call,h):h,_&&a(_,l,h,e&c.U),b[l]!=h&&i(b,l,p),m&&w[l]!=h&&(w[l]=h)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(12),o=n(18);e.exports=n(8)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(13),o=n(15),i=n(17),a=Object.defineProperty;t.f=n(8)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(u){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(14);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(8)&&!n(9)(function(){return 7!=Object.defineProperty(n(16)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(14),o=n(5).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(14);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(5),o=n(11),i=n(7),a=n(20)("src"),u="toString",s=Function[u],c=(""+s).split(u);n(6).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,u){var s="function"==typeof n;s&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(s&&(i(n,a)||o(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:u?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,u,function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(22);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(20)("meta"),o=n(14),i=n(7),a=n(12).f,u=0,s=Object.isExtensible||function(){return!0},c=!n(9)(function(){return s(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++u,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!s(e))return"F";if(!t)return"E";l(e)}return e[r].i},h=function(e,t){if(!i(e,r)){if(!s(e))return!0;if(!t)return!1;l(e)}return e[r].w},p=function(e){return c&&d.NEED&&s(e)&&!i(e,r)&&l(e),e},d=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:h,onFreeze:p}},function(e,t,n){var r=n(5),o="__core-js_shared__",i=r[o]||(r[o]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(12).f,o=n(7),i=n(26)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(24)("wks"),o=n(20),i=n(5).Symbol,a="function"==typeof i;e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}},function(e,t,n){var r=n(28),o=n(30);e.exports=function(e,t){for(var n,i=o(e),a=r(i),u=a.length,s=0;u>s;)if(i[n=a[s++]]===t)return n}},function(e,t,n){var r=n(29),o=n(39);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(7),o=n(30),i=n(34)(!1),a=n(38)("IE_PROTO");e.exports=function(e,t){var n,u=o(e),s=0,c=[];for(n in u)n!=a&&r(u,n)&&c.push(n);for(;t.length>s;)r(u,n=t[s++])&&(~i(c,n)||c.push(n));return c}},function(e,t,n){var r=n(31),o=n(33);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(30),o=n(35),i=n(37);e.exports=function(e){return function(t,n,a){var u,s=r(t),c=o(s.length),l=i(a,c);if(e&&n!=n){for(;c>l;)if(u=s[l++],u!=u)return!0}else for(;c>l;l++)if((e||l in s)&&s[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(36),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(36),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),0>e?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(24)("keys"),o=n(20);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(28),o=n(41),i=n(42);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,u=n(e),s=i.f,c=0;u.length>c;)s.call(e,a=u[c++])&&t.push(a);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(32);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(13),o=n(45),i=n(39),a=n(38)("IE_PROTO"),u=function(){},s="prototype",c=function(){var e,t=n(16)("iframe"),r=i.length,o=">";for(t.style.display="none",n(46).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script"+o),e.close(),c=e.F;r--;)delete c[s][i[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(u[s]=r(e),n=new u,u[s]=null,n[a]=e):n=c(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(12),o=n(13),i=n(28);e.exports=n(8)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),u=a.length,s=0;u>s;)r.f(e,n=a[s++],t[n]);return e}},function(e,t,n){e.exports=n(5).document&&document.documentElement},function(e,t,n){var r=n(30),o=n(48).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(e){try{return o(e)}catch(t){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?u(e):o(r(e))}},function(e,t,n){var r=n(29),o=n(39).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(42),o=n(18),i=n(30),a=n(17),u=n(7),s=n(15),c=Object.getOwnPropertyDescriptor;t.f=n(8)?c:function(e,t){if(e=i(e),t=a(t,!0),s)try{return c(e,t)}catch(n){}return u(e,t)?o(!r.f.call(e,t),e[t]):void 0}},function(e,t){e.exports=!1},function(e,t,n){var r=n(10);r(r.S,"Object",{create:n(44)})},function(e,t,n){var r=n(10);r(r.S+r.F*!n(8),"Object",{defineProperty:n(12).f})},function(e,t,n){var r=n(10);r(r.S+r.F*!n(8),"Object",{defineProperties:n(45)})},function(e,t,n){var r=n(30),o=n(49).f;n(55)("getOwnPropertyDescriptor",function(){return function(e,t){return o(r(e),t)}})},function(e,t,n){var r=n(10),o=n(6),i=n(9);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},function(e,t,n){var r=n(57),o=n(58);n(55)("getPrototypeOf",function(){return function(e){return o(r(e))}})},function(e,t,n){var r=n(33);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(7),o=n(57),i=n(38)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(57),o=n(28);n(55)("keys",function(){return function(e){return o(r(e))}})},function(e,t,n){n(55)("getOwnPropertyNames",function(){return n(47).f})},function(e,t,n){var r=n(14),o=n(23).onFreeze;n(55)("freeze",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},function(e,t,n){var r=n(14),o=n(23).onFreeze;n(55)("seal",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},function(e,t,n){var r=n(14),o=n(23).onFreeze;n(55)("preventExtensions",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},function(e,t,n){var r=n(14);n(55)("isFrozen",function(e){return function(t){return r(t)?e?e(t):!1:!0}})},function(e,t,n){var r=n(14);n(55)("isSealed",function(e){return function(t){return r(t)?e?e(t):!1:!0}})},function(e,t,n){var r=n(14);n(55)("isExtensible",function(e){return function(t){return r(t)?e?e(t):!0:!1}})},function(e,t,n){var r=n(10);r(r.S+r.F,"Object",{assign:n(68)})},function(e,t,n){"use strict";var r=n(28),o=n(41),i=n(42),a=n(57),u=n(31),s=Object.assign;e.exports=!s||n(9)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=s({},e)[n]||Object.keys(s({},t)).join("")!=r})?function(e,t){for(var n=a(e),s=arguments.length,c=1,l=o.f,f=i.f;s>c;)for(var h,p=u(arguments[c++]),d=l?r(p).concat(l(p)):r(p),v=d.length,y=0;v>y;)f.call(p,h=d[y++])&&(n[h]=p[h]);return n}:s},function(e,t,n){var r=n(10);r(r.S,"Object",{is:n(70)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){var r=n(10);r(r.S,"Object",{setPrototypeOf:n(72).set})},function(e,t,n){var r=n(14),o=n(13),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(21)(Function.call,n(49).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){"use strict";var r=n(74),o={};o[n(26)("toStringTag")]="z",o+""!="[object z]"&&n(19)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){var r=n(32),o=n(26)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(u=r(t))&&"function"==typeof t.callee?"Arguments":u}},function(e,t,n){var r=n(10);r(r.P,"Function",{bind:n(76)})},function(e,t,n){"use strict";var r=n(22),o=n(14),i=n(77),a=[].slice,u={},s=function(e,t,n){if(!(t in u)){for(var r=[],o=0;t>o;o++)r[o]="a["+o+"]";u[t]=Function("F,a","return new F("+r.join(",")+")")}return u[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),u=function(){var r=n.concat(a.call(arguments));return this instanceof u?s(t,r.length,r):i(t,r,e)};return o(t.prototype)&&(u.prototype=t.prototype),u}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(12).f,o=n(18),i=n(7),a=Function.prototype,u=/^\s*function ([^ (]*)/,s="name";s in a||n(8)&&r(a,s,{configurable:!0,get:function(){var e=(""+this).match(u),t=e?e[1]:"";return i(this,s)||r(this,s,o(5,t)),t}})},function(e,t,n){"use strict";var r=n(14),o=n(58),i=n(26)("hasInstance"),a=Function.prototype;i in a||n(12).f(a,i,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(10),o=n(81);r(r.G+r.F*(parseInt!=o),{parseInt:o})},function(e,t,n){var r=n(5).parseInt,o=n(82).trim,i=n(83),a=/^[\-+]?0[xX]/;e.exports=8!==r(i+"08")||22!==r(i+"0x16")?function(e,t){var n=o(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(10),o=n(33),i=n(9),a=n(83),u="["+a+"]",s="​",c=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),f=function(e,t,n){var o={},u=i(function(){return!!a[e]()||s[e]()!=s}),c=o[e]=u?t(h):a[e];n&&(o[n]=c),r(r.P+r.F*u,"String",o)},h=f.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=f},function(e,t){e.exports="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(10),o=n(85);r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},function(e,t,n){var r=n(5).parseFloat,o=n(82).trim;e.exports=1/r(n(83)+"-0")!==-(1/0)?function(e){var t=o(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){"use strict";var r=n(5),o=n(7),i=n(32),a=n(87),u=n(17),s=n(9),c=n(48).f,l=n(49).f,f=n(12).f,h=n(82).trim,p="Number",d=r[p],v=d,y=d.prototype,m=i(n(44)(y))==p,g="trim"in String.prototype,_=function(e){var t=u(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():h(t,3);var n,r,o,i=t.charCodeAt(0);if(43===i||45===i){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+t}for(var a,s=t.slice(2),c=0,l=s.length;l>c;c++)if(a=s.charCodeAt(c),48>a||a>o)return NaN;return parseInt(s,r)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof d&&(m?s(function(){y.valueOf.call(n)}):i(n)!=p)?a(new v(_(t)),n,d):_(t)};for(var b,w=n(8)?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;w.length>E;E++)o(v,b=w[E])&&!o(d,b)&&f(d,b,l(v,b));d.prototype=y,y.constructor=d,n(19)(r,p,d)}},function(e,t,n){var r=n(14),o=n(72).set;e.exports=function(e,t,n){var i,a=t.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(e,i),e}},function(e,t,n){"use strict";var r=n(10),o=(n(89),n(36)),i=n(90),a=n(91),u=1..toFixed,s=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f="0",h=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*c[n],c[n]=r%1e7,r=s(r/1e7)},p=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=s(n/e),n=n%e*1e7},d=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+a.call(f,7-n.length)+n}return t},v=function(e,t,n){return 0===t?n:t%2===1?v(e,t-1,n*e):v(e*e,t/2,n)},y=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};r(r.P+r.F*(!!u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!n(9)(function(){u.call({})})),"Number",{toFixed:function(e){var t,n,r,u,s=i(this,l),c=o(e),m="",g=f;if(0>c||c>20)throw RangeError(l);if(s!=s)return"NaN";if(-1e21>=s||s>=1e21)return String(s);if(0>s&&(m="-",s=-s),s>1e-21)if(t=y(s*v(2,69,1))-69,n=0>t?s*v(2,-t,1):s/v(2,t,1),n*=4503599627370496,t=52-t,t>0){for(h(0,n),r=c;r>=7;)h(1e7,0),r-=7;for(h(v(10,r,1),0),r=t-1;r>=23;)p(1<<23),r-=23;p(1<<r),h(1,1),p(2),g=d()}else h(0,n),h(1<<-t,0),g=d()+a.call(f,c);return c>0?(u=g.length,g=m+(c>=u?"0."+a.call(f,c-u)+g:g.slice(0,u-c)+"."+g.slice(u-c))):g=m+g,g}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(32);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){"use strict";var r=n(36),o=n(33);e.exports=function(e){var t=String(o(this)),n="",i=r(e);if(0>i||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},function(e,t,n){"use strict";var r=n(10),o=n(9),i=n(90),a=1..toPrecision;r(r.P+r.F*(o(function(){return"1"!==a.call(1,void 0)})||!o(function(){a.call({})})),"Number",{toPrecision:function(e){var t=i(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(10);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(10),o=n(5).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&o(e)}})},function(e,t,n){var r=n(10);r(r.S,"Number",{isInteger:n(96)})},function(e,t,n){var r=n(14),o=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},function(e,t,n){var r=n(10);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(10),o=n(96),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return o(e)&&i(e)<=9007199254740991}})},function(e,t,n){var r=n(10);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(10);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(10),o=n(85);r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(e,t,n){var r=n(10),o=n(81);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(e,t,n){var r=n(10),o=n(104),i=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:o(e-1+i(e-1)*i(e+1))}})},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&1e-8>e?e-e*e/2:Math.log(1+e)}},function(e,t,n){function r(e){return isFinite(e=+e)&&0!=e?0>e?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var o=n(10),i=Math.asinh;o(o.S+o.F*!(i&&1/i(0)>0),"Math",{asinh:r})},function(e,t,n){var r=n(10),o=Math.atanh;r(r.S+r.F*!(o&&1/o(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(10),o=n(108);r(r.S,"Math",{cbrt:function(e){return o(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:0>e?-1:1}},function(e,t,n){var r=n(10);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(10),o=Math.exp;r(r.S,"Math",{cosh:function(e){return(o(e=+e)+o(-e))/2}})},function(e,t,n){var r=n(10),o=n(112);r(r.S+r.F*(o!=Math.expm1),"Math",{expm1:o})},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&1e-6>e?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(10),o=n(108),i=Math.pow,a=i(2,-52),u=i(2,-23),s=i(2,127)*(2-u),c=i(2,-126),l=function(e){return e+1/a-1/a};r(r.S,"Math",{fround:function(e){var t,n,r=Math.abs(e),i=o(e);return c>r?i*l(r/c/u)*c*u:(t=(1+u/a)*r,n=t-(t-r),n>s||n!=n?i*(1/0):i*n)}})},function(e,t,n){var r=n(10),o=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,i=0,a=0,u=arguments.length,s=0;u>a;)n=o(arguments[a++]),n>s?(r=s/n,i=i*r*r+1,s=n):n>0?(r=n/s,i+=r*r):i+=n;return s===1/0?1/0:s*Math.sqrt(i)}})},function(e,t,n){var r=n(10),o=Math.imul;r(r.S+r.F*n(9)(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(e,t){var n=65535,r=+e,o=+t,i=n&r,a=n&o;return 0|i*a+((n&r>>>16)*a+i*(n&o>>>16)<<16>>>0)}})},function(e,t,n){var r=n(10);r(r.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},function(e,t,n){var r=n(10);r(r.S,"Math",{log1p:n(104)})},function(e,t,n){var r=n(10);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(10);r(r.S,"Math",{sign:n(108)})},function(e,t,n){var r=n(10),o=n(112),i=Math.exp;r(r.S+r.F*n(9)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(o(e)-o(-e))/2:(i(e-1)-i(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(10),o=n(112),i=Math.exp;r(r.S,"Math",{tanh:function(e){var t=o(e=+e),n=o(-e);return t==1/0?1:n==1/0?-1:(t-n)/(i(e)+i(-e))}})},function(e,t,n){var r=n(10);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(10),o=n(37),i=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(65536>t?i(t):i(((t-=65536)>>10)+55296,t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(10),o=n(30),i=n(35);r(r.S,"String",{raw:function(e){for(var t=o(e.raw),n=i(t.length),r=arguments.length,a=[],u=0;n>u;)a.push(String(t[u++])),r>u&&a.push(String(arguments[u]));return a.join("")}})},function(e,t,n){"use strict";n(82)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var r=n(127)(!0);n(128)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(36),o=n(33);e.exports=function(e){return function(t,n){var i,a,u=String(o(t)),s=r(n),c=u.length;return 0>s||s>=c?e?"":void 0:(i=u.charCodeAt(s),55296>i||i>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?e?u.charAt(s):i:e?u.slice(s,s+2):(i-55296<<10)+(a-56320)+65536)}}},function(e,t,n){"use strict";var r=n(50),o=n(10),i=n(19),a=n(11),u=n(7),s=n(129),c=n(130),l=n(25),f=n(58),h=n(26)("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",v="keys",y="values",m=function(){return this};e.exports=function(e,t,n,g,_,b,w){c(n,t,g);var E,x,k,O=function(e){if(!p&&e in I)return I[e];switch(e){case v:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this,e)}},j=t+" Iterator",S=_==y,T=!1,I=e.prototype,A=I[h]||I[d]||_&&I[_],P=A||O(_),C=_?S?O("entries"):P:void 0,R="Array"==t?I.entries||A:A;if(R&&(k=f(R.call(new e)),k!==Object.prototype&&(l(k,j,!0),r||u(k,h)||a(k,h,m))),S&&A&&A.name!==y&&(T=!0,P=function(){return A.call(this)}),r&&!w||!p&&!T&&I[h]||a(I,h,P),s[t]=P,s[j]=m,_)if(E={values:S?P:O(y),keys:b?P:O(v),entries:C},w)for(x in E)x in I||i(I,x,E[x]);else o(o.P+o.F*(p||T),t,E);return E}},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(44),o=n(18),i=n(25),a={};n(11)(a,n(26)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(10),o=n(127)(!1);r(r.P,"String",{codePointAt:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r=n(10),o=n(35),i=n(133),a="endsWith",u=""[a];r(r.P+r.F*n(135)(a),"String",{endsWith:function(e){var t=i(this,e,a),n=arguments.length>1?arguments[1]:void 0,r=o(t.length),s=void 0===n?r:Math.min(o(n),r),c=String(e);return u?u.call(t,c,s):t.slice(s-c.length,s)===c}})},function(e,t,n){var r=n(134),o=n(33);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){var r=n(14),o=n(32),i=n(26)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(26)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(o){}}return!0}},function(e,t,n){"use strict";var r=n(10),o=n(133),i="includes";r(r.P+r.F*n(135)(i),"String",{includes:function(e){return!!~o(this,e,i).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(10);r(r.P,"String",{repeat:n(91)})},function(e,t,n){"use strict";var r=n(10),o=n(35),i=n(133),a="startsWith",u=""[a];r(r.P+r.F*n(135)(a),"String",{startsWith:function(e){var t=i(this,e,a),n=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return u?u.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(140)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){var r=n(10),o=n(9),i=n(33),a=/"/g,u=function(e,t,n,r){var o=String(i(e)),u="<"+t;return""!==n&&(u+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),u+">"+o+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(u),r(r.P+r.F*o(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){"use strict";n(140)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(140)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(140)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(140)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(140)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(140)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(140)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(140)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(140)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(140)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(140)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(140)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var r=n(10);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(10),o=n(57),i=n(17);r(r.P+r.F*n(9)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=o(this),n=i(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){"use strict";var r=n(10),o=n(9),i=Date.prototype.getTime,a=function(e){return e>9?e:"0"+e};r(r.P+r.F*(o(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!o(function(){new Date(NaN).toISOString()})),"Date",{
toISOString:function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=0>t?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}})},function(e,t,n){var r=Date.prototype,o="Invalid Date",i="toString",a=r[i],u=r.getTime;new Date(NaN)+""!=o&&n(19)(r,i,function(){var e=u.call(this);return e===e?a.call(this):o})},function(e,t,n){var r=n(26)("toPrimitive"),o=Date.prototype;r in o||n(11)(o,r,n(158))},function(e,t,n){"use strict";var r=n(13),o=n(17),i="number";e.exports=function(e){if("string"!==e&&e!==i&&"default"!==e)throw TypeError("Incorrect hint");return o(r(this),e!=i)}},function(e,t,n){var r=n(10);r(r.S,"Array",{isArray:n(43)})},function(e,t,n){"use strict";var r=n(21),o=n(10),i=n(57),a=n(161),u=n(162),s=n(35),c=n(163),l=n(164);o(o.S+o.F*!n(165)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,f,h=i(e),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,y=void 0!==v,m=0,g=l(h);if(y&&(v=r(v,d>2?arguments[2]:void 0,2)),void 0==g||p==Array&&u(g))for(t=s(h.length),n=new p(t);t>m;m++)c(n,m,y?v(h[m],m):h[m]);else for(f=g.call(h),n=new p;!(o=f.next()).done;m++)c(n,m,y?a(f,v,[o.value,m],!0):o.value);return n.length=m,n}})},function(e,t,n){var r=n(13);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(i){var a=e["return"];throw void 0!==a&&r(a.call(e)),i}}},function(e,t,n){var r=n(129),o=n(26)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){"use strict";var r=n(12),o=n(18);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){var r=n(74),o=n(26)("iterator"),i=n(129);e.exports=n(6).getIteratorMethod=function(e){return void 0!=e?e[o]||e["@@iterator"]||i[r(e)]:void 0}},function(e,t,n){var r=n(26)("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(a){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(u){}return n}},function(e,t,n){"use strict";var r=n(10),o=n(163);r(r.S+r.F*n(9)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)o(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(10),o=n(30),i=[].join;r(r.P+r.F*(n(31)!=Object||!n(168)(i)),"Array",{join:function(e){return i.call(o(this),void 0===e?",":e)}})},function(e,t,n){var r=n(9);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){"use strict";var r=n(10),o=n(46),i=n(32),a=n(37),u=n(35),s=[].slice;r(r.P+r.F*n(9)(function(){o&&s.call(o)}),"Array",{slice:function(e,t){var n=u(this.length),r=i(this);if(t=void 0===t?n:t,"Array"==r)return s.call(this,e,t);for(var o=a(e,n),c=a(t,n),l=u(c-o),f=Array(l),h=0;l>h;h++)f[h]="String"==r?this.charAt(o+h):this[o+h];return f}})},function(e,t,n){"use strict";var r=n(10),o=n(22),i=n(57),a=n(9),u=[].sort,s=[1,2,3];r(r.P+r.F*(a(function(){s.sort(void 0)})||!a(function(){s.sort(null)})||!n(168)(u)),"Array",{sort:function(e){return void 0===e?u.call(i(this)):u.call(i(this),o(e))}})},function(e,t,n){"use strict";var r=n(10),o=n(172)(0),i=n(168)([].forEach,!0);r(r.P+r.F*!i,"Array",{forEach:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(21),o=n(31),i=n(57),a=n(35),u=n(173);e.exports=function(e,t){var n=1==e,s=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f,p=t||u;return function(t,u,d){for(var v,y,m=i(t),g=o(m),_=r(u,d,3),b=a(g.length),w=0,E=n?p(t,b):s?p(t,0):void 0;b>w;w++)if((h||w in g)&&(v=g[w],y=_(v,w,m),e))if(n)E[w]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:E.push(v)}else if(l)return!1;return f?-1:c||l?l:E}}},function(e,t,n){var r=n(14),o=n(43),i=n(26)("species");e.exports=function(e,t){var n;return o(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)||(n=void 0),r(n)&&(n=n[i],null===n&&(n=void 0))),new(void 0===n?Array:n)(t)}},function(e,t,n){"use strict";var r=n(10),o=n(172)(1);r(r.P+r.F*!n(168)([].map,!0),"Array",{map:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(10),o=n(172)(2);r(r.P+r.F*!n(168)([].filter,!0),"Array",{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(10),o=n(172)(3);r(r.P+r.F*!n(168)([].some,!0),"Array",{some:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(10),o=n(172)(4);r(r.P+r.F*!n(168)([].every,!0),"Array",{every:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(10),o=n(179);r(r.P+r.F*!n(168)([].reduce,!0),"Array",{reduce:function(e){return o(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){var r=n(22),o=n(57),i=n(31),a=n(35);e.exports=function(e,t,n,u,s){r(t);var c=o(e),l=i(c),f=a(c.length),h=s?f-1:0,p=s?-1:1;if(2>n)for(;;){if(h in l){u=l[h],h+=p;break}if(h+=p,s?0>h:h>=f)throw TypeError("Reduce of empty array with no initial value")}for(;s?h>=0:f>h;h+=p)h in l&&(u=t(u,l[h],h,c));return u}},function(e,t,n){"use strict";var r=n(10),o=n(179);r(r.P+r.F*!n(168)([].reduceRight,!0),"Array",{reduceRight:function(e){return o(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(10),o=n(34)(!1),i=[].indexOf,a=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(168)(i)),"Array",{indexOf:function(e){return a?i.apply(this,arguments)||0:o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(10),o=n(30),i=n(36),a=n(35),u=[].lastIndexOf,s=!!u&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(s||!n(168)(u)),"Array",{lastIndexOf:function(e){if(s)return u.apply(this,arguments)||0;var t=o(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,i(arguments[1]))),0>r&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(10);r(r.P,"Array",{copyWithin:n(184)}),n(185)("copyWithin")},function(e,t,n){"use strict";var r=n(57),o=n(37),i=n(35);e.exports=[].copyWithin||function(e,t){var n=r(this),a=i(n.length),u=o(e,a),s=o(t,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:o(c,a))-s,a-u),f=1;for(u>s&&s+l>u&&(f=-1,s+=l-1,u+=l-1);l-- >0;)s in n?n[u]=n[s]:delete n[u],u+=f,s+=f;return n}},function(e,t,n){var r=n(26)("unscopables"),o=Array.prototype;void 0==o[r]&&n(11)(o,r,{}),e.exports=function(e){o[r][e]=!0}},function(e,t,n){var r=n(10);r(r.P,"Array",{fill:n(187)}),n(185)("fill")},function(e,t,n){"use strict";var r=n(57),o=n(37),i=n(35);e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,u=o(a>1?arguments[1]:void 0,n),s=a>2?arguments[2]:void 0,c=void 0===s?n:o(s,n);c>u;)t[u++]=e;return t}},function(e,t,n){"use strict";var r=n(10),o=n(172)(5),i="find",a=!0;i in[]&&Array(1)[i](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(185)(i)},function(e,t,n){"use strict";var r=n(10),o=n(172)(6),i="findIndex",a=!0;i in[]&&Array(1)[i](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(185)(i)},function(e,t,n){n(191)("Array")},function(e,t,n){"use strict";var r=n(5),o=n(12),i=n(8),a=n(26)("species");e.exports=function(e){var t=r[e];i&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(185),o=n(193),i=n(129),a=n(30);e.exports=n(128)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(5),o=n(87),i=n(12).f,a=n(48).f,u=n(134),s=n(195),c=r.RegExp,l=c,f=c.prototype,h=/a/g,p=/a/g,d=new c(h)!==h;if(n(8)&&(!d||n(9)(function(){return p[n(26)("match")]=!1,c(h)!=h||c(p)==p||"/a/i"!=c(h,"i")}))){c=function(e,t){var n=this instanceof c,r=u(e),i=void 0===t;return!n&&r&&e.constructor===c&&i?e:o(d?new l(r&&!i?e.source:e,t):l((r=e instanceof c)?e.source:e,r&&i?s.call(e):t),n?this:f,c)};for(var v=(function(e){e in c||i(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})}),y=a(l),m=0;y.length>m;)v(y[m++]);f.constructor=c,c.prototype=f,n(19)(r,"RegExp",c)}n(191)("RegExp")},function(e,t,n){"use strict";var r=n(13);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";n(197);var r=n(13),o=n(195),i=n(8),a="toString",u=/./[a],s=function(e){n(19)(RegExp.prototype,a,e,!0)};n(9)(function(){return"/a/b"!=u.call({source:"a",flags:"b"})})?s(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?o.call(e):void 0)}):u.name!=a&&s(function(){return u.call(this)})},function(e,t,n){n(8)&&"g"!=/./g.flags&&n(12).f(RegExp.prototype,"flags",{configurable:!0,get:n(195)})},function(e,t,n){n(199)("match",1,function(e,t,n){return[function(n){"use strict";var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){"use strict";var r=n(11),o=n(19),i=n(9),a=n(33),u=n(26);e.exports=function(e,t,n){var s=u(e),c=n(a,s,""[e]),l=c[0],f=c[1];i(function(){var t={};return t[s]=function(){return 7},7!=""[e](t)})&&(o(String.prototype,e,l),r(RegExp.prototype,s,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},function(e,t,n){n(199)("replace",2,function(e,t,n){return[function(r,o){"use strict";var i=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)},n]})},function(e,t,n){n(199)("search",1,function(e,t,n){return[function(n){"use strict";var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){n(199)("split",2,function(e,t,r){"use strict";var o=n(134),i=r,a=[].push,u="split",s="length",c="lastIndex";if("c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[s]||2!="ab"[u](/(?:ab)*/)[s]||4!="."[u](/(.?)(.?)/)[s]||"."[u](/()()/)[s]>1||""[u](/.?/)[s]){var l=void 0===/()??/.exec("")[1];r=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!o(e))return i.call(n,e,t);var r,u,f,h,p,d=[],v=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),y=0,m=void 0===t?4294967295:t>>>0,g=new RegExp(e.source,v+"g");for(l||(r=new RegExp("^"+g.source+"$(?!\\s)",v));(u=g.exec(n))&&(f=u.index+u[0][s],!(f>y&&(d.push(n.slice(y,u.index)),!l&&u[s]>1&&u[0].replace(r,function(){for(p=1;p<arguments[s]-2;p++)void 0===arguments[p]&&(u[p]=void 0)}),u[s]>1&&u.index<n[s]&&a.apply(d,u.slice(1)),h=u[0][s],y=f,d[s]>=m)));)g[c]===u.index&&g[c]++;return y===n[s]?!h&&g.test("")||d.push(""):d.push(n.slice(y)),d[s]>m?d.slice(0,m):d}}else"0"[u](void 0,0)[s]&&(r=function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)});return[function(n,o){var i=e(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,i,o):r.call(String(i),n,o)},r]})},function(e,t,n){"use strict";var r,o,i,a=n(50),u=n(5),s=n(21),c=n(74),l=n(10),f=n(14),h=(n(13),n(22)),p=n(89),d=n(204),v=(n(72).set,n(205)),y=n(206).set,m=n(207),g="Promise",_=u.TypeError,b=u.process,w=u[g],b=u.process,E="process"==c(b),x=function(){},k=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[n(26)("species")]=function(e){e(x,x)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(r){}}(),O=function(e,t){return e===t||e===w&&t===i},j=function(e){var t;return f(e)&&"function"==typeof(t=e.then)?t:!1},S=function(e){return O(w,e)?new T(e):new o(e)},T=o=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw _("Bad Promise constructor");t=e,n=r}),this.resolve=h(t),this.reject=h(n)},I=function(e){try{e()}catch(t){return{error:t}}},A=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a=o?t.ok:t.fail,u=t.resolve,s=t.reject,c=t.domain;try{a?(o||(2==e._h&&R(e),e._h=1),a===!0?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?s(_("Promise-chain cycle")):(i=j(n))?i.call(n,u,s):u(n)):s(r)}catch(l){s(l)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&P(e)})}},P=function(e){y.call(u,function(){var t,n,r,o=e._v;if(C(e)&&(t=I(function(){E?b.emit("unhandledRejection",o,e):(n=u.onunhandledrejection)?n({promise:e,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=E||C(e)?2:1),e._a=void 0,t)throw t.error})},C=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!C(t.promise))return!1;return!0},R=function(e){y.call(u,function(){var t;E?b.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),A(t,!0))},D=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw _("Promise can't be resolved itself");(t=j(e))?m(function(){var r={_w:n,_d:!1};try{t.call(e,s(D,r,1),s(N,r,1))}catch(o){N.call(r,o)}}):(n._v=e,n._s=1,A(n,!1))}catch(r){N.call({_w:n,_d:!1},r)}}};k||(w=function(e){p(this,w,g,"_h"),h(e),r.call(this);try{e(s(D,this,1),s(N,this,1))}catch(t){N.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(208)(w.prototype,{then:function(e,t){var n=S(v(this,w));return n.ok="function"==typeof e?e:!0,n.fail="function"==typeof t&&t,n.domain=E?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),T=function(){var e=new r;this.promise=e,this.resolve=s(D,e,1),this.reject=s(N,e,1)}),l(l.G+l.W+l.F*!k,{Promise:w}),n(25)(w,g),n(191)(g),i=n(6)[g],l(l.S+l.F*!k,g,{reject:function(e){var t=S(this),n=t.reject;return n(e),t.promise}}),l(l.S+l.F*(a||!k),g,{resolve:function(e){if(e instanceof w&&O(e.constructor,this))return e;var t=S(this),n=t.resolve;return n(e),t.promise}}),l(l.S+l.F*!(k&&n(165)(function(e){w.all(e)["catch"](x)})),g,{all:function(e){var t=this,n=S(t),r=n.resolve,o=n.reject,i=I(function(){var n=[],i=0,a=1;d(e,!1,function(e){var u=i++,s=!1;n.push(void 0),a++,t.resolve(e).then(function(e){s||(s=!0,n[u]=e,--a||r(n))},o)}),--a||r(n)});return i&&o(i.error),n.promise},race:function(e){var t=this,n=S(t),r=n.reject,o=I(function(){d(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},function(e,t,n){var r=n(21),o=n(161),i=n(162),a=n(13),u=n(35),s=n(164);e.exports=function(e,t,n,c,l){var f,h,p,d=l?function(){return e}:s(e),v=r(n,c,t?2:1),y=0;if("function"!=typeof d)throw TypeError(e+" is not iterable!");if(i(d))for(f=u(e.length);f>y;y++)t?v(a(h=e[y])[0],h[1]):v(e[y]);else for(p=d.call(e);!(h=p.next()).done;)o(p,v,h.value,t)}},function(e,t,n){var r=n(13),o=n(22),i=n(26)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},function(e,t,n){var r,o,i,a=n(21),u=n(77),s=n(46),c=n(16),l=n(5),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,v=0,y={},m="onreadystatechange",g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},_=function(e){g.call(e.data)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++v]=function(){u("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete y[e]},"process"==n(32)(f)?r=function(e){f.nextTick(a(g,e,1))}:d?(o=new d,i=o.port2,o.port1.onmessage=_,r=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",_,!1)):r=m in c("script")?function(e){s.appendChild(c("script"))[m]=function(){s.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,n){var r,o,i,a=n(5),u=n(206).set,s=a.MutationObserver||a.WebKitMutationObserver,c=a.process,l=a.Promise,f="process"==n(32)(c),h=function(){var e,t;for(f&&(e=c.domain)&&e.exit();r;)t=r.fn,t(),r=r.next;o=void 0,e&&e.enter()};if(f)i=function(){c.nextTick(h)};else if(s){var p=!0,d=document.createTextNode("");new s(h).observe(d,{characterData:!0}),i=function(){d.data=p=!p}}else i=l&&l.resolve?function(){l.resolve().then(h)}:function(){u.call(a,h)};e.exports=function(e){var t={fn:e,next:void 0};o&&(o.next=t),r||(r=t,i()),o=t}},function(e,t,n){var r=n(19);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){"use strict";var r=n(210);e.exports=n(211)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(12).f,o=n(44),i=(n(11),n(208)),a=n(21),u=n(89),s=n(33),c=n(204),l=n(128),f=n(193),h=n(191),p=n(8),d=n(23).fastKey,v=p?"_s":"size",y=function(e,t){var n,r=d(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var f=e(function(e,r){u(e,f,t,"_i"),e._i=o(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&c(r,n,e[l],e)});return i(f.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[v]=0},"delete":function(e){var t=this,n=y(t,e);if(n){var r=n.n,o=n.p;delete t._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),t._f==n&&(t._f=r),t._l==n&&(t._l=o),t[v]--}return!!n},forEach:function(e){u(this,f,"forEach");for(var t,n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!y(this,e)}}),p&&r(f.prototype,"size",{get:function(){return s(this[v])}}),f},def:function(e,t,n){var r,o,i=y(e,t);return i?i.v=n:(e._l=i={i:o=d(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[v]++,"F"!==o&&(e._i[o]=i)),e},getEntry:y,setStrong:function(e,t,n){l(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?f(0,n.k):"values"==t?f(0,n.v):f(0,[n.k,n.v]):(e._t=void 0,f(1))},n?"entries":"values",!n,!0),h(t)}}},function(e,t,n){"use strict";var r=n(5),o=n(10),i=n(19),a=n(208),u=n(23),s=n(204),c=n(89),l=n(14),f=n(9),h=n(165),p=n(25),d=n(87);e.exports=function(e,t,n,v,y,m){var g=r[e],_=g,b=y?"set":"add",w=_&&_.prototype,E={},x=function(e){var t=w[e];i(w,e,"delete"==e?function(e){return m&&!l(e)?!1:t.call(this,0===e?0:e)}:"has"==e?function(e){return m&&!l(e)?!1:t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(m||w.forEach&&!f(function(){(new _).entries().next()}))){var k=new _,O=k[b](m?{}:-0,1)!=k,j=f(function(){k.has(1)}),S=h(function(e){new _(e)}),T=!m&&f(function(){for(var e=new _,t=5;t--;)e[b](t,t);return!e.has(-0)});S||(_=t(function(t,n){c(t,_,e);var r=d(new g,t,_);return void 0!=n&&s(n,y,r[b],r),r}),_.prototype=w,w.constructor=_),(j||T)&&(x("delete"),x("has"),y&&x("get")),(T||O)&&x(b),m&&w.clear&&delete w.clear}else _=v.getConstructor(t,e,y,b),a(_.prototype,n),u.NEED=!0;return p(_,e),E[e]=_,o(o.G+o.W+o.F*(_!=g),E),m||v.setStrong(_,e,y),_}},function(e,t,n){"use strict";var r=n(210);e.exports=n(211)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,o=n(172)(0),i=n(19),a=n(23),u=n(68),s=n(214),c=n(14),l=(n(7),a.getWeak),f=Object.isExtensible,h=s.ufstore,p={},d=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(c(e)){var t=l(e);return t===!0?h(this).get(e):t?t[this._i]:void 0}},set:function(e,t){return s.def(this,e,t)}},y=e.exports=n(211)("WeakMap",d,v,s,!0,!0);7!=(new y).set((Object.freeze||Object)(p),7).get(p)&&(r=s.getConstructor(d),u(r.prototype,v),a.NEED=!0,o(["delete","has","get","set"],function(e){var t=y.prototype,n=t[e];i(t,e,function(t,o){if(c(t)&&!f(t)){this._f||(this._f=new r);var i=this._f[e](t,o);return"set"==e?this:i}return n.call(this,t,o)})}))},function(e,t,n){"use strict";var r=n(208),o=n(23).getWeak,i=n(13),a=n(14),u=n(89),s=n(204),c=n(172),l=n(7),f=c(5),h=c(6),p=0,d=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},y=function(e,t){return f(e.a,function(e){return e[0]===t})};v.prototype={get:function(e){var t=y(this,e);return t?t[1]:void 0},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.a.push([e,t])},"delete":function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,i){var c=e(function(e,r){u(e,c,t,"_i"),e._i=p++,e._l=void 0,void 0!=r&&s(r,n,e[i],e)});return r(c.prototype,{"delete":function(e){if(!a(e))return!1;var t=o(e);return t===!0?d(this)["delete"](e):t&&l(t,this._i)&&delete t[this._i]},has:function(e){if(!a(e))return!1;var t=o(e);return t===!0?d(this).has(e):t&&l(t,this._i)}}),c},def:function(e,t,n){var r=o(i(t),!0);return r===!0?d(e).set(t,n):r[e._i]=n,e},ufstore:d}},function(e,t,n){"use strict";var r=n(214);n(211)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(10),o=n(217),i=n(218),a=n(13),u=n(37),s=n(35),c=n(14),l=(n(26)("typed_array"),n(5).ArrayBuffer),f=n(205),h=i.ArrayBuffer,p=i.DataView,d=o.ABV&&l.isView,v=h.prototype.slice,y=o.VIEW,m="ArrayBuffer";r(r.G+r.W+r.F*(l!==h),{ArrayBuffer:h}),r(r.S+r.F*!o.CONSTR,m,{isView:function(e){return d&&d(e)||c(e)&&y in e}}),r(r.P+r.U+r.F*n(9)(function(){return!new h(2).slice(1,void 0).byteLength}),m,{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(a(this),e);for(var n=a(this).byteLength,r=u(e,n),o=u(void 0===t?n:t,n),i=new(f(this,h))(s(o-r)),c=new p(this),l=new p(i),d=0;o>r;)l.setUint8(d++,c.getUint8(r++));return i}}),n(191)(m)},function(e,t,n){for(var r,o=n(5),i=n(11),a=n(20),u=a("typed_array"),s=a("view"),c=!(!o.ArrayBuffer||!o.DataView),l=c,f=0,h=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h>f;)(r=o[p[f++]])?(i(r.prototype,u,!0),i(r.prototype,s,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:u,VIEW:s}},function(e,t,n){"use strict";var r=n(5),o=n(8),i=n(50),a=n(217),u=n(11),s=n(208),c=n(9),l=n(89),f=n(36),h=n(35),p=n(48).f,d=n(12).f,v=n(187),y=n(25),m="ArrayBuffer",g="DataView",_="prototype",b="Wrong length!",w="Wrong index!",E=r[m],x=r[g],k=r.Math,O=(r.parseInt,r.RangeError),j=r.Infinity,S=E,T=k.abs,I=k.pow,A=(k.min,k.floor),P=k.log,C=k.LN2,R="buffer",N="byteLength",D="byteOffset",M=o?"_b":R,F=o?"_l":N,L=o?"_o":D,B=function(e,t,n){var r,o,i,a=Array(n),u=8*n-t-1,s=(1<<u)-1,c=s>>1,l=23===t?I(2,-24)-I(2,-77):0,f=0,h=0>e||0===e&&0>1/e?1:0;for(e=T(e),e!=e||e===j?(o=e!=e?1:0,r=s):(r=A(P(e)/C),e*(i=I(2,-r))<1&&(r--,i*=2),e+=r+c>=1?l/i:l*I(2,1-c),e*i>=2&&(r++,i/=2),r+c>=s?(o=0,r=s):r+c>=1?(o=(e*i-1)*I(2,t),r+=c):(o=e*I(2,c-1)*I(2,t),r=0));t>=8;a[f++]=255&o,o/=256,t-=8);for(r=r<<t|o,u+=t;u>0;a[f++]=255&r,r/=256,u-=8);return a[--f]|=128*h,a},q=function(e,t,n){var r,o=8*n-t-1,i=(1<<o)-1,a=i>>1,u=o-7,s=n-1,c=e[s--],l=127&c;for(c>>=7;u>0;l=256*l+e[s],s--,u-=8);for(r=l&(1<<-u)-1,l>>=-u,u+=t;u>0;r=256*r+e[s],s--,u-=8);if(0===l)l=1-a;else{if(l===i)return r?NaN:c?-j:j;r+=I(2,t),l-=a}return(c?-1:1)*r*I(2,l-t)},U=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},K=function(e){return[255&e]},H=function(e){return[255&e,e>>8&255]},V=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},$=function(e){return B(e,52,8)},z=function(e){return B(e,23,4)},G=function(e,t,n){d(e[_],t,{get:function(){return this[n]}})},Y=function(e,t,n,r){var o=+n,i=f(o);if(o!=i||0>i||i+t>e[F])throw O(w);var a=e[M]._b,u=i+e[L],s=a.slice(u,u+t);return r?s:s.reverse()},J=function(e,t,n,r,o,i){var a=+n,u=f(a);if(a!=u||0>u||u+t>e[F])throw O(w);for(var s=e[M]._b,c=u+e[L],l=r(+o),h=0;t>h;h++)s[c+h]=l[i?h:t-h-1]},W=function(e,t){l(e,E,m);var n=+t,r=h(n);if(n!=r)throw O(b);return r};if(a.ABV){if(!c(function(){new E})||!c(function(){new E(.5)})){E=function(e){return new S(W(this,e))};for(var Q,X=E[_]=S[_],Z=p(S),ee=0;Z.length>ee;)(Q=Z[ee++])in E||u(E,Q,S[Q]);i||(X.constructor=E)}var te=new x(new E(2)),ne=x[_].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||s(x[_],{setInt8:function(e,t){ne.call(this,e,t<<24>>24)},setUint8:function(e,t){ne.call(this,e,t<<24>>24)}},!0)}else E=function(e){var t=W(this,e);this._b=v.call(Array(t),0),this[F]=t},x=function(e,t,n){l(this,x,g),l(e,E,g);var r=e[F],o=f(t);if(0>o||o>r)throw O("Wrong offset!");if(n=void 0===n?r-o:h(n),o+n>r)throw O(b);this[M]=e,this[L]=o,this[F]=n},o&&(G(E,N,"_l"),G(x,R,"_b"),G(x,N,"_l"),G(x,D,"_o")),s(x[_],{getInt8:function(e){return Y(this,1,e)[0]<<24>>24},getUint8:function(e){return Y(this,1,e)[0]},getInt16:function(e){var t=Y(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Y(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return U(Y(this,4,e,arguments[1]))},getUint32:function(e){return U(Y(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return q(Y(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return q(Y(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){J(this,1,e,K,t)},setUint8:function(e,t){J(this,1,e,K,t)},setInt16:function(e,t){J(this,2,e,H,t,arguments[2])},setUint16:function(e,t){J(this,2,e,H,t,arguments[2])},setInt32:function(e,t){J(this,4,e,V,t,arguments[2])},setUint32:function(e,t){J(this,4,e,V,t,arguments[2])},setFloat32:function(e,t){J(this,4,e,z,t,arguments[2])},setFloat64:function(e,t){J(this,8,e,$,t,arguments[2])}});y(E,m),y(x,g),u(x[_],a.VIEW,!0),t[m]=E,t[g]=x},function(e,t,n){var r=n(10);r(r.G+r.W+r.F*!n(217).ABV,{DataView:n(218).DataView})},function(e,t,n){n(221)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";if(n(8)){var r=n(50),o=n(5),i=n(9),a=n(10),u=n(217),s=n(218),c=n(21),l=n(89),f=n(18),h=n(11),p=n(208),d=(n(96),n(36)),v=n(35),y=n(37),m=n(17),g=n(7),_=n(70),b=n(74),w=n(14),E=n(57),x=n(162),k=n(44),O=n(58),j=n(48).f,S=(n(222),n(164)),T=n(20),I=n(26),A=n(172),P=n(34),C=n(205),R=n(192),N=n(129),D=n(165),M=n(191),F=n(187),L=n(184),B=n(12),q=n(49),U=B.f,K=q.f,H=o.RangeError,V=o.TypeError,$=o.Uint8Array,z="ArrayBuffer",G="Shared"+z,Y="BYTES_PER_ELEMENT",J="prototype",W=Array[J],Q=s.ArrayBuffer,X=s.DataView,Z=A(0),ee=A(2),te=A(3),ne=A(4),re=A(5),oe=A(6),ie=P(!0),ae=P(!1),ue=R.values,se=R.keys,ce=R.entries,le=W.lastIndexOf,fe=W.reduce,he=W.reduceRight,pe=W.join,de=W.sort,ve=W.slice,ye=W.toString,me=W.toLocaleString,ge=I("iterator"),_e=I("toStringTag"),be=T("typed_constructor"),we=T("def_constructor"),Ee=u.CONSTR,xe=u.TYPED,ke=u.VIEW,Oe="Wrong length!",je=A(1,function(e,t){return Ce(C(e,e[we]),t)}),Se=i(function(){return 1===new $(new Uint16Array([1]).buffer)[0]}),Te=!!$&&!!$[J].set&&i(function(){new $(1).set({})}),Ie=function(e,t){if(void 0===e)throw V(Oe);var n=+e,r=v(e);if(t&&!_(n,r))throw H(Oe);return r},Ae=function(e,t){var n=d(e);if(0>n||n%t)throw H("Wrong offset!");return n},Pe=function(e){if(w(e)&&xe in e)return e;throw V(e+" is not a typed array!")},Ce=function(e,t){if(!(w(e)&&be in e))throw V("It is not a typed array constructor!");return new e(t)},Re=function(e,t){return Ne(C(e,e[we]),t)},Ne=function(e,t){for(var n=0,r=t.length,o=Ce(e,r);r>n;)o[n]=t[n++];return o},De=function(e,t,n){U(e,t,{get:function(){return this._d[n]}})},Me=function(e){var t,n,r,o,i,a,u=E(e),s=arguments.length,l=s>1?arguments[1]:void 0,f=void 0!==l,h=S(u);if(void 0!=h&&!x(h)){for(a=h.call(u),r=[],t=0;!(i=a.next()).done;t++)r.push(i.value);u=r}for(f&&s>2&&(l=c(l,arguments[2],2)),t=0,n=v(u.length),o=Ce(this,n);n>t;t++)o[t]=f?l(u[t],t):u[t];return o},Fe=function(){for(var e=0,t=arguments.length,n=Ce(this,t);t>e;)n[e]=arguments[e++];return n},Le=!!$&&i(function(){me.call(new $(1))}),Be=function(){return me.apply(Le?ve.call(Pe(this)):Pe(this),arguments)},qe={copyWithin:function(e,t){return L.call(Pe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return ne(Pe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return F.apply(Pe(this),arguments)},filter:function(e){return Re(this,ee(Pe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return re(Pe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return oe(Pe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Z(Pe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ae(Pe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ie(Pe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return pe.apply(Pe(this),arguments)},lastIndexOf:function(e){return le.apply(Pe(this),arguments)},map:function(e){return je(Pe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return fe.apply(Pe(this),arguments)},reduceRight:function(e){return he.apply(Pe(this),arguments)},reverse:function(){for(var e,t=this,n=Pe(t).length,r=Math.floor(n/2),o=0;r>o;)e=t[o],t[o++]=t[--n],t[n]=e;return t},some:function(e){return te(Pe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return de.call(Pe(this),e)},subarray:function(e,t){var n=Pe(this),r=n.length,o=y(e,r);return new(C(n,n[we]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,v((void 0===t?r:y(t,r))-o))}},Ue=function(e,t){return Re(this,ve.call(Pe(this),e,t))},Ke=function(e){Pe(this);var t=Ae(arguments[1],1),n=this.length,r=E(e),o=v(r.length),i=0;if(o+t>n)throw H(Oe);for(;o>i;)this[t+i]=r[i++]},He={entries:function(){return ce.call(Pe(this))},keys:function(){return se.call(Pe(this))},values:function(){return ue.call(Pe(this))}},Ve=function(e,t){return w(e)&&e[xe]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},$e=function(e,t){return Ve(e,t=m(t,!0))?f(2,e[t]):K(e,t)},ze=function(e,t,n){return!(Ve(e,t=m(t,!0))&&w(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?U(e,t,n):(e[t]=n.value,e)};Ee||(q.f=$e,B.f=ze),a(a.S+a.F*!Ee,"Object",{getOwnPropertyDescriptor:$e,defineProperty:ze}),i(function(){ye.call({})})&&(ye=me=function(){return pe.call(this)});var Ge=p({},qe);p(Ge,He),h(Ge,ge,He.values),p(Ge,{slice:Ue,set:Ke,constructor:function(){},toString:ye,toLocaleString:Be}),De(Ge,"buffer","b"),De(Ge,"byteOffset","o"),De(Ge,"byteLength","l"),De(Ge,"length","e"),U(Ge,_e,{get:function(){return this[xe]}}),e.exports=function(e,t,n,s){s=!!s;var c=e+(s?"Clamped":"")+"Array",f="Uint8Array"!=c,p="get"+e,d="set"+e,y=o[c],m=y||{},g=y&&O(y),_=!y||!u.ABV,E={},x=y&&y[J],S=function(e,n){var r=e._d;return r.v[p](n*t+r.o,Se)},T=function(e,n,r){var o=e._d;s&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[d](n*t+o.o,r,Se)},I=function(e,t){U(e,t,{get:function(){return S(this,t)},set:function(e){return T(this,t,e)},enumerable:!0})};_?(y=n(function(e,n,r,o){l(e,y,c,"_d");var i,a,u,s,f=0,p=0;if(w(n)){if(!(n instanceof Q||(s=b(n))==z||s==G))return xe in n?Ne(y,n):Me.call(y,n);i=n,p=Ae(r,t);var d=n.byteLength;if(void 0===o){if(d%t)throw H(Oe);if(a=d-p,0>a)throw H(Oe)}else if(a=v(o)*t,a+p>d)throw H(Oe);u=a/t}else u=Ie(n,!0),a=u*t,i=new Q(a);for(h(e,"_d",{b:i,o:p,l:a,e:u,v:new X(i)});u>f;)I(e,f++)}),x=y[J]=k(Ge),h(x,"constructor",y)):D(function(e){new y(null),new y(e)},!0)||(y=n(function(e,n,r,o){l(e,y,c);var i;return w(n)?n instanceof Q||(i=b(n))==z||i==G?void 0!==o?new m(n,Ae(r,t),o):void 0!==r?new m(n,Ae(r,t)):new m(n):xe in n?Ne(y,n):Me.call(y,n):new m(Ie(n,f));
}),Z(g!==Function.prototype?j(m).concat(j(g)):j(m),function(e){e in y||h(y,e,m[e])}),y[J]=x,r||(x.constructor=y));var A=x[ge],P=!!A&&("values"==A.name||void 0==A.name),C=He.values;h(y,be,!0),h(x,xe,c),h(x,ke,!0),h(x,we,y),(s?new y(1)[_e]==c:_e in x)||U(x,_e,{get:function(){return c}}),E[c]=y,a(a.G+a.W+a.F*(y!=m),E),a(a.S,c,{BYTES_PER_ELEMENT:t,from:Me,of:Fe}),Y in x||h(x,Y,t),a(a.P,c,qe),M(c),a(a.P+a.F*Te,c,{set:Ke}),a(a.P+a.F*!P,c,He),a(a.P+a.F*(x.toString!=ye),c,{toString:ye}),a(a.P+a.F*i(function(){new y(1).slice()}),c,{slice:Ue}),a(a.P+a.F*(i(function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()})||!i(function(){x.toLocaleString.call([1,2])})),c,{toLocaleString:Be}),N[c]=P?A:C,r||P||h(x,ge,C)}}else e.exports=function(){}},function(e,t,n){var r=n(74),o=n(26)("iterator"),i=n(129);e.exports=n(6).isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||i.hasOwnProperty(r(t))}},function(e,t,n){n(221)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(221)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(e,t,n){n(221)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(221)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(221)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(221)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(221)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(221)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){var r=n(10),o=Function.apply;r(r.S,"Reflect",{apply:function(e,t,n){return o.call(e,t,n)}})},function(e,t,n){var r=n(10),o=n(44),i=n(22),a=n(13),u=n(14),s=n(76);r(r.S+r.F*n(9)(function(){function e(){}return!(Reflect.construct(function(){},[],e)instanceof e)}),"Reflect",{construct:function(e,t){i(e);var n=arguments.length<3?e:i(arguments[2]);if(e==n){if(void 0!=t)switch(a(t).length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(s.apply(e,r))}var c=n.prototype,l=o(u(c)?c:Object.prototype),f=Function.apply.call(e,l,t);return u(f)?f:l}})},function(e,t,n){var r=n(12),o=n(10),i=n(13),a=n(17);o(o.S+o.F*n(9)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){i(e),t=a(t,!0),i(n);try{return r.f(e,t,n),!0}catch(o){return!1}}})},function(e,t,n){var r=n(10),o=n(49).f,i=n(13);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=o(i(e),t);return n&&!n.configurable?!1:delete e[t]}})},function(e,t,n){"use strict";var r=n(10),o=n(13),i=function(e){this._t=o(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(130)(i,"Object",function(){var e,t=this,n=t._k;do if(t._i>=n.length)return{value:void 0,done:!0};while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new i(e)}})},function(e,t,n){function r(e,t){var n,u,l=arguments.length<3?e:arguments[2];return c(e)===l?e[t]:(n=o.f(e,t))?a(n,"value")?n.value:void 0!==n.get?n.get.call(l):void 0:s(u=i(e))?r(u,t,l):void 0}var o=n(49),i=n(58),a=n(7),u=n(10),s=n(14),c=n(13);u(u.S,"Reflect",{get:r})},function(e,t,n){var r=n(49),o=n(10),i=n(13);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(i(e),t)}})},function(e,t,n){var r=n(10),o=n(58),i=n(13);r(r.S,"Reflect",{getPrototypeOf:function(e){return o(i(e))}})},function(e,t,n){var r=n(10);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(10),o=n(13),i=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return o(e),i?i(e):!0}})},function(e,t,n){var r=n(10);r(r.S,"Reflect",{ownKeys:n(242)})},function(e,t,n){var r=n(48),o=n(41),i=n(13),a=n(5).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(i(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(10),o=n(13),i=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){o(e);try{return i&&i(e),!0}catch(t){return!1}}})},function(e,t,n){function r(e,t,n){var s,h,p=arguments.length<4?e:arguments[3],d=i.f(l(e),t);if(!d){if(f(h=a(e)))return r(h,t,n,p);d=c(0)}return u(d,"value")?d.writable!==!1&&f(p)?(s=i.f(p,t)||c(0),s.value=n,o.f(p,t,s),!0):!1:void 0===d.set?!1:(d.set.call(p,n),!0)}var o=n(12),i=n(49),a=n(58),u=n(7),s=n(10),c=n(18),l=n(13),f=n(14);s(s.S,"Reflect",{set:r})},function(e,t,n){var r=n(10),o=n(72);o&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){o.check(e,t);try{return o.set(e,t),!0}catch(n){return!1}}})},function(e,t,n){"use strict";var r=n(10),o=n(34)(!0);r(r.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(185)("includes")},function(e,t,n){"use strict";var r=n(10),o=n(127)(!0);r(r.P,"String",{at:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r=n(10),o=n(249);r(r.P,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){var r=n(35),o=n(91),i=n(33);e.exports=function(e,t,n,a){var u=String(i(e)),s=u.length,c=void 0===n?" ":String(n),l=r(t);if(s>=l)return u;""==c&&(c=" ");var f=l-s,h=o.call(c,Math.ceil(f/c.length));return h.length>f&&(h=h.slice(0,f)),a?h+u:u+h}},function(e,t,n){"use strict";var r=n(10),o=n(249);r(r.P,"String",{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(82)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(82)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){"use strict";var r=n(10),o=n(33),i=n(35),a=n(134),u=n(195),s=RegExp.prototype,c=function(e,t){this._r=e,this._s=t};n(130)(c,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),r(r.P,"String",{matchAll:function(e){if(o(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in s?String(e.flags):u.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=i(e.lastIndex),new c(r,t)}})},function(e,t,n){var r=n(10),o=n(242),i=n(30),a=n(49),u=n(163);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n=i(e),r=a.f,s=o(n),c={},l=0;s.length>l;)u(c,t=s[l++],r(n,t));return c}})},function(e,t,n){var r=n(10),o=n(256)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},function(e,t,n){var r=n(28),o=n(30),i=n(42).f;e.exports=function(e){return function(t){for(var n,a=o(t),u=r(a),s=u.length,c=0,l=[];s>c;)i.call(a,n=u[c++])&&l.push(e?[n,a[n]]:a[n]);return l}}},function(e,t,n){var r=n(10),o=n(256)(!0);r(r.S,"Object",{entries:function(e){return o(e)}})},function(e,t,n){"use strict";var r=n(10),o=n(57),i=n(22),a=n(12);n(8)&&r(r.P+n(259),"Object",{__defineGetter__:function(e,t){a.f(o(this),e,{get:i(t),enumerable:!0,configurable:!0})}})},function(e,t,n){e.exports=n(50)||!n(9)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(5)[e]})},function(e,t,n){"use strict";var r=n(10),o=n(57),i=n(22),a=n(12);n(8)&&r(r.P+n(259),"Object",{__defineSetter__:function(e,t){a.f(o(this),e,{set:i(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(10),o=n(57),i=n(17),a=n(58),u=n(49).f;n(8)&&r(r.P+n(259),"Object",{__lookupGetter__:function(e){var t,n=o(this),r=i(e,!0);do if(t=u(n,r))return t.get;while(n=a(n))}})},function(e,t,n){"use strict";var r=n(10),o=n(57),i=n(17),a=n(58),u=n(49).f;n(8)&&r(r.P+n(259),"Object",{__lookupSetter__:function(e){var t,n=o(this),r=i(e,!0);do if(t=u(n,r))return t.set;while(n=a(n))}})},function(e,t,n){var r=n(10);r(r.P+r.R,"Map",{toJSON:n(264)("Map")})},function(e,t,n){var r=n(74),o=n(265);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},function(e,t,n){var r=n(204);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){var r=n(10);r(r.P+r.R,"Set",{toJSON:n(264)("Set")})},function(e,t,n){var r=n(10);r(r.S,"System",{global:n(5)})},function(e,t,n){var r=n(10),o=n(32);r(r.S,"Error",{isError:function(e){return"Error"===o(e)}})},function(e,t,n){var r=n(10);r(r.S,"Math",{iaddh:function(e,t,n,r){var o=e>>>0,i=t>>>0,a=n>>>0;return i+(r>>>0)+((o&a|(o|a)&~(o+a>>>0))>>>31)|0}})},function(e,t,n){var r=n(10);r(r.S,"Math",{isubh:function(e,t,n,r){var o=e>>>0,i=t>>>0,a=n>>>0;return i-(r>>>0)-((~o&a|~(o^a)&o-a>>>0)>>>31)|0}})},function(e,t,n){var r=n(10);r(r.S,"Math",{imulh:function(e,t){var n=65535,r=+e,o=+t,i=r&n,a=o&n,u=r>>16,s=o>>16,c=(u*a>>>0)+(i*a>>>16);return u*s+(c>>16)+((i*s>>>0)+(c&n)>>16)}})},function(e,t,n){var r=n(10);r(r.S,"Math",{umulh:function(e,t){var n=65535,r=+e,o=+t,i=r&n,a=o&n,u=r>>>16,s=o>>>16,c=(u*a>>>0)+(i*a>>>16);return u*s+(c>>>16)+((i*s>>>0)+(c&n)>>>16)}})},function(e,t,n){var r=n(274),o=n(13),i=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,o(n),i(r))}})},function(e,t,n){var r=n(209),o=n(10),i=n(24)("metadata"),a=i.store||(i.store=new(n(213))),u=function(e,t,n){var o=a.get(e);if(!o){if(!n)return;a.set(e,o=new r)}var i=o.get(t);if(!i){if(!n)return;o.set(t,i=new r)}return i},s=function(e,t,n){var r=u(t,n,!1);return void 0===r?!1:r.has(e)},c=function(e,t,n){var r=u(t,n,!1);return void 0===r?void 0:r.get(e)},l=function(e,t,n,r){u(n,r,!0).set(e,t)},f=function(e,t){var n=u(e,t,!1),r=[];return n&&n.forEach(function(e,t){r.push(t)}),r},h=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},p=function(e){o(o.S,"Reflect",e)};e.exports={store:a,map:u,has:s,get:c,set:l,keys:f,key:h,exp:p}},function(e,t,n){var r=n(274),o=n(13),i=r.key,a=r.map,u=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:i(arguments[2]),r=a(o(t),n,!1);if(void 0===r||!r["delete"](e))return!1;if(r.size)return!0;var s=u.get(t);return s["delete"](n),!!s.size||u["delete"](t)}})},function(e,t,n){var r=n(274),o=n(13),i=n(58),a=r.has,u=r.get,s=r.key,c=function(e,t,n){var r=a(e,t,n);if(r)return u(e,t,n);var o=i(t);return null!==o?c(e,o,n):void 0};r.exp({getMetadata:function(e,t){return c(e,o(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var r=n(212),o=n(265),i=n(274),a=n(13),u=n(58),s=i.keys,c=i.key,l=function(e,t){var n=s(e,t),i=u(e);if(null===i)return n;var a=l(i,t);return a.length?n.length?o(new r(n.concat(a))):a:n};i.exp({getMetadataKeys:function(e){return l(a(e),arguments.length<2?void 0:c(arguments[1]))}})},function(e,t,n){var r=n(274),o=n(13),i=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return i(e,o(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(274),o=n(13),i=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return i(o(e),arguments.length<2?void 0:a(arguments[1]))}})},function(e,t,n){var r=n(274),o=n(13),i=n(58),a=r.has,u=r.key,s=function(e,t,n){var r=a(e,t,n);if(r)return!0;var o=i(t);return null!==o?s(e,o,n):!1};r.exp({hasMetadata:function(e,t){return s(e,o(t),arguments.length<3?void 0:u(arguments[2]))}})},function(e,t,n){var r=n(274),o=n(13),i=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return i(e,o(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(274),o=n(13),i=n(22),a=r.key,u=r.set;r.exp({metadata:function(e,t){return function(n,r){u(e,t,(void 0!==r?o:i)(n),a(r))}}})},function(e,t,n){var r=n(5),o=n(10),i=n(77),a=n(284),u=r.navigator,s=!!u&&/MSIE .\./.test(u.userAgent),c=function(e){return s?function(t,n){return e(i(a,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),n)}:e};o(o.G+o.B+o.F*s,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},function(e,t,n){"use strict";var r=n(285),o=n(77),i=n(22);e.exports=function(){for(var e=i(this),t=arguments.length,n=Array(t),a=0,u=r._,s=!1;t>a;)(n[a]=arguments[a++])===u&&(s=!0);return function(){var r,i=this,a=arguments.length,c=0,l=0;if(!s&&!a)return o(e,n,i);if(r=n.slice(),s)for(;t>c;c++)r[c]===u&&(r[c]=arguments[l++]);for(;a>l;)r.push(arguments[l++]);return o(e,r,i)}}},function(e,t,n){e.exports=n(5)},function(e,t,n){var r=n(10),o=n(206);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,n){for(var r=n(192),o=n(19),i=n(5),a=n(11),u=n(129),s=n(26),c=s("iterator"),l=s("toStringTag"),f=u.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],p=0;5>p;p++){var d,v=h[p],y=i[v],m=y&&y.prototype;if(m){m[c]||a(m,c,f),m[l]||a(m,l,v),u[v]=f;for(d in r)m[d]||o(m,d,r[d],!0)}}},function(e,t,n){(function(t,n){!function(t){"use strict";function r(e,t,n,r){var o=Object.create((t||i).prototype),a=new d(r||[]);return o._invoke=f(e,n,a),o}function o(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function i(){}function a(){}function u(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){this.arg=e}function l(e){function t(t,n){var r=e[t](n),o=r.value;return o instanceof c?Promise.resolve(o.arg).then(i,a):Promise.resolve(o).then(function(e){return r.value=e,r})}function r(e,n){function r(){return t(e,n)}return o=o?o.then(r,r):new Promise(function(e){e(r())})}"object"==typeof n&&n.domain&&(t=n.domain.bind(t));var o,i=t.bind(e,"next"),a=t.bind(e,"throw");t.bind(e,"return");this._invoke=r}function f(e,t,n){var r=E;return function(i,a){if(r===k)throw new Error("Generator is already running");if(r===O){if("throw"===i)throw a;return y()}for(;;){var u=n.delegate;if(u){if("return"===i||"throw"===i&&u.iterator[i]===m){n.delegate=null;var s=u.iterator["return"];if(s){var c=o(s,u.iterator,a);if("throw"===c.type){i="throw",a=c.arg;continue}}if("return"===i)continue}var c=o(u.iterator[i],u.iterator,a);if("throw"===c.type){n.delegate=null,i="throw",a=c.arg;continue}i="next",a=m;var l=c.arg;if(!l.done)return r=x,l;n[u.resultName]=l.value,n.next=u.nextLoc,n.delegate=null}if("next"===i)n._sent=a,r===x?n.sent=a:n.sent=m;else if("throw"===i){if(r===E)throw r=O,a;n.dispatchException(a)&&(i="next",a=m)}else"return"===i&&n.abrupt("return",a);r=k;var c=o(e,t,n);if("normal"===c.type){r=n.done?O:x;var l={value:c.arg,done:n.done};if(c.arg!==j)return l;n.delegate&&"next"===i&&(a=m)}else"throw"===c.type&&(r=O,i="throw",a=c.arg)}}}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function v(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function o(){for(;++n<e.length;)if(g.call(e,n))return o.value=e[n],o.done=!1,o;return o.value=m,o.done=!0,o};return r.next=r}}return{next:y}}function y(){return{value:m,done:!0}}var m,g=Object.prototype.hasOwnProperty,_="function"==typeof Symbol&&Symbol.iterator||"@@iterator",b="object"==typeof e,w=t.regeneratorRuntime;if(w)return void(b&&(e.exports=w));w=t.regeneratorRuntime=b?e.exports:{},w.wrap=r;var E="suspendedStart",x="suspendedYield",k="executing",O="completed",j={},S=u.prototype=i.prototype;a.prototype=S.constructor=u,u.constructor=a,a.displayName="GeneratorFunction",w.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return t?t===a||"GeneratorFunction"===(t.displayName||t.name):!1},w.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):e.__proto__=u,e.prototype=Object.create(S),e},w.awrap=function(e){return new c(e)},s(l.prototype),w.async=function(e,t,n,o){var i=new l(r(e,t,n,o));return w.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},s(S),S[_]=function(){return this},S.toString=function(){return"[object Generator]"},w.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},w.values=v,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=m,this.done=!1,this.delegate=null,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=g.call(o,"catchLoc"),u=g.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?this.next=o.finallyLoc:this.complete(i),j},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),j}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;p(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:v(e),resultName:t,nextLoc:n},j}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}(),n(289))},function(e,t){function n(){c=!1,a.length?s=a.concat(s):l=-1,s.length&&r()}function r(){if(!c){var e=setTimeout(n);c=!0;for(var t=s.length;t;){for(a=s,s=[];++l<t;)a&&a[l].run();l=-1,t=s.length}a=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var a,u=e.exports={},s=[],c=!1,l=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new o(e,t)),1!==s.length||c||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t,n){n(291),e.exports=n(6).RegExp.escape},function(e,t,n){var r=n(10),o=n(292)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return o(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Kinvey=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(294),u=r(a),s=n(298),c=n(304),l=n(418),f=n(532),h=n(492),p=n(421),d=n(305),v=n(533),y=n(419),m=n(554),g=n(420),_=n(517),b=n(507),w=r(b),E=n(417),x=r(E),k=e.env.KINVEY_DATASTORE_NAMESPACE||"appdata",O=function(){function e(){o(this,e)}return i(e,null,[{key:"init",value:function(t){if(!t.appKey&&!t.appId)throw new s.KinveyError("No App Key was provided. Unable to create a new Client without an App Key.");if(!t.appSecret&&!t.masterSecret)throw new s.KinveyError("No App Secret or Master Secret was provided. Unable to create a new Client without an App Key.");return e.client=l.Client.init(t),e.client}},{key:"ping",value:function(){var e=arguments.length<=0||void 0===arguments[0]?l.Client.sharedInstance():arguments[0],t=new _.NetworkRequest({method:g.HttpMethod.GET,authType:g.AuthType.All,url:w["default"].format({protocol:e.protocol,host:e.host,pathname:k+"/"+e.appKey})}),n=t.execute().then(function(e){return e.data});return n}},{key:"client",get:function(){if(!e._client)throw new s.KinveyError("You have not initialized the library. Please call Kinvey.init() to initialize the library.");return e._client},set:function(t){if(!t)throw new s.KinveyError("Client must not be undefined.");t instanceof l.Client||(t=new l.Client((0,x["default"])(t,"toJSON",t))),e._client=t}}]),e}();O.Aggregation=c.Aggregation,O.AuthorizationGrant=g.AuthorizationGrant,O.Command=f.Command,O.DataStore=v.DataStore,O.DataStoreType=g.DataStoreType,O.Log=h.Log,O.Metadata=p.Metadata,O.Promise=u["default"],O.Query=d.Query,O.SocialIdentity=g.SocialIdentity,O.Sync=y.Sync,O.User=m.User,t.Kinvey=O}).call(t,n(289))},function(module,exports,__webpack_require__){(function(global){"use strict";function defineProperties(e,t){_forEach(Object.keys(t),function(n){var r=t[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:!0,value:r})})}function tryCatch1(e,t){try{return e(t)}catch(n){return errorObj.e=n,errorObj}}function tryCatch2(e,t,n){try{return e(t,n)}catch(r){return errorObj.e=r,errorObj}}function tryCatch2r(e,t,n,r){try{return e.call(t,n,r)}catch(o){return errorObj.e=o,errorObj}}function tryCatch1n(e,t){try{return new e(t)}catch(n){return errorObj.e=n,errorObj}}function TypeIsObject(e){return!TypeIsNotObject(e)}function TypeIsNotObject(e){return void 0===e||null===e||e===!0||e===!1||"string"==typeof e||"number"==typeof e||"symbol"==typeof e}function SpeciesConstructor(e,t){var n=e.constructor;if(void 0===n)return t;var r;if(null===symbolSpecies)r=n;else{if(!TypeIsObject(n))throw new TypeError("Bad constructor");if(r=n[symbolSpecies],void 0===r||null===r)return t}if(!IsConstructor(r))throw new TypeError("Bad @@species");return r}function IsPromise(e){return TypeIsObject(e)?void 0!==e._promise_state:!1}function PromiseCapability(){var e=this;this.promise=void 0,this.resolve=void 0,this.reject=void 0,this.resolver=function(t,n){if(void 0!==e.resolve||void 0!==e.reject)throw new TypeError("Bad Promise implementation!");e.resolve=t,e.reject=n}}function makeCapabilityFast(e){return thenFastPath=FAST_PATH_MAKE_CAP,makeCapability(e)}function makeCapability(e){if(!IsConstructor(e))throw thenFastPath=FAST_PATH_NONE,new TypeError("Bad promise constructor");var t;if(t=freeCapabilityList.length?freeCapabilityList.pop():new PromiseCapability,strictConstructors&&e!==Promise&&!e.hasOwnProperty("noSideEffects")&&(t.dontReuse=!0),thenFastPath===FAST_PATH_MAKE_CAP){thenFastPathResolver=t.resolver,t.promise=tryCatch1n(e,thenFastPathResolver);var n=thenFastPath===FAST_PATH_CTOR_BAILED;if(thenFastPathResolver=null,thenFastPath=FAST_PATH_NONE,t.promise===errorObj)throw t.free(),errorObj.e;if(n)return t.getPromiseAndFree()}else t.promise=new e(t.resolver);if(!IsCallable(t.resolve)||!IsCallable(t.reject))throw new TypeError("Bad promise constructor");return t}function promiseCheckAndResolve(e,t){return(3&e._promise_state)===PROMISE_PENDING?(e._promise_state++,resolvePromise(e,t),e):void 0}function promiseCheckAndReject(e,t){return(3&e._promise_state)===PROMISE_PENDING?(e._promise_state++,rejectPromise(e,t),e):void 0}function promiseReactionResolve(e,t){if(e.constructor===PromiseCapability){var n=e.resolve;return n(t),e.getPromiseAndFree()}return promiseCheckAndResolve(e,t)}function promiseReactionReject(e,t,n){if(e.constructor===PromiseCapability){var r=e.reject;return r(t),n?e.promise:e.getPromiseAndFree()}return promiseCheckAndReject(e,t)}function promiseReactionJob(e,t,n){var r;return r=tryCatch1(e,n),t!==PROMISE_FAKE_CAPABILITY?r===errorObj?(r=errorObj.e,promiseReactionReject(t,r)):promiseReactionResolve(t,r):void 0}function PromiseReactionJobTask(){this.handler=null,this.capability=null,this.argument=null}function triggerPromiseReaction(e,t,n){var r;r=freePromiseReactionJobTasks.length?freePromiseReactionJobTasks.pop():new PromiseReactionJobTask,r.handler=e,r.capability=t,r.argument=n,asap(r)}function fulfillPromise(e,t){var n=e._promise_state>>>2;if(n>0&&(triggerPromiseReaction(e._promise_fulfillReactions0,e._promise_reactionCapability0,t),e._promise_fulfillReactions0=void 0,e._promise_rejectReactions0=void 0,e._promise_reactionCapability0=void 0,n>1))for(var r=1,o=0;n>r;r++)triggerPromiseReaction(e[o],e[o+2],t),e[o++]=void 0,e[o++]=void 0,e[o++]=void 0;e._promise_result=t,e._promise_state=PROMISE_FULFILLED}function rejectPromise(e,t){var n=e._promise_state>>>2;if(n>0&&(triggerPromiseReaction(e._promise_rejectReactions0,e._promise_reactionCapability0,t),e._promise_fulfillReactions0=void 0,e._promise_rejectReactions0=void 0,e._promise_reactionCapability0=void 0,n>1))for(var r=1,o=0;n>r;r++)triggerPromiseReaction(e[o+1],e[o+2],t),e[o++]=void 0,e[o++]=void 0,e[o++]=void 0;e._promise_result=t,e._promise_state=PROMISE_REJECTED}function getThen(e){return e.then}function PromiseResolveThenableJobTask(){this.promise=null,this.resolution=null,this.then=null}function triggerPromiseResolveThenableJob(e,t,n){var r;r=freePromiseResolveThenableJobTasks.length?freePromiseResolveThenableJobTasks.pop():new PromiseResolveThenableJobTask,r.promise=e,r.resolution=t,r.then=n,asap(r)}function resolvePromise(e,t){if(t===e)return rejectPromise(e,new TypeError("Self resolution"));if(TypeIsNotObject(t))return fulfillPromise(e,t);var n=tryCatch1(getThen,t);return n===errorObj?rejectPromise(e,errorObj.e):IsCallable(n)?void triggerPromiseResolveThenableJob(e,t,n):fulfillPromise(e,t)}function promiseResolveThenableJob(e,t,n){var r=!1,o=function(t){r||(r=!0,resolvePromise(e,t))},i=function(t){return r?void 0:(r=!0,rejectPromise(e,t))};n===promisePrototypeThen&&(fakeRetvalFromThen=!0);var a=tryCatch2r(n,t,o,i);a===errorObj&&i(errorObj.e)}function optimizePromiseThen(e,t,n){var r=e.then;r===promisePrototypeThen?(fakeRetvalFromThen=!0,promisePrototypeThen.call(e,t,n)):r.call(e,t,n)}var asap=__webpack_require__(295),supportSpecies=!1,strictConstructors=!1,dontReuseResolvers=!1,useES2015Class=!1,_forEach=Function.call.bind(Array.prototype.forEach),_toString=Function.call.bind(Object.prototype.toString),Symbol=global.Symbol||{},symbolSpecies=Symbol.species||(supportSpecies?"@@species":null),errorObj={e:{}},IsCallable=function(e){return"function"==typeof e},IsConstructor=IsCallable;PromiseCapability.prototype.free=function(){dontReuseResolvers||this.dontReuse||(this.promise=void 0,this.resolve=void 0,this.reject=void 0,freeCapabilityList.push(this))},PromiseCapability.prototype.getPromiseAndFree=function(){var e=this.promise;return this.free(),e};var freeCapabilityList=[],promisePrototypeThen,fakeRetvalFromThen=!1,PROMISE_IDENTITY=function(e){return e},PROMISE_THROWER=function(e){throw e},PROMISE_FAKE_CAPABILITY=new PromiseCapability,PROMISE_PENDING=0,PROMISE_RESOLVING=1,PROMISE_FULFILLED=2,PROMISE_REJECTED=3,FAST_PATH_NONE=0,FAST_PATH_MAKE_CAP=1,FAST_PATH_CTOR_BAILED=2,thenFastPath=FAST_PATH_NONE,thenFastPathResolver=null;PromiseReactionJobTask.prototype.call=function(){promiseReactionJob(this.handler,this.capability,this.argument),this.handler=null,this.capability=null,this.argument=null,freePromiseReactionJobTasks.push(this)};var freePromiseReactionJobTasks=[];PromiseResolveThenableJobTask.prototype.call=function(){promiseResolveThenableJob(this.promise,this.resolution,this.then),this.promise=null,this.resolution=null,this.then=null,freePromiseResolveThenableJobTasks.push(this)};var freePromiseResolveThenableJobTasks=[],PromiseConstruct=function e(t){if(!(this instanceof e))throw new TypeError('Constructor Promise requires "new"');if(void 0!==this._promise_state)throw new TypeError("Bad construction");if(this._promise_result=void 0,this._promise_state=PROMISE_PENDING,this._promise_fulfillReactions0=void 0,this._promise_rejectReactions0=void 0,this._promise_reactionCapability0=void 0,thenFastPath===FAST_PATH_MAKE_CAP&&t===thenFastPathResolver)return void(thenFastPath=FAST_PATH_CTOR_BAILED);if(!IsCallable(t))throw new TypeError("not a valid resolver");var n=this,r=function(e){promiseCheckAndResolve(n,e)},o=function(e){promiseCheckAndReject(n,e)},i=tryCatch2(t,r,o);i===errorObj&&o(errorObj.e)},Promise=function makeClass(){if(useES2015Class)try{return eval('(function(PromiseConstruct) {"use strict";return class Promise {  constructor(executor) {    PromiseConstruct.call(this, executor);  }};})')(PromiseConstruct)}catch(e){}return PromiseConstruct}(),Promise$prototype=Promise.prototype;defineProperties(Promise,{reject:function(e){var t=this;if(!TypeIsObject(t))throw new TypeError("Bad promise constructor");var n=makeCapabilityFast(t);return promiseReactionReject(n,e)},resolve:function(e){var t=this;if(!TypeIsObject(t))throw new TypeError("Bad promise constructor");if(IsPromise(e)){var n=e.constructor;if(n===t)return e}var r=makeCapabilityFast(t);return promiseReactionResolve(r,e)}}),defineProperties(Promise$prototype,{"catch":function(e){return this.then(void 0,e)},then:function(e,t){var n=fakeRetvalFromThen;fakeRetvalFromThen=!1;var r=this;if(!IsPromise(r))throw new TypeError("not a promise");var o,i;!strictConstructors&&n?o=PROMISE_FAKE_CAPABILITY:(i=SpeciesConstructor(r,Promise),o=n&&(i===Promise||i.hasOwnProperty("noSideEffects"))?PROMISE_FAKE_CAPABILITY:makeCapabilityFast(i)),IsCallable(e)||(e=PROMISE_IDENTITY),IsCallable(t)||(t=PROMISE_THROWER);var a;switch(3&r._promise_state){case PROMISE_PENDING:case PROMISE_RESOLVING:if(a=r._promise_state>>>2,0===a)r._promise_fulfillReactions0=e,r._promise_rejectReactions0=t,r._promise_reactionCapability0=o;else{var u=3*(a-1);r[u]=e,r[u+1]=t,r[u+2]=o}r._promise_state+=4;break;case PROMISE_FULFILLED:triggerPromiseReaction(e,o,r._promise_result);break;case PROMISE_REJECTED:triggerPromiseReaction(t,o,r._promise_result);break;default:throw new TypeError("unexpected")}return o.constructor===PromiseCapability?o.promise:o}}),promisePrototypeThen=Promise$prototype.then,Promise$prototype.then0=function(e,t){optimizePromiseThen(this,e,t)},null!==symbolSpecies&&Object.defineProperty(Promise,symbolSpecies,{configurable:!0,enumerable:!1,get:function(){return this}}),__webpack_require__(296)(Promise,PromiseCapability,makeCapability,makeCapabilityFast,promiseReactionResolve,promiseReactionReject,optimizePromiseThen,symbolSpecies),module.exports=Promise}).call(exports,function(){return this}())},function(e,t){(function(t){"use strict";function n(e){u.length||(a(),s=!0),u[u.length]=e}function r(){for(;c<u.length;){var e=c;if(c+=1,u[e].call(),c>l){for(var t=0,n=u.length-c;n>t;t++)u[t]=u[t+c];u.length-=c,c=0}}u.length=0,c=0,s=!1}function o(e){var t=1,n=new f(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var a,u=[],s=!1,c=0,l=1024,f=t.MutationObserver||t.WebKitMutationObserver;a="function"==typeof f?o(r):i(r),n.requestFlush=a,n.makeRequestCallFromTimer=i}).call(t,function(){return this}())},function(e,t,n){(function(t){"use strict";function r(e,t){try{return e.call(t)}catch(n){return v.e=n,v}}function o(e,t){try{return e(t)}catch(n){return v.e=n,v}}function i(e,t,n){try{return e(t,n)}catch(r){return v.e=r,v}}function a(e,t,n,r){try{return e(t,n,r)}catch(o){return v.e=o,v}}var u=n(297),s=Function.call.bind(Function.call),c=Function.call.bind(Array.prototype.forEach),l=(Function.call.bind(Object.prototype.toString),
Math.floor),f=Math.abs,h=t.Symbol||{},p=h.iterator||"@@iterator",d=function(e,t){c(Object.keys(t),function(n){var r=t[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:!0,value:r})})},v={e:{}},y=function(e){return null!=e&&Object(e)===e},m=function(e,t){if(null==e)throw new TypeError(t||"Cannot call method on "+e);return Object(e)},g=function(e){return"function"==typeof e},_=function(e){return+e},b=Number.isNaN||function(e){return e!==e},w=Number.isFinite||function(e){return"number"==typeof e&&t.isFinite(e)},E=function(e){var t=_(e);return b(t)?0:0!==t&&w(t)?(t>0?1:-1)*l(f(t)):t},x=function(e){var t=E(e);return 0>=t?0:"undefined"!=typeof Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t},k=function(e){this.i=0,this.array=e};d(k.prototype,{next:function(){var e=this.i,t=this.array;if(!(this instanceof k))throw new TypeError("Not an ArrayIterator");if("undefined"!=typeof t)for(var n=Array.isArray(t)?t.length:x(t.length);n>e;e++){var r=t[e];return this.i=e+1,{value:r,done:!1}}return this.array=void 0,{value:void 0,done:!0}}}),Object.defineProperty(k.prototype,p,{configurable:!0,enumerable:!1,writable:!0,value:function(){return this}});var O={},j=function(e,t){var n=S(e,p);if(!g(n)){if(Array.isArray(e)||u(e))return t?O:new k(e);throw new TypeError("value is not an iterable")}if(t&&n===Array.prototype[p])return O;var r=s(n,e);if(!y(r))throw new TypeError("bad iterator");return r},S=function(e,t){var n=m(e)[t];if(void 0!==n&&null!==n){if(!g(n))throw new TypeError("Method not callable: "+t);return n}},T=function(e){return!!e.done},I=function(e,t){var n=S(e,"return");if(void 0!==n){var o,i;if(o=r(n,e),o===v&&(i=v.e),!t){if(i)throw i;if(!y(o))throw new TypeError("Iterator's return method returned a non-object.")}}},A=function(e){var t=e.next();if(!y(t))throw new TypeError("bad iterator");return t},P=function(e){var t=A(e),n=T(t);return n?!1:t};e.exports=function(e,t,n,r,u,s,c,l){var f=function(e){if(!y(e))throw new TypeError("Promise is not object");if(null!==l){var t=e[l];if(void 0!==t&&null!==t)return t}return e},h=function(e,t,n,r){var o=!1;return function(i){o||(o=!0,t[e]=i,0===--r.count&&u(n,t))}},p=function(e,n,r){var i,a,l,f=e.iterator,p=[],d={count:1};l=r.constructor===t?r.reject:function(e){s(r,e,"no free")};for(var y=0;;y++){if(i=o(P,f),i===v)throw e.done=!0,v.e;if(i===!1){e.done=!0;break}a=i.value,p[y]=void 0;var m=n.resolve(a),g=h(y,p,r,d);d.count++,c(m,g,l)}return 0===--d.count&&u(r,p),r.constructor===t?r.promise:r},m=function(e,n,r){var o,i,a=new Array(e.length),l={count:1};i=r.constructor===t?r.reject:function(e){s(r,e,"no free")};for(var f=0;f<e.length;f++){o=e[f],a[f]=void 0;var p=n.resolve(o),d=h(f,a,r,l);l.count++,c(p,d,i)}return 0===--l.count&&u(r,a),r.constructor===t?r.promise:r},g=function(e,t,n){for(var r,i,a,u=e.iterator;;){if(r=o(P,u),r===v)throw e.done=!0,v.e;if(r===!1){e.done=!0;break}i=r.value,a=t.resolve(i),c(a,n.resolve,n.reject)}return n.promise};d(e,{all:function(e){var t,n,o,u,c=f(this),l=r(c);return t=i(j,e,!0),t===O?(o=a(m,e,c,l),o!==v?o:s(l,v.e,"no free")):t===v?s(l,v.e):(n={iterator:t,done:!1},o=a(p,n,c,l),o!==v?o:(u=v.e,n.done||(o=i(I,t,!0),o===v&&(u=v.e)),s(l,u,"no free")))},race:function(e){var t,r,u,s,c,l=f(this),h=n(l);return t=o(j,e),t===v?(u=h.reject,u(v.e),h.promise):(r={iterator:t,done:!1},s=a(g,r,l,h),s!==v?s:(c=v.e,r.done||(s=i(I,t,!0),s===v&&(c=v.e)),u=h.reject,u(c),h.promise))}})}}).call(t,function(){return this}())},function(e,t){"use strict";var n=Object.prototype.toString,r=function(e){return"[object Arguments]"===n.call(e)},o=function(e){return r(e)?!0:null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==n.call(e)&&"[object Function]"===n.call(e.callee)},i=function(){return r(arguments)}();r.isLegacyArguments=o,e.exports=i?r:o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NoResponseError=t.NotFoundError=t.NetworkConnectionError=t.KinveyError=t.InvalidCredentialsError=t.InsufficientCredentialsError=t.ActiveUserError=void 0;var o=n(299),i=r(o),a=n(302),u=r(a);Error.extend=function(e){var t=function n(t,r){return this instanceof n?(this.name=e,this.message=t,this.description=t,this.debug=r,void((0,u["default"])(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor))):new n(t,r)};return i["default"].inherits(t,this),t.prototype.toString=function(){return this.name+": "+i["default"].inspect(this.message)},t.extend=this.extend,t};t.ActiveUserError=Error.extend("ActiveUserError"),t.InsufficientCredentialsError=Error.extend("InsufficientCredentialsError"),t.InvalidCredentialsError=Error.extend("InvalidCredentialsError"),t.KinveyError=Error.extend("KinveyError"),t.NetworkConnectionError=Error.extend("NetworkConnectionError"),t.NotFoundError=Error.extend("NotFoundError"),t.NoResponseError=Error.extend("NoResponseError")},function(e,t,n){(function(e,r){function o(e,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),s(r,e,r.depth)}function i(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function a(e,t){return e}function u(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function s(e,n,r){if(e.customInspect&&n&&j(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return _(o)||(o=s(e,o,r)),o}var i=c(e,n);if(i)return i;var a=Object.keys(n),v=u(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),O(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(j(n)){var y=n.name?": "+n.name:"";return e.stylize("[Function"+y+"]","special")}if(E(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return e.stylize(Date.prototype.toString.call(n),"date");if(O(n))return l(n)}var m="",g=!1,b=["{","}"];if(d(n)&&(g=!0,b=["[","]"]),j(n)){var w=n.name?": "+n.name:"";m=" [Function"+w+"]"}if(E(n)&&(m=" "+RegExp.prototype.toString.call(n)),k(n)&&(m=" "+Date.prototype.toUTCString.call(n)),O(n)&&(m=" "+l(n)),0===a.length&&(!g||0==n.length))return b[0]+m+b[1];if(0>r)return E(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var x;return x=g?f(e,n,r,v,a):a.map(function(t){return h(e,n,r,v,t,g)}),e.seen.pop(),p(x,m,b)}function c(e,t){if(w(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,o){for(var i=[],a=0,u=t.length;u>a;++a)P(t,String(a))?i.push(h(e,t,n,r,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(h(e,t,n,r,o,!0))}),i}function h(e,t,n,r,o,i){var a,u,c;if(c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},c.get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),P(r,o)||(a="["+o+"]"),u||(e.seen.indexOf(c.value)<0?(u=y(n)?s(e,c.value,null):s(e,c.value,n-1),u.indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),w(a)){if(i&&o.match(/^\d+$/))return u;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function p(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function y(e){return null===e}function m(e){return null==e}function g(e){return"number"==typeof e}function _(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function w(e){return void 0===e}function E(e){return x(e)&&"[object RegExp]"===T(e)}function x(e){return"object"==typeof e&&null!==e}function k(e){return x(e)&&"[object Date]"===T(e)}function O(e){return x(e)&&("[object Error]"===T(e)||e instanceof Error)}function j(e){return"function"==typeof e}function S(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function T(e){return Object.prototype.toString.call(e)}function I(e){return 10>e?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var C=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,a=String(e).replace(C,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),u=r[n];i>n;u=r[++n])a+=y(u)||!x(u)?" "+u:" "+o(u);return a},t.deprecate=function(n,o){function i(){if(!a){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),a=!0}return n.apply(this,arguments)}if(w(e.process))return function(){return t.deprecate(n,o).apply(this,arguments)};if(r.noDeprecation===!0)return n;var a=!1;return i};var R,N={};t.debuglog=function(e){if(w(R)&&(R=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!N[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=r.pid;N[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else N[e]=function(){};return N[e]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=v,t.isNull=y,t.isNullOrUndefined=m,t.isNumber=g,t.isString=_,t.isSymbol=b,t.isUndefined=w,t.isRegExp=E,t.isObject=x,t.isDate=k,t.isError=O,t.isFunction=j,t.isPrimitive=S,t.isBuffer=n(300);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(301),t._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(289))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){function r(e){var t=o(e)?s.call(e):"";return t==i||t==a}var o=n(303),i="[object Function]",a="[object GeneratorFunction]",u=Object.prototype,s=u.toString;e.exports=r},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Aggregation=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(298),u=n(305),s=n(417),c=r(s),l=n(405),f=r(l),h=n(307),p=r(h),d=n(303),v=r(d),y=n(327),m=r(y),g=n(302),_=r(g),b=function(){function e(t){o(this,e),t=(0,f["default"])({query:null,initial:{},key:{},reduce:function(){}.toString()},t),this.query(t.query),this._initial=t.initial,this._key=t.key,this._reduce=t.reduce}return i(e,[{key:"by",value:function(e){return this._key[e]=!0,this}},{key:"initial",value:function(e,t){if("undefined"==typeof t&&!(0,v["default"])(e))throw new a.KinveyError("objectOrKey argument must be an Object.");return(0,v["default"])(e)?this._initial=e:this._initial[e]=t,this}},{key:"query",value:function(e){return!e||e instanceof u.Query||(e=new u.Query((0,c["default"])(e,"toJSON",e))),this._query=e,this}},{key:"process",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t={},n=[],r=this.toJSON(),o=r.reduce.replace(/function[\s\S]*?\([\s\S]*?\)/,"");r.reduce=new Function(["doc","out"],o),this._query&&(e=this._query.process(e)),(0,p["default"])(e,function(e){var n={},o=Object.keys(e);(0,p["default"])(o,function(t){n[t]=e[t]});var i=JSON.stringify(n);if(!t[i]){t[i]=n;var a=Object.keys(r.initial);(0,p["default"])(a,function(e){t[i][e]=r.initial[e]})}r.reduce(e,t[i])});var i=Object.keys(t);return(0,p["default"])(i,function(e){n.push(t[e])}),n}},{key:"reduce",value:function(e){if((0,_["default"])(e)&&(e=e.toString()),!(0,m["default"])(e))throw new a.KinveyError("fn argument must be of type function or string.");return this._reduce=e,this}},{key:"toJSON",value:function(){var e={key:this._key,initial:this._initial,reduce:this._reduce,condition:this._query?this._query.toJSON().filter:{},query:this._query?this._query.toJSON():null};return e}}],[{key:"count",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],n=new e;return t&&n.by(t),n.initial({result:0}),n.reduce(function(e,t){return t.result+=1,t}),n}},{key:"sum",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];t=t.replace("'","\\'");var n=new e;return n.initial({result:0}),n.reduce("function(doc, out) { "+(' out.result += doc["'+t+'"]; ')+"}"),n}},{key:"min",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];t=t.replace("'","\\'");var n=new e;return n.initial({result:1/0}),n.reduce("function(doc, out) { "+(' out.result = Math.min(out.result, doc["'+t+'"]); ')+"}"),n}},{key:"max",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];t=t.replace("'","\\'");var n=new e;return n.initial({result:-(1/0)}),n.reduce("function(doc, out) { "+(' out.result = Math.max(out.result, doc["'+t+'"]); ')+"}"),n}},{key:"average",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];t=t.replace("'","\\'");var n=new e;return n.initial({count:0,result:0}),n.reduce("function(doc, out) { "+(' out.result = (out.result * out.count + doc["'+t+'"]) / (out.count + 1);')+" out.count += 1;}"),n}}]),e}();t.Aggregation=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Query=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(306),s=n(404),c=r(s),l=n(405),f=r(l),h=n(326),p=r(h),d=n(415),v=r(d),y=n(327),m=r(y),g=n(303),_=r(g),b=n(416),w=r(b),E=n(307),x=r(E),k=function(){function e(t){o(this,e),t=(0,f["default"])({fields:[],filter:{},sort:{},limit:null,skip:0},t),this._fields=t.fields,this._filter=t.filter,this._sort=t.sort,this._limit=t.limit,this._skip=t.skip,this.parent=null}return a(e,[{key:"equalTo",value:function(e,t){return this._filter[e]=t,this}},{key:"contains",value:function(e,t){return(0,p["default"])(t)||(t=[t]),this.addFilter(e,"$in",t)}},{key:"containsAll",value:function(e,t){return(0,p["default"])(t)||(t=[t]),this.addFilter(e,"$all",t)}},{key:"greaterThan",value:function(e,t){if(!(0,v["default"])(t)&&!(0,m["default"])(t))throw new Error("You must supply a number or string.");return this.addFilter(e,"$gt",t)}},{key:"greaterThanOrEqualTo",value:function(e,t){if(!(0,v["default"])(t)&&!(0,m["default"])(t))throw new Error("You must supply a number or string.");return this.addFilter(e,"$gte",t)}},{key:"lessThan",value:function(e,t){if(!(0,v["default"])(t)&&!(0,m["default"])(t))throw new Error("You must supply a number or string.");return this.addFilter(e,"$lt",t)}},{key:"lessThanOrEqualTo",value:function(e,t){if(!(0,v["default"])(t)&&!(0,m["default"])(t))throw new Error("You must supply a number or string.");return this.addFilter(e,"$lte",t)}},{key:"notEqualTo",value:function(e,t){return this.addFilter(e,"$ne",t)}},{key:"notContainedIn",value:function(e,t){return(0,p["default"])(t)||(t=[t]),this.addFilter(e,"$nin",t)}},{key:"and",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return this.join("$and",Array.prototype.slice.call(t))}},{key:"nor",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return this.parent&&this.parent.filter.$and?this.parent.nor.apply(this.parent,t):this.join("$nor",Array.prototype.slice.call(t))}},{key:"or",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return this.parent?this.parent.or.apply(this.parent,t):this.join("$or",Array.prototype.slice.call(t))}},{key:"exists",value:function(e,t){return t="undefined"==typeof t?!0:t||!1,this.addFilter(e,"$exists",t)}},{key:"mod",value:function(e,t,n){if(n=n||0,(0,m["default"])(t)&&(t=parseFloat(t)),(0,m["default"])(n)&&(n=parseFloat(n)),!(0,v["default"])(t))throw new Error("Divisor must be a number.");if(!(0,v["default"])(n))throw new Error("Remainder must be a number.");return this.addFilter(e,"$mod",[t,n])}},{key:"matches",value:function(e,t,n){if(n=n||{},(0,w["default"])(t)||(t=new RegExp(t)),(t.ignoreCase||n.ignoreCase)&&n.ignoreCase!==!1)throw new Error("ignoreCase glag is not supported.");if(0!==t.source.indexOf("^"))throw new Error("regExp must have `^` at the beginning of the expression to make it an anchored expression.");var r=[];(t.multiline||n.multiline)&&n.multiline!==!1&&r.push("m"),n.extended&&r.push("x"),n.dotMatchesAll&&r.push("s");var o=this.addFilter(e,"$regex",t.source);return r.length&&this.addFilter(e,"$options",r.join("")),o}},{key:"near",value:function(e,t,n){if(!(0,p["default"])(t)||!t[0]||!t[1])throw new Error("coord argument must be of type: [number, number]");t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]);var r=this.addFilter(e,"$nearSphere",[t[0],t[1]]);return n&&this.addFilter(e,"$maxDistance",n),r}},{key:"withinBox",value:function(e,t,n){if(!(0,p["default"])(t)||!t[0]||!t[1])throw new Error("bottomLeftCoord argument must be of type: [number, number]");if(!(0,p["default"])(n)||!n[0]||!n[1])throw new Error("upperRightCoord argument must be of type: [number, number]");t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]),n[0]=parseFloat(n[0]),n[1]=parseFloat(n[1]);var r=[[t[0],t[1]],[n[0],n[1]]];return this.addFilter(e,"$within",{$box:r})}},{key:"withinPolygon",value:function(e,t){if(!(0,p["default"])(t)||t.length>3)throw new Error("coords argument must be of type: [[number, number]]");return t=t.map(function(e){if(!e[0]||!e[1])throw new Error("coords argument must be of type: [number, number]");return[parseFloat(e[0]),parseFloat(e[1])]}),this.addFilter(e,"$within",{$polygon:t})}},{key:"size",value:function(e,t){if((0,m["default"])(t)&&(t=parseFloat(t)),!(0,v["default"])(t))throw new Error("size argument must be a number");return this.addFilter(e,"$size",t)}},{key:"fields",value:function(e){if(e=e||[],!(0,p["default"])(e))throw new Error("fields argument must an Array.");return this.parent?this.parent.fields(e):this._fields=e,this}},{key:"limit",value:function(e){if((0,m["default"])(e)&&(e=parseFloat(e)),e&&!(0,v["default"])(e))throw new Error("limit argument must be of type: number.");return this._parent?this.parent.limit(e):this._limit=e,this}},{key:"skip",value:function(e){if((0,m["default"])(e)&&(e=parseFloat(e)),!(0,v["default"])(e))throw new Error("skip argument must be of type: number.");return this.parent?this.parent.skip(e):this._skip=e,this}},{key:"ascending",value:function(e){return this.parent?this.parent.ascending(e):this._sort[e]=1,this}},{key:"descending",value:function(e){return this.parent?this.parent.descending(e):this._sort[e]=-1,this}},{key:"sort",value:function(e){if(e&&!(0,_["default"])(e))throw new Error("sort argument must be of type: Object.");return this.parent?this.parent.sort(e):this._sort=e||{},this}},{key:"addFilter",value:function(e,t,n){return(0,_["default"])(this._filter[e])||(this._filter[e]={}),this._filter[e][t]=n,this}},{key:"join",value:function(t,n){var r=this,o=this,i={};n=n.map(function(t){if(!(t instanceof e)){if(!(0,_["default"])(t))throw new Error("query argument must be of type: Kinvey.Query[] or Object[].");t=new e(t)}return t.toJSON().filter}),0===n.length&&(o=new e,n=[o.toJSON().filter],o.parent=this);var a=Object.keys(this._filter);return(0,x["default"])(a,function(e){i[e]=r._filter[e],delete r._filter[e]}),this._filter[t]=[i].concat(n),o}},{key:"_process",value:function(e){var t=this;if(e){var n=function(){if(!(0,p["default"])(e))throw new Error("data argument must be of type: Array.");var n=t.toJSON();return e=(0,c["default"])(n.filter,e),n.fields&&n.fields.length>0&&(e=e.map(function(e){var t=Object.keys(e);return(0,x["default"])(t,function(t){-1===n.fields.indexOf(t)&&delete e[t]}),e})),e=e.sort(function(e,t){var r=Object.keys(n.sort);return(0,x["default"])(r,function(r){var o=(0,u.nested)(e,r),i=(0,u.nested)(t,r);if(o&&!i)return-1;if(i&&!o)return 1;if(o!==i){var a=n.sort[r];return(i>o?-1:1)*a}return 0}),0}),n.limit?{v:e.slice(n.skip,n.skip+n.limit)}:{v:e.slice(n.skip)}}();if("object"===("undefined"==typeof n?"undefined":i(n)))return n.v}return e}},{key:"toJSON",value:function(){if(this.parent)return this.parent.toJSON();var e={fields:this._fields,filter:this._filter,sort:this._sort,skip:this._skip,limit:this._limit};return e}}]),e}();t.Query=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){if(!t)return e=n?n:e;for(var r=t.split("."),o=r.shift();o&&e;)e=e[o],o=r.shift();return n?n:e}function i(e){return void 0!==e&&null!==e}function a(e){return function(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(0,s["default"])(e,function(e){(0,l["default"])(n[e])&&(t.prototype[e]=function(){for(var t=arguments.length,r=Array(t),o=0;t>o;o++)r[o]=arguments[o];return n[e].apply(this,r)})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.nested=o,t.isDefined=i,t.use=a;var u=n(307),s=r(u),c=n(302),l=r(c)},function(e,t,n){function r(e,t){return"function"==typeof t&&u(e)?o(e,t):i(e,a(t))}var o=n(308),i=n(309),a=n(331),u=n(326);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}e.exports=n},function(e,t,n){var r=n(310),o=n(330),i=o(r);e.exports=i},function(e,t,n){function r(e,t){return e&&o(e,t,i)}var o=n(311),i=n(313);e.exports=r},function(e,t,n){var r=n(312),o=r();e.exports=o},function(e,t){function n(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),u=a.length;u--;){var s=a[e?u:++o];if(n(i[s],s,i)===!1)break}return t}}e.exports=n},function(e,t,n){function r(e){var t=c(e);if(!t&&!u(e))return i(e);var n=a(e),r=!!n,l=n||[],f=l.length;for(var h in e)!o(e,h)||r&&("length"==h||s(h,f))||t&&"constructor"==h||l.push(h);return l}var o=n(314),i=n(316),a=n(317),u=n(321),s=n(328),c=n(329);e.exports=r},function(e,t,n){function r(e,t){return a.call(e,t)||"object"==typeof e&&t in e&&null===o(e)}var o=n(315),i=Object.prototype,a=i.hasOwnProperty;e.exports=r},function(e,t){function n(e){return r(Object(e))}var r=Object.getPrototypeOf;e.exports=n},function(e,t){function n(e){return r(Object(e))}var r=Object.keys;e.exports=n},function(e,t,n){function r(e){var t=e?e.length:void 0;return u(t)&&(a(e)||s(e)||i(e))?o(t,String):null}var o=n(318),i=n(319),a=n(326),u=n(324),s=n(327);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e){return o(e)&&u.call(e,"callee")&&(!c.call(e,"callee")||s.call(e)==i)}var o=n(320),i="[object Arguments]",a=Object.prototype,u=a.hasOwnProperty,s=a.toString,c=a.propertyIsEnumerable;e.exports=r},function(e,t,n){function r(e){return i(e)&&o(e)}var o=n(321),i=n(325);e.exports=r},function(e,t,n){function r(e){return null!=e&&a(o(e))&&!i(e)}var o=n(322),i=n(302),a=n(324);e.exports=r},function(e,t,n){var r=n(323),o=r("length");e.exports=o},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&r>=e}var r=9007199254740991;e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){function r(e){return"string"==typeof e||!o(e)&&i(e)&&s.call(e)==a}var o=n(326),i=n(325),a="[object String]",u=Object.prototype,s=u.toString;e.exports=r},function(e,t){function n(e,t){return e="number"==typeof e||o.test(e)?+e:-1,t=null==t?r:t,e>-1&&e%1==0&&t>e}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||r;return e===n}var r=Object.prototype;e.exports=n},function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!o(n))return e(n,r);for(var i=n.length,a=t?i:-1,u=Object(n);(t?a--:++a<i)&&r(u[a],a,u)!==!1;);return n}}var o=n(321);e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?u(e)?i(e[0],e[1]):o(e):s(e)}var o=n(332),i=n(391),a=n(401),u=n(326),s=n(402);e.exports=r},function(e,t,n){function r(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}var o=n(333),i=n(385),a=n(390);e.exports=r},function(e,t,n){function r(e,t,n,r){var s=n.length,c=s,l=!r;if(null==e)return!c;for(e=Object(e);s--;){var f=n[s];if(l&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++s<c;){f=n[s];var h=f[0],p=e[h],d=f[1];if(l&&f[2]){if(void 0===p&&!(h in e))return!1}else{var v=new o;if(r)var y=r(p,d,h,e,t,v);if(!(void 0===y?i(d,p,r,a|u,v):y))return!1}}return!0}var o=n(334),i=n(370),a=1,u=2;e.exports=r},function(e,t,n){function r(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(335),i=n(336),a=n(340),u=n(342),s=n(344);r.prototype.clear=o,r.prototype["delete"]=i,r.prototype.get=a,r.prototype.has=u,r.prototype.set=s,e.exports=r},function(e,t){function n(){this.__data__={array:[],map:null}}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=t.array;return n?o(n,e):t.map["delete"](e)}var o=n(337);e.exports=r},function(e,t,n){function r(e,t){var n=o(e,t);if(0>n)return!1;var r=e.length-1;return n==r?e.pop():a.call(e,n,1),!0}var o=n(338),i=Array.prototype,a=i.splice;e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(339);e.exports=r},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=t.array;return n?o(n,e):t.map.get(e)}var o=n(341);e.exports=r},function(e,t,n){function r(e,t){var n=o(e,t);return 0>n?void 0:e[n][1]}var o=n(338);e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=t.array;return n?o(n,e):t.map.has(e)}var o=n(343);e.exports=r},function(e,t,n){function r(e,t){return o(e,t)>-1}var o=n(338);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=n.array;r&&(r.length<a-1?i(r,e,t):(n.array=null,n.map=new o(r)));var u=n.map;return u&&u.set(e,t),this}var o=n(345),i=n(368),a=200;e.exports=r},function(e,t,n){function r(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(346),i=n(360),a=n(364),u=n(366),s=n(367);r.prototype.clear=o,r.prototype["delete"]=i,r.prototype.get=a,r.prototype.has=u,r.prototype.set=s,e.exports=r},function(e,t,n){function r(){this.__data__={hash:new o,map:i?new i:[],string:new o}}var o=n(347),i=n(359);e.exports=r},function(e,t,n){function r(){}var o=n(348),i=Object.prototype;r.prototype=o?o(null):i,e.exports=r},function(e,t,n){var r=n(349),o=r(Object,"create");e.exports=o},function(e,t,n){function r(e,t){var n=e[t];return o(n)?n:void 0}var o=n(350);e.exports=r},function(e,t,n){function r(e){if(!a(e))return!1;var t=o(e)||i(e)?p:c;return t.test(u(e))}var o=n(302),i=n(351),a=n(303),u=n(352),s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Object.prototype,f=Function.prototype.toString,h=l.hasOwnProperty,p=RegExp("^"+f.call(h).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t,n){function r(e){if(o(e))try{return a.call(e)}catch(t){}return i(e)}var o=n(302),i=n(353),a=Function.prototype.toString;e.exports=r},function(e,t,n){function r(e){if("string"==typeof e)return e;if(null==e)return"";if(i(e))return s?s.call(e):"";var t=e+"";return"0"==t&&1/e==-a?"-0":t}var o=n(354),i=n(358),a=1/0,u=o?o.prototype:void 0,s=u?u.toString:void 0;e.exports=r},function(e,t,n){var r=n(355),o=r.Symbol;e.exports=o},function(e,t,n){(function(e,r){var o=n(357),i={"function":!0,object:!0},a=i[typeof t]&&t&&!t.nodeType?t:void 0,u=i[typeof e]&&e&&!e.nodeType?e:void 0,s=o(a&&u&&"object"==typeof r&&r),c=o(i[typeof self]&&self),l=o(i[typeof window]&&window),f=o(i[typeof this]&&this),h=s||l!==(f&&f.window)&&l||c||f||Function("return this")();e.exports=h}).call(t,n(356)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(e){return e&&e.Object===Object?e:null}e.exports=n},function(e,t,n){function r(e){return"symbol"==typeof e||o(e)&&u.call(e)==i}var o=n(325),i="[object Symbol]",a=Object.prototype,u=a.toString;e.exports=r},function(e,t,n){var r=n(349),o=n(355),i=r(o,"Map");e.exports=i},function(e,t,n){function r(e){var t=this.__data__;return u(e)?a("string"==typeof e?t.string:t.hash,e):o?t.map["delete"](e):i(t.map,e)}var o=n(359),i=n(337),a=n(361),u=n(363);e.exports=r},function(e,t,n){function r(e,t){return o(e,t)&&delete e[t]}var o=n(362);e.exports=r},function(e,t,n){function r(e,t){return o?void 0!==e[t]:a.call(e,t)}var o=n(348),i=Object.prototype,a=i.hasOwnProperty;e.exports=r},function(e,t){function n(e){var t=typeof e;return"number"==t||"boolean"==t||"string"==t&&"__proto__"!=e||null==e}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;return u(e)?a("string"==typeof e?t.string:t.hash,e):o?t.map.get(e):i(t.map,e)}var o=n(359),i=n(341),a=n(365),u=n(363);e.exports=r},function(e,t,n){function r(e,t){if(o){var n=e[t];return n===i?void 0:n}return u.call(e,t)?e[t]:void 0}var o=n(348),i="__lodash_hash_undefined__",a=Object.prototype,u=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return u(e)?a("string"==typeof e?t.string:t.hash,e):o?t.map.has(e):i(t.map,e)}var o=n(359),i=n(343),a=n(362),u=n(363);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;
return u(e)?a("string"==typeof e?n.string:n.hash,e,t):o?n.map.set(e,t):i(n.map,e,t),this}var o=n(359),i=n(368),a=n(369),u=n(363);e.exports=r},function(e,t,n){function r(e,t,n){var r=o(e,t);0>r?e.push([t,n]):e[r][1]=n}var o=n(338);e.exports=r},function(e,t,n){function r(e,t,n){e[t]=o&&void 0===n?i:n}var o=n(348),i="__lodash_hash_undefined__";e.exports=r},function(e,t,n){function r(e,t,n,u,s){return e===t?!0:null==e||null==t||!i(e)&&!a(t)?e!==e&&t!==t:o(e,t,r,n,u,s)}var o=n(371),i=n(303),a=n(325);e.exports=r},function(e,t,n){function r(e,t,n,r,y,g){var _=c(e),b=c(t),w=d,E=d;_||(w=s(e),w=w==p?v:w),b||(E=s(t),E=E==p?v:E);var x=w==v&&!l(e),k=E==v&&!l(t),O=w==E;if(O&&!x)return g||(g=new o),_||f(e)?i(e,t,n,r,y,g):a(e,t,w,n,r,y,g);if(!(y&h)){var j=x&&m.call(e,"__wrapped__"),S=k&&m.call(t,"__wrapped__");if(j||S){var T=j?e.value():e,I=S?t.value():t;return g||(g=new o),n(T,I,r,y,g)}}return O?(g||(g=new o),u(e,t,n,r,y,g)):!1}var o=n(334),i=n(372),a=n(374),u=n(378),s=n(379),c=n(326),l=n(351),f=n(384),h=2,p="[object Arguments]",d="[object Array]",v="[object Object]",y=Object.prototype,m=y.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r,u,s){var c=-1,l=u&a,f=u&i,h=e.length,p=t.length;if(h!=p&&!(l&&p>h))return!1;var d=s.get(e);if(d)return d==t;var v=!0;for(s.set(e,t);++c<h;){var y=e[c],m=t[c];if(r)var g=l?r(m,y,c,t,e,s):r(y,m,c,e,t,s);if(void 0!==g){if(g)continue;v=!1;break}if(f){if(!o(t,function(e){return y===e||n(y,e,r,u,s)})){v=!1;break}}else if(y!==m&&!n(y,m,r,u,s)){v=!1;break}}return s["delete"](e),v}var o=n(373),i=1,a=2;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){function r(e,t,n,r,o,E,k){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!r(new i(e),new i(t)));case f:case h:return+e==+t;case p:return e.name==t.name&&e.message==t.message;case v:return e!=+e?t!=+t:e==+t;case y:case g:return e==t+"";case d:var O=u;case m:var j=E&l;if(O||(O=s),e.size!=t.size&&!j)return!1;var S=k.get(e);return S?S==t:(E|=c,k.set(e,t),a(O(e),O(t),r,o,E,k));case _:if(x)return x.call(e)==x.call(t)}return!1}var o=n(354),i=n(375),a=n(372),u=n(376),s=n(377),c=1,l=2,f="[object Boolean]",h="[object Date]",p="[object Error]",d="[object Map]",v="[object Number]",y="[object RegExp]",m="[object Set]",g="[object String]",_="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",E=o?o.prototype:void 0,x=E?E.valueOf:void 0;e.exports=r},function(e,t,n){var r=n(355),o=r.Uint8Array;e.exports=o},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function r(e,t,n,r,u,s){var c=u&a,l=i(e),f=l.length,h=i(t),p=h.length;if(f!=p&&!c)return!1;for(var d=f;d--;){var v=l[d];if(!(c?v in t:o(t,v)))return!1}var y=s.get(e);if(y)return y==t;var m=!0;s.set(e,t);for(var g=c;++d<f;){v=l[d];var _=e[v],b=t[v];if(r)var w=c?r(b,_,v,t,e,s):r(_,b,v,e,t,s);if(!(void 0===w?_===b||n(_,b,r,u,s):w)){m=!1;break}g||(g="constructor"==v)}if(m&&!g){var E=e.constructor,x=t.constructor;E!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof E&&E instanceof E&&"function"==typeof x&&x instanceof x)&&(m=!1)}return s["delete"](e),m}var o=n(314),i=n(313),a=2;e.exports=r},function(e,t,n){function r(e){return m.call(e)}var o=n(380),i=n(359),a=n(381),u=n(382),s=n(383),c=n(352),l="[object Map]",f="[object Object]",h="[object Promise]",p="[object Set]",d="[object WeakMap]",v="[object DataView]",y=Object.prototype,m=y.toString,g=c(o),_=c(i),b=c(a),w=c(u),E=c(s);(o&&r(new o(new ArrayBuffer(1)))!=v||i&&r(new i)!=l||a&&r(a.resolve())!=h||u&&r(new u)!=p||s&&r(new s)!=d)&&(r=function(e){var t=m.call(e),n=t==f?e.constructor:null,r=c(n);if(r)switch(r){case g:return v;case _:return l;case b:return h;case w:return p;case E:return d}return t}),e.exports=r},function(e,t,n){var r=n(349),o=n(355),i=r(o,"DataView");e.exports=i},function(e,t,n){var r=n(349),o=n(355),i=r(o,"Promise");e.exports=i},function(e,t,n){var r=n(349),o=n(355),i=r(o,"Set");e.exports=i},function(e,t,n){var r=n(349),o=n(355),i=r(o,"WeakMap");e.exports=i},function(e,t,n){function r(e){return i(e)&&o(e.length)&&!!A[C.call(e)]}var o=n(324),i=n(325),a="[object Arguments]",u="[object Array]",s="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Function]",h="[object Map]",p="[object Number]",d="[object Object]",v="[object RegExp]",y="[object Set]",m="[object String]",g="[object WeakMap]",_="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",x="[object Int8Array]",k="[object Int16Array]",O="[object Int32Array]",j="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]",A={};A[w]=A[E]=A[x]=A[k]=A[O]=A[j]=A[S]=A[T]=A[I]=!0,A[a]=A[u]=A[_]=A[s]=A[b]=A[c]=A[l]=A[f]=A[h]=A[p]=A[d]=A[v]=A[y]=A[m]=A[g]=!1;var P=Object.prototype,C=P.toString;e.exports=r},function(e,t,n){function r(e){for(var t=i(e),n=t.length;n--;)t[n][2]=o(t[n][1]);return t}var o=n(386),i=n(387);e.exports=r},function(e,t,n){function r(e){return e===e&&!o(e)}var o=n(303);e.exports=r},function(e,t,n){function r(e){return o(e,i(e))}var o=n(388),i=n(313);e.exports=r},function(e,t,n){function r(e,t){return o(t,function(t){return[t,e[t]]})}var o=n(389);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}e.exports=n},function(e,t){function n(e,t){return function(n){return null==n?!1:n[e]===t&&(void 0!==t||e in Object(n))}}e.exports=n},function(e,t,n){function r(e,t){return u(e)&&s(t)?c(e,t):function(n){var r=i(n,e);return void 0===r&&r===t?a(n,e):o(t,r,void 0,l|f)}}var o=n(370),i=n(392),a=n(398),u=n(397),s=n(386),c=n(390),l=1,f=2;e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?void 0:o(e,t);return void 0===r?n:r}var o=n(393);e.exports=r},function(e,t,n){function r(e,t){t=i(t,e)?[t]:o(t);for(var n=0,r=t.length;null!=e&&r>n;)e=e[t[n++]];return n&&n==r?e:void 0}var o=n(394),i=n(397);e.exports=r},function(e,t,n){function r(e){return o(e)?e:i(e)}var o=n(326),i=n(395);e.exports=r},function(e,t,n){var r=n(396),o=n(353),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g,u=r(function(e){var t=[];return o(e).replace(i,function(e,n,r,o){t.push(r?o.replace(a,"$1"):n||e)}),t});e.exports=u},function(e,t,n){function r(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(i);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new(r.Cache||o),n}var o=n(345),i="Expected a function";r.Cache=o,e.exports=r},function(e,t,n){function r(e,t){var n=typeof e;return"number"==n||"symbol"==n?!0:!o(e)&&(i(e)||u.test(e)||!a.test(e)||null!=t&&e in Object(t))}var o=n(326),i=n(358),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/;e.exports=r},function(e,t,n){function r(e,t){return null!=e&&i(e,t,o)}var o=n(399),i=n(400);e.exports=r},function(e,t){function n(e,t){return t in Object(e)}e.exports=n},function(e,t,n){function r(e,t,n){t=s(t,e)?[t]:o(t);for(var r,f=-1,h=t.length;++f<h;){var p=t[f];if(!(r=null!=e&&n(e,p)))break;e=e[p]}if(r)return r;var h=e?e.length:0;return!!h&&c(h)&&u(p,h)&&(a(e)||l(e)||i(e))}var o=n(394),i=n(319),a=n(326),u=n(328),s=n(397),c=n(324),l=n(327);e.exports=r},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function r(e){return a(e)?o(e):i(e)}var o=n(323),i=n(403),a=n(397);e.exports=r},function(e,t,n){function r(e){return function(t){return o(t,e)}}var o=n(393);e.exports=r},function(e,t){!function(){"use strict";function t(e){return"function"==typeof e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e){return e instanceof Date?e.getTime():e instanceof Array?e.map(r):e}function o(e,t){return e.get?e.get(t):e[t]}function i(e){return function(t,r){if(!n(r)||!r.length)return e(t,r);for(var i=0,a=r.length;a>i;i++)if(e(t,o(r,i)))return!0;return!1}}function a(e){return function(t,r){if(!n(r)||!r.length)return e(t,r);for(var i=0,a=r.length;a>i;i++)if(!e(t,o(r,i)))return!1;return!0}}function u(e,t){return e.v(e.a,t)}function s(e,t){for(var n=0;n<e.length;n++)if(u(t,o(e,n)))return n;return-1}function c(e,t){return{a:e,v:t}}function l(e,t){var n=[];return f(t,e.k,0,n),1===n.length?u(e.nv,n[0]):!!~s(n,e.nv)}function f(e,t,r,i){if(r===t.length||void 0==e)return void i.push(e);var a=o(t,r);if(n(e)&&isNaN(Number(a)))for(var u=0,s=e.length;s>u;u++)f(o(e,u),t,r,i);else f(o(e,a),t,r+1,i)}function h(e,t){return{a:{k:e,nv:t},v:l}}function p(e){e=r(e),(!e||"Object"!==e.constructor.toString()&&"functionObject(){[nativecode]}"!==e.constructor.toString().replace(/\n/g,"").replace(/ /g,""))&&(e={$eq:e});var t=[];for(var n in e){var o=e[n];if("$options"!==n)if(y[n])m[n]&&(o=m[n](o,e)),t.push(c(r(o),y[n]));else{if(36===n.charCodeAt(0))throw new Error("Unknown operation "+n);t.push(h(n.split("."),p(o)))}}return 1===t.length?t[0]:c(t,y.$and)}function d(e,t){var n=p(e);return t&&(n={a:n,v:function(e,n){return u(e,t(n))}}),n}function v(e,n,r){function o(e){return u(i,e)}t(n)&&(r=n,n=void 0);var i=d(e,r);return n?n.filter(o):o}var y={$eq:i(function(e,t){return e(t)}),$ne:a(function(e,t){return!e(t)}),$or:function(e,t){for(var n=0,r=e.length;r>n;n++)if(u(o(e,n),t))return!0;return!1},$gt:i(function(e,t){return v.compare(r(t),e)>0}),$gte:i(function(e,t){return v.compare(r(t),e)>=0}),$lt:i(function(e,t){return v.compare(r(t),e)<0}),$lte:i(function(e,t){return v.compare(r(t),e)<=0}),$mod:i(function(e,t){return t%e[0]==e[1]}),$in:function(e,t){if(!(t instanceof Array))return!!~e.indexOf(r(t));for(var n=t.length;n--;)if(~e.indexOf(r(o(t,n))))return!0;return!1},$nin:function(e,t){return!y.$in(e,t)},$not:function(e,t){return!u(e,t)},$type:function(e,t){return void 0!=t?t instanceof e||t.constructor==e:!1},$all:function(e,t){t||(t=[]);for(var n=e.length;n--;)if(!~r(t).indexOf(o(e,n)))return!1;return!0},$size:function(e,t){return t?e===t.length:!1},$nor:function(e,t){for(var n=0,r=e.length;r>n;n++)if(u(o(e,n),t))return!1;return!0},$and:function(e,t){for(var n=0,r=e.length;r>n;n++)if(!u(o(e,n),t))return!1;return!0},$regex:i(function(e,t){return"string"==typeof t&&e.test(t)}),$where:function(e,t){return e.call(t,t)},$elemMatch:function(e,t){return n(t)?!!~s(t,e):u(e,t)},$exists:function(e,t){return void 0!=t===e}},m={$eq:function(e){return e instanceof RegExp?function(t){return"string"==typeof t&&e.test(t)}:e instanceof Function?e:n(e)&&!e.length?function(e){return n(e)&&!e.length}:null===e?function(e){return null==e}:function(t){return 0===v.compare(r(t),e)}},$ne:function(e){return m.$eq(e)},$and:function(e){return e.map(p)},$or:function(e){return e.map(p)},$nor:function(e){return e.map(p)},$not:function(e){return p(e)},$regex:function(e,t){return new RegExp(e,t.$options)},$where:function(e){return"string"==typeof e?new Function("obj","return "+e):e},$elemMatch:function(e){return p(e)},$exists:function(e){return!!e}};v.use=function(e){if(t(e))return e(v);for(var n in e)36===n.charCodeAt(0)&&(y[n]=e[n])},v.indexOf=function(e,t,n){return s(t,d(e,n))},v.compare=function(e,t){if(e===t)return 0;if(typeof e==typeof t){if(e>t)return 1;if(t>e)return-1}},"undefined"!=typeof e&&"undefined"!=typeof e.exports&&(e.exports=v),"undefined"!=typeof window&&(window.sift=v)}()},function(e,t,n){var r=n(406),o=n(407),i=n(409),a=n(321),u=n(329),s=n(313),c=Object.prototype,l=c.hasOwnProperty,f=c.propertyIsEnumerable,h=!f.call({valueOf:1},"valueOf"),p=i(function(e,t){if(h||u(t)||a(t))return void o(t,s(t),e);for(var n in t)l.call(t,n)&&r(e,n,t[n])});e.exports=p},function(e,t,n){function r(e,t,n){var r=e[t];a.call(e,t)&&o(r,n)&&(void 0!==n||t in e)||(e[t]=n)}var o=n(339),i=Object.prototype,a=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n){return o(e,t,n)}var o=n(408);e.exports=r},function(e,t,n){function r(e,t,n,r){n||(n={});for(var i=-1,a=t.length;++i<a;){var u=t[i],s=r?r(n[u],e[u],u,n,e):e[u];o(n,u,s)}return n}var o=n(406);e.exports=r},function(e,t,n){function r(e){return i(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(a="function"==typeof a?(i--,a):void 0,u&&o(n[0],n[1],u)&&(a=3>i?void 0:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}var o=n(410),i=n(411);e.exports=r},function(e,t,n){function r(e,t,n){if(!u(n))return!1;var r=typeof t;return("number"==r?i(n)&&a(t,n.length):"string"==r&&t in n)?o(n[t],e):!1}var o=n(339),i=n(321),a=n(328),u=n(303);e.exports=r},function(e,t,n){function r(e,t){if("function"!=typeof e)throw new TypeError(a);return t=u(void 0===t?e.length-1:i(t),0),function(){for(var n=arguments,r=-1,i=u(n.length-t,0),a=Array(i);++r<i;)a[r]=n[t+r];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var s=Array(t+1);for(r=-1;++r<t;)s[r]=n[r];return s[t]=a,o(e,this,s)}}var o=n(412),i=n(413),a="Expected a function",u=Math.max;e.exports=r},function(e,t){function n(e,t,n){var r=n.length;switch(r){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){function r(e){if(!e)return 0===e?e:0;if(e=o(e),e===i||e===-i){var t=0>e?-1:1;return t*a}var n=e%1;return e===e?n?e-n:e:0}var o=n(414),i=1/0,a=1.7976931348623157e308;e.exports=r},function(e,t,n){function r(e){if("number"==typeof e)return e;if(a(e))return u;if(i(e)){var t=o(e.valueOf)?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=l.test(e);return n||f.test(e)?h(e.slice(2),n?2:8):c.test(e)?u:+e}var o=n(302),i=n(303),a=n(358),u=NaN,s=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,f=/^0o[0-7]+$/i,h=parseInt;e.exports=r},function(e,t,n){function r(e){return"number"==typeof e||o(e)&&u.call(e)==i}var o=n(325),i="[object Number]",a=Object.prototype,u=a.toString;e.exports=r},function(e,t,n){function r(e){return o(e)&&u.call(e)==i}var o=n(303),i="[object RegExp]",a=Object.prototype,u=a.toString;e.exports=r},function(e,t,n){function r(e,t,n){t=a(t,e)?[t]:o(t);var r=-1,u=t.length;for(u||(e=void 0,u=1);++r<u;){var s=null==e?void 0:e[t[r]];void 0===s&&(r=u,s=n),e=i(s)?s.call(e):s}return e}var o=n(394),i=n(302),a=n(397);e.exports=r},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(298),u=n(419),s=n(529),c=r(s),l=n(507),f=r(l),h=n(405),p=r(h),d=n(327),v=r(d),y=e.env.KINVEY_USER_COLLECTION_NAME||"kinvey_user",m=e.env.KINVEY_SOCIAL_IDENTITY_COLLECTION_NAME||"kinvey_socialIdentity",g=e.env.KINVEY_PUSH_COLLECTION_NAME||"kinvey_push",_=null;t.Client=function(){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(o(this,t),n=(0,p["default"])({protocol:e.env.KINVEY_API_PROTOCOL||"https:",host:e.env.KINVEY_API_HOST||"baas.kinvey.com"},n),n.hostname&&(0,v["default"])(n.hostname)){var r=f["default"].parse(n.hostname);n.protocol=r.protocol,n.host=r.host}this.protocol=n.protocol,this.host=n.host,this.appKey=n.appKey||n.appId,this.appSecret=n.appSecret,this.masterSecret=n.masterSecret,this.encryptionKey=n.encryptionKey,this.syncManager=new u.SyncManager,this.syncManager.client=this}return i(t,[{key:"toJSON",value:function(){var e={protocol:this.protocol,host:this.host,appKey:this.appKey,appSecret:this.appSecret,masterSecret:this.masterSecret,encryptionKey:this.encryptionKey};return e}},{key:"baseUrl",get:function(){return f["default"].format({protocol:this.protocol,host:this.host})}},{key:"user",get:function(){return c["default"].get(""+this.appKey+y)},set:function(e){if(e)try{return c["default"].set(""+this.appKey+y,e)}catch(t){return!1}return c["default"].remove(""+this.appKey+y)}},{key:"socialIdentity",get:function(){return c["default"].get(""+this.appKey+m)},set:function(e){if(e)try{return c["default"].set(""+this.appKey+m,e)}catch(t){return!1}return c["default"].remove(""+this.appKey+m)}},{key:"push",get:function(){return c["default"].get(""+this.appKey+g)},set:function(e){if(e)try{return c["default"].set(""+this.appKey+g,e)}catch(t){return!1}return c["default"].remove(""+this.appKey+g)}}],[{key:"init",value:function(e){var n=new t(e);return _=n,n}},{key:"sharedInstance",value:function(){if(!_)throw new a.KinveyError("You have not initialized the library. Please call Kinvey.init() to initialize the library.");return _}}]),t}()}).call(t,n(289))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SyncManager=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(294),u=r(a),s=n(420),c=n(298),l=n(421),f=n(423),h=n(517),p=n(507),d=r(p),v=n(490),y=r(v),m=n(494),g=r(m),_=n(307),b=r(_),w=n(326),E=r(w),x=n(518),k=r(x),O=e.env.KINVEY_DATASTORE_NAMESPACE||"appdata",j=e.env.KINVEY_SYNC_COLLECTION_NAME||"kinvey_sync",S=e.env.KINVEY_ID_ATTRIBUTE||"_id",T=e.env.KINVEY_KMD_ATTRIBUTE||"_kmd";t.SyncManager=function(){function e(){o(this,e)}return i(e,[{key:"count",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=new f.LocalRequest({method:s.HttpMethod.GET,url:d["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:t.properties,query:e,timeout:t.timeout,client:this.client}),r=n.execute().then(function(e){return e.data}).then(function(e){var t=(0,g["default"])(e,function(e,t){return e+t.size},0);return t});return r}},{key:"notify",value:function(e,t){var n=this,r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!e)return u["default"].reject(new c.KinveyError("Unable to add entities to the sync table for a store with no name."));if(!t)return u["default"].resolve(null);var o=new f.LocalRequest({method:s.HttpMethod.GET,url:d["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/"+e}),properties:r.properties,timeout:r.timeout,client:this.client}),i=o.execute()["catch"](function(t){if(t instanceof c.NotFoundError)return{_id:e,entities:{},size:0};throw t}).then(function(e){return e.data}).then(function(o){o||(o={_id:e,entities:{},size:0}),(0,E["default"])(t)||(t=[t]),(0,b["default"])(t,function(e){var t=e[S];t&&(o.entities.hasOwnProperty(t)||(o.size=o.size+1),o.entities[t]={})});var i=new f.LocalRequest({method:s.HttpMethod.PUT,url:d["default"].format({protocol:n.client.protocol,host:n.client.host,pathname:n._pathname}),properties:r.properties,timeout:r.timeout,data:o,client:n.client});return i.execute()}).then(function(){return null});return i}},{key:"execute",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=new f.LocalRequest({method:s.HttpMethod.GET,url:d["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:n.properties,query:e,timeout:n.timeout,client:this.client}),o=r.execute().then(function(e){return e.data}).then(function(e){var r=new u["default"](function(r,o){(0,k["default"])(e,function(e,r){var o=e._id,i=e.entities,a=e.size,p=Object.keys(i),v={collection:o,success:[],error:[]},m=100,g=0,_=function w(){var r=p.slice(g,g+m);g+=m;var _=[],E=[],x=(0,y["default"])(r,function(e){var r=new f.LocalRequest({method:s.HttpMethod.GET,url:d["default"].format({protocol:t.client.protocol,host:t.client.host,pathname:"/"+O+"/"+t.client.appKey+"/"+o+"/"+e}),properties:n.properties,timeout:n.timeout,client:t.client}),i=r.execute().then(function(e){return e.data}).then(function(e){return _.push(e),e})["catch"](function(t){if(t instanceof c.NotFoundError)return E.push(e),null;throw t});return i}),k=u["default"].all(x).then(function(){var e=(0,y["default"])(_,function(e){var r=new l.Metadata(e),u=e[S];delete e[T];var p=new h.NetworkRequest({method:s.HttpMethod.PUT,authType:s.AuthType.Session,url:d["default"].format({protocol:t.client.protocol,host:t.client.host,pathname:"/"+O+"/"+t.client.appKey+"/"+o+"/"+u}),properties:n.properties,timeout:n.timeout,data:e,client:t.client});return r.isLocal()&&(delete e[S],p.method=s.HttpMethod.POST,p.url=d["default"].format({protocol:t.client.protocol,host:t.client.host,pathname:"/"+O+"/"+t.client.appKey+"/"+o}),p.data=e),p.execute().then(function(e){return e.data}).then(function(e){var r=new f.LocalRequest({method:s.HttpMethod.PUT,url:d["default"].format({protocol:t.client.protocol,host:t.client.host,pathname:"/"+O+"/"+t.client.appKey+"/"+o+"/"+e[S]}),properties:n.properties,timeout:n.timeout,data:e,client:t.client});return r.execute().then(function(e){return e.data})}).then(function(e){if(r.isLocal()){var i=new f.LocalRequest({method:s.HttpMethod.DELETE,url:d["default"].format({protocol:t.client.protocol,host:t.client.host,pathname:"/"+O+"/"+t.client.appKey+"/"+o+"/"+u}),properties:n.properties,timeout:n.timeout,client:t.client});return i.execute().then(function(){return e})}return e}).then(function(e){return a-=1,delete i[u],{_id:u,entity:e}})["catch"](function(e){return e instanceof c.InsufficientCredentialsError?(a-=1,delete i[u],{_id:u,error:e}):{_id:u,error:e}})}),r=(0,y["default"])(E,function(e){var r=new h.NetworkRequest({method:s.HttpMethod.DELETE,authType:s.AuthType.Session,url:d["default"].format({protocol:t.client.protocol,host:t.client.host,pathname:"/"+O+"/"+t.client.appKey+"/"+o+"/"+e}),properties:n.properties,timeout:n.timeout,client:t.client}),u=r.execute().then(function(){return a-=1,delete i[e],{_id:e}})["catch"](function(t){return t instanceof c.NotFoundError||t instanceof c.InsufficientCredentialsError?(a-=1,delete i[e],{_id:e,error:t}):{_id:e,error:t}});return u});return u["default"].all([u["default"].all(e),u["default"].all(r)])}).then(function(e){var t=e[0],n=e[1],r={collection:o,success:[],error:[]};return(0,b["default"])(t,function(e){e.error?r.error.push(e):r.success.push(e)}),(0,b["default"])(n,function(e){e.error?r.error.push(e):r.success.push(e)}),r}).then(function(e){return v.success=v.success.concat(e.success),v.error=v.error.concat(e.error),v}).then(function(e){return g<p.length?w():e}).then(function(r){e.size=a,e.entities=i;var o=new f.LocalRequest({method:s.HttpMethod.PUT,url:d["default"].format({protocol:t.client.protocol,host:t.client.host,pathname:t._pathname+"/"+e[S]}),properties:n.properties,timeout:n.timeout,data:e,client:t.client});return o.execute().then(function(){return r})});return k};_().then(function(e){r(null,e)})["catch"](function(e){r(e)})},function(e,t){return e?o(e):r(1===t.length?t[0]:t)})});return r});return o}},{key:"_pathname",get:function(){return"/"+O+"/"+this.client.appKey+"/"+j}}]),e}()}).call(t,n(289))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={AuthorizationCodeLoginPage:"AuthorizationCodeLoginPage",AuthorizationCodeAPI:"AuthorizationCodeAPI"};Object.freeze(n),t.AuthorizationGrant=n;var r={All:"All",App:"App",Basic:"Basic",Default:"Default",Master:"Master",None:"None",Session:"Session"};Object.freeze(r),t.AuthType=r;var o={Sync:"Sync",Cache:"Cache",Network:"Network",User:"User",File:"File"};Object.freeze(o),t.DataStoreType=o;var i={GET:"GET",POST:"POST",PATCH:"PATCH",PUT:"PUT",DELETE:"DELETE"};Object.freeze(i),t.HttpMethod=i;var a={Facebook:"facebook",Google:"google",LinkedIn:"linkedin"};Object.freeze(a),t.SocialIdentity=a;var u={Ok:200,Created:201,RedirectTemporarily:301,RedirectPermanetly:302,NotFound:404,ServerError:500};Object.freeze(u),t.StatusCode=u},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(298),u=n(422),s=r(u),c=e.env.KINVEY_KMD_ATTRIBUTE||"_kmd";t.Metadata=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(o(this,e),!(0,s["default"])(t))throw new a.KinveyError("entity argument must be an object");this.kmd=t[c]||{},this.entity=t}return i(e,[{key:"isLocal",value:function(){return!!this.kmd.local}},{key:"toJSON",value:function(){return this.kmd}},{key:"createdAt",get:function(){return this.kmd.ect?Date.parse(this.kmd.ect):void 0}},{key:"emailVerification",get:function(){return this.kmd.emailVerification.status}},{key:"lastModified",get:function(){return this.kmd.lmt?Date.parse(this.kmd.lmt):void 0}},{key:"lmt",get:function(){return this.lastModified}},{key:"authtoken",get:function(){return this.kmd.authtoken},set:function(e){this.kmd.authtoken=e}}]),e}()}).call(t,n(289))},function(e,t,n){function r(e){if(!a(e)||h.call(e)!=u||i(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}var o=n(315),i=n(351),a=n(325),u="[object Object]",s=Object.prototype,c=Function.prototype.toString,l=s.hasOwnProperty,f=c.call(Object),h=s.toString;e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LocalRequest=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function h(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},s=n(424),c=n(433),l=n(298),f=n(516);t.LocalRequest=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.rack=c.CacheRack.sharedInstance(),n}return i(t,e),a(t,[{key:"execute",value:function(){var e=this,n=u(Object.getPrototypeOf(t.prototype),"execute",this).call(this).then(function(){return e.rack.execute(e)}).then(function(e){if(!e)throw new l.NoResponseError;return e instanceof f.Response?e:new f.Response({statusCode:e.statusCode,headers:e.headers,data:e.data})}).then(function(e){if(!e.isSuccess())throw e.error;return e});return n}},{key:"cancel",value:function(){var e=this,n=u(Object.getPrototypeOf(t.prototype),"cancel",this).call(this).then(function(){return e.rack.cancel()});return n}}]),t}(s.KinveyRequest)},function(e,t,n){(function(e,r,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.KinveyRequest=t.Request=void 0;var c=function H(e,t,n,r){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var i=Object.getPrototypeOf(e);null!==i&&H(i,t,n,r)}else if("value"in o&&o.writable)o.value=n;else{var a=o.set;void 0!==a&&a.call(r,n)}return n},l=function V(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:V(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(294),p=i(h),d=n(420),v=n(429),y=n(432),m=n(433),g=n(418),_=n(499),b=n(501),w=i(b),E=n(503),x=i(E),k=n(507),O=i(k),j=n(513),S=i(j),T=n(405),I=i(T),A=n(417),P=i(A),C=n(307),R=i(C),N=n(327),D=i(N),M=n(422),F=i(M),L=n(515),B=i(L),q=e.env.KINVEY_KMD_ATTRIBUTE||"_kmd",U={all:function(e){try{return U.session(e)}catch(t){return U.basic(e)}},app:function(e){if(!e.appKey||!e.appSecret)throw new Error("Missing client credentials");return{scheme:"Basic",username:e.appKey,password:e.appSecret}},basic:function(e){try{return U.master(e)}catch(t){return U.app(e)}},master:function(e){if(!e.appKey||!e.masterSecret)throw new Error("Missing client credentials");return{scheme:"Basic",username:e.appKey,password:e.masterSecret}},none:function(){return null},session:function(e){var t=e.user;if(!t)throw new Error("There is not an active user.");return{scheme:"Kinvey",credentials:t[q].authtoken}}},K=t.Request=function(){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];s(this,t),n=(0,I["default"])({method:d.HttpMethod.GET,headers:{},url:"",data:null,timeout:e.env.KINVEY_DEFAULT_TIMEOUT||1e4,followRedirect:!0},n),this.method=n.method,this.url=n.url,this.data=n.data||n.body,this.timeout=n.timeout,this.followRedirect=n.followRedirect,this.executing=!1;var r=n.headers&&(0,F["default"])(n.headers)?n.headers:{};r.Accept&&r.accept||(r.Accept="application/json; charset=utf-8"),this.addHeaders(r)}return f(t,[{key:"getHeader",value:function(e){if(e){(0,D["default"])(e)||(e=String(e));for(var t=this.headers||{},n=Object.keys(t),r=0,o=n.length;o>r;r++){var i=n[r];if(i.toLowerCase()===e.toLowerCase())return t[i]}}}},{key:"setHeader",value:function(e,t){if(!e||!t)throw new Error("A name and value must be provided to set a header.");(0,D["default"])(e)||(e=String(e));var n=this.headers||{};(0,D["default"])(t)?n[e]=t:n[e]=JSON.stringify(t),this.headers=n}},{key:"addHeader",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.setHeader(e.name,e.value)}},{key:"addHeaders",value:function(e){var t=this;if(!(0,F["default"])(e))throw new Error("Headers argument must be an object.");var n=Object.keys(e);(0,R["default"])(n,function(n){var r=e[n];t.setHeader(n,r)})}},{key:"removeHeader",value:function(e){if(e){(0,D["default"])(e)||(e=String(e));var t=this.headers||{};delete t[e],this.headers=t}}},{key:"clearHeaders",value:function(){this.headers={}}},{key:"isExecuting",value:function(){return this.executing===!0}},{key:"execute",value:function(){var e=this;return this.executing?p["default"].reject(new Error("Unable to execute the request. The request is already executing.")):(this.executing=p["default"].resolve().then(function(t){
return e.executing=!1,t})["catch"](function(t){throw e.executing=!1,t}),this.executing)}},{key:"toJSON",value:function(){var e={method:this.method,headers:this.headers,url:this.url,data:this.data,followRedirect:this.followRedirect};return e}},{key:"method",get:function(){return this._method},set:function(e){switch((0,D["default"])(e)||(e=String(e)),e=e.toUpperCase()){case d.HttpMethod.GET:case d.HttpMethod.POST:case d.HttpMethod.PATCH:case d.HttpMethod.PUT:case d.HttpMethod.DELETE:this._method=e;break;default:throw new Error("Invalid Http Method. Only GET, POST, PATCH, PUT, and DELETE are allowed.")}}},{key:"url",get:function(){return(0,S["default"])(this._url,x["default"].stringify({_:Math.random().toString(36).substr(2)}))},set:function(e){this._url=e}},{key:"body",get:function(){return this.data},set:function(e){this.data=e}},{key:"data",get:function(){return this._data},set:function(e){if(e){var t=this.getHeader("Content-Type");t||this.setHeader("Content-Type","application/json; charset=utf-8")}else this.removeHeader("Content-Type");this._data=e}}]),t}();t.KinveyRequest=function(t){function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];s(this,n);var r=a(this,Object.getPrototypeOf(n).call(this,t));t=(0,I["default"])({authType:d.AuthType.None,properties:null,query:null,client:g.Client.sharedInstance()},t),r.rack=new m.KinveyRack,r.authType=t.authType,r.properties=t.properties,r.query=(0,P["default"])(t.query,"toJSON",t.query),r.client=t.client;var o={};return o["X-Kinvey-Api-Version"]=e.env.KINVEY_API_VERSION||3,o["X-Kinvey-Device-Information"]=JSON.stringify(v.Device.toJSON()),t.contentType&&(o["X-Kinvey-Content-Type"]=t.contentType),t.skipBL===!0&&(o["X-Kinvey-Skip-Business-Logic"]=!0),t.trace===!0&&(o["X-Kinvey-Include-Headers-In-Response"]="X-Kinvey-Request-Id",o["X-Kinvey-ResponseWrapper"]=!0),r.addHeaders(o),r}return u(n,t),f(n,[{key:"execute",value:function(){var e=this.authorizationHeader;e&&this.addHeader(e);var t=l(Object.getPrototypeOf(n.prototype),"execute",this).call(this);return t}},{key:"cancel",value:function(){var e=l(Object.getPrototypeOf(n.prototype),"cancel",this).call(this);return e}},{key:"toJSON",value:function(){var e=l(Object.getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.query=this.query,e}},{key:"properties",set:function(t){if(t){t instanceof y.RequestProperties||(t=new y.RequestProperties((0,P["default"])(t,"toJSON",t)));var n=t.appVersion;n?this.setHeader("X-Kinvey-Client-App-Version",n):this.removeHeader("X-Kinvey-Client-App-Version");var r=(0,P["default"])(t,"toJSON",{});delete r.appVersion;var o=JSON.stringify(r),i=(0,_.byteCount)(o),a=e.env.KINVEY_MAX_HEADER_BYTES||2e3;if(i>=a)throw new Error("The custom properties are "+i+" bytes."+("It must be less then "+a+" bytes."),"Please remove some custom properties.");this.setHeader("X-Kinvey-Custom-Request-Properties",o)}}},{key:"url",get:function(){var e=l(Object.getPrototypeOf(n.prototype),"url",this),t={};this.query&&(t.query=this.query.filter,(0,B["default"])(this.query.fields)||(t.fields=this.query.fields.join(",")),this.query.limit&&(t.limit=this.query.limit),this.query.skip>0&&(t.skip=this.query.skip),(0,B["default"])(this.query.sort)||(t.sort=this.query.sort));var r=Object.keys(t);return(0,R["default"])(r,function(e){t[e]=(0,D["default"])(t[e])?t[e]:JSON.stringify(t[e])}),(0,B["default"])(t)?e:(0,S["default"])(e,x["default"].stringify(t))},set:function(e){c(Object.getPrototypeOf(n.prototype),"url",e,this);var t=r.escape(O["default"].parse(e).pathname),o=new w["default"]("(/:namespace)(/)(:appKey)(/)(:collectionName)(/)(:entityId)(/)"),i=o.match(t)||{},a=i.appKey,u=i.collectionName,s=i.entityId;this.appKey=a?r.unescape(a):a,this.collectionName=u?r.unescape(u):u,this.entityId=s?r.unescape(s):s}},{key:"authorizationHeader",get:function(){var e=void 0;switch(this.authType){case d.AuthType.All:e=U.all(this.client);break;case d.AuthType.App:e=U.app(this.client);break;case d.AuthType.Basic:e=U.basic(this.client);break;case d.AuthType.Master:e=U.master(this.client);break;case d.AuthType.None:e=U.none(this.client);break;case d.AuthType.Session:e=U.session(this.client);break;default:try{e=U.session(this.client)}catch(t){try{e=U.master(this.client)}catch(n){throw t}}}if(e){var r=e.credentials;return e.username&&(r=new o(e.username+":"+e.password).toString("base64")),{name:"Authorization",value:e.scheme+" "+r}}return null}}]),n}(K)}).call(t,n(289),function(){return this}(),n(425).Buffer)},function(e,t,n){(function(e,r){"use strict";function o(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function i(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(t){return this instanceof e?(e.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?a(this,t):"string"==typeof t?u(this,t,arguments.length>1?arguments[1]:"utf8"):s(this,t)):arguments.length>1?new e(t,arguments[1]):new e(t)}function a(t,n){if(t=v(t,0>n?0:0|y(n)),!e.TYPED_ARRAY_SUPPORT)for(var r=0;n>r;r++)t[r]=0;return t}function u(e,t,n){"string"==typeof n&&""!==n||(n="utf8");var r=0|g(t,n);return e=v(e,r),e.write(t,n),e}function s(t,n){if(e.isBuffer(n))return c(t,n);if(W(n))return l(t,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return f(t,n);if(n instanceof ArrayBuffer)return h(t,n)}return n.length?p(t,n):d(t,n)}function c(e,t){var n=0|y(t.length);return e=v(e,n),t.copy(e,0,0,n),e}function l(e,t){var n=0|y(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function f(e,t){var n=0|y(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function h(t,n){return e.TYPED_ARRAY_SUPPORT?(n.byteLength,t=e._augment(new Uint8Array(n))):t=f(t,new Uint8Array(n)),t}function p(e,t){var n=0|y(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function d(e,t){var n,r=0;"Buffer"===t.type&&W(t.data)&&(n=t.data,r=0|y(n.length)),e=v(e,r);for(var o=0;r>o;o+=1)e[o]=255&n[o];return e}function v(t,n){e.TYPED_ARRAY_SUPPORT?(t=e._augment(new Uint8Array(n)),t.__proto__=e.prototype):(t.length=n,t._isBuffer=!0);var r=0!==n&&n<=e.poolSize>>>1;return r&&(t.parent=Q),t}function y(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function m(t,n){if(!(this instanceof m))return new m(t,n);var r=new e(t,n);return delete r.parent,r}function g(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function _(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return I(this,t,n);case"binary":return A(this,t,n);case"base64":return j(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=t.length;if(i%2!==0)throw new Error("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;r>a;a++){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))throw new Error("Invalid hex string");e[n+a]=u}return a}function w(e,t,n,r){return G(H(t,e.length-n),e,n,r)}function E(e,t,n,r){return G(V(t),e,n,r)}function x(e,t,n,r){return E(e,t,n,r)}function k(e,t,n,r){return G(z(t),e,n,r)}function O(e,t,n,r){return G($(t,e.length-n),e,n,r)}function j(e,t,n){return 0===t&&n===e.length?Y.fromByteArray(e):Y.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;n>o;){var i=e[o],a=null,u=i>239?4:i>223?3:i>191?2:1;if(n>=o+u){var s,c,l,f;switch(u){case 1:128>i&&(a=i);break;case 2:s=e[o+1],128===(192&s)&&(f=(31&i)<<6|63&s,f>127&&(a=f));break;case 3:s=e[o+1],c=e[o+2],128===(192&s)&&128===(192&c)&&(f=(15&i)<<12|(63&s)<<6|63&c,f>2047&&(55296>f||f>57343)&&(a=f));break;case 4:s=e[o+1],c=e[o+2],l=e[o+3],128===(192&s)&&128===(192&c)&&128===(192&l)&&(f=(15&i)<<18|(63&s)<<12|(63&c)<<6|63&l,f>65535&&1114112>f&&(a=f))}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=u}return T(r)}function T(e){var t=e.length;if(X>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=X));return n}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;n>o;o++)r+=String.fromCharCode(127&e[o]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;n>o;o++)r+=String.fromCharCode(e[o]);return r}function P(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var o="",i=t;n>i;i++)o+=K(e[i]);return o}function C(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function R(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,n,r,o,i,a){if(!e.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(n>i||a>n)throw new RangeError("value is out of bounds");if(r+o>t.length)throw new RangeError("index out of range")}function D(e,t,n,r){0>t&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);i>o;o++)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function M(e,t,n,r){0>t&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);i>o;o++)e[n+o]=t>>>8*(r?o:3-o)&255}function F(e,t,n,r,o,i){if(t>o||i>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function L(e,t,n,r,o){return o||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,o){return o||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,r,52,8),n+8}function q(e){if(e=U(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function U(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function K(e){return 16>e?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],a=0;r>a;a++){if(n=e.charCodeAt(a),n>55295&&57344>n){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(56320>n){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,128>n){if((t-=1)<0)break;i.push(n)}else if(2048>n){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function V(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function $(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);a++)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function z(e){return Y.toByteArray(q(e))}function G(e,t,n,r){for(var o=0;r>o&&!(o+n>=t.length||o>=e.length);o++)t[o+n]=e[o];return o}var Y=n(426),J=n(427),W=n(428);t.Buffer=e,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,e.poolSize=8192;var Q={};e.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:o(),e.TYPED_ARRAY_SUPPORT?(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array):(e.prototype.length=void 0,e.prototype.parent=void 0),e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,o=n.length,i=0,a=Math.min(r,o);a>i&&t[i]===n[i];)++i;return i!==a&&(r=t[i],o=n[i]),o>r?-1:r>o?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!W(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new e(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;r++)n+=t[r].length;var o=new e(n),i=0;for(r=0;r<t.length;r++){var a=t[r];a.copy(o,i),i+=a.length}return o},e.byteLength=g,e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):_.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:e.compare(this,t)},e.prototype.indexOf=function(t,n){function r(e,t,n){for(var r=-1,o=0;n+o<e.length;o++)if(e[n+o]===t[-1===r?0:o-r]){if(-1===r&&(r=o),o-r+1===t.length)return n+r}else r=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,n);if(e.isBuffer(t))return r(this,t,n);if("number"==typeof t)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,n):r(this,[t],n);throw new TypeError("val must be string, number or Buffer")},e.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},e.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var o=r;r=t,t=0|n,n=o}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return E(this,e,t,n);case"binary":return x(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;e.prototype.slice=function(t,n){var r=this.length;t=~~t,n=void 0===n?r:~~n,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),t>n&&(n=t);var o;if(e.TYPED_ARRAY_SUPPORT)o=e._augment(this.subarray(t,n));else{var i=n-t;o=new e(i,void 0);for(var a=0;i>a;a++)o[a]=this[a+t]}return o.length&&(o.parent=this.parent||this),o},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||R(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||R(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},e.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||R(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||R(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},e.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),J.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),J.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),J.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),J.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||N(this,e,t,n,Math.pow(2,8*n),0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||N(this,e,t,n,Math.pow(2,8*n),0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},e.prototype.writeUInt8=function(t,n,r){return t=+t,n=0|n,r||N(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,r){return t=+t,n=0|n,r||N(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):D(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,r){return t=+t,n=0|n,r||N(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):D(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,r){return t=+t,n=0|n,r||N(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):M(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,r){return t=+t,n=0|n,r||N(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):M(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var i=0,a=1,u=0>e?1:0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=(e/a>>0)-u&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var i=n-1,a=1,u=0>e?1:0;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=(e/a>>0)-u&255;return t+n},e.prototype.writeInt8=function(t,n,r){return t=+t,n=0|n,r||N(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,r){return t=+t,n=0|n,r||N(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):D(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,r){return t=+t,n=0|n,r||N(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):D(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,r){return t=+t,n=0|n,r||N(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):M(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,r){return t=+t,n=0|n,r||N(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):M(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},e.prototype.copy=function(t,n,r,o){if(r||(r=0),o||0===o||(o=this.length),n>=t.length&&(n=t.length),n||(n=0),o>0&&r>o&&(o=r),o===r)return 0;if(0===t.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-n<o-r&&(o=t.length-n+r);var i,a=o-r;if(this===t&&n>r&&o>n)for(i=a-1;i>=0;i--)t[i+n]=this[i+r];else if(1e3>a||!e.TYPED_ARRAY_SUPPORT)for(i=0;a>i;i++)t[i+n]=this[i+r];else t._set(this.subarray(r,r+a),n);return a},e.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var o=H(e.toString()),i=o.length;for(r=t;n>r;r++)this[r]=o[r%i]}return this}},e.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(e.TYPED_ARRAY_SUPPORT)return new e(this).buffer;for(var t=new Uint8Array(this.length),n=0,r=t.length;r>n;n+=1)t[n]=this[n];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=e.prototype;e._augment=function(t){return t.constructor=e,t._isBuffer=!0,t._set=t.set,t.get=Z.get,t.set=Z.set,t.write=Z.write,t.toString=Z.toString,t.toLocaleString=Z.toString,t.toJSON=Z.toJSON,t.equals=Z.equals,t.compare=Z.compare,t.indexOf=Z.indexOf,t.copy=Z.copy,t.slice=Z.slice,t.readUIntLE=Z.readUIntLE,t.readUIntBE=Z.readUIntBE,t.readUInt8=Z.readUInt8,t.readUInt16LE=Z.readUInt16LE,t.readUInt16BE=Z.readUInt16BE,t.readUInt32LE=Z.readUInt32LE,t.readUInt32BE=Z.readUInt32BE,t.readIntLE=Z.readIntLE,t.readIntBE=Z.readIntBE,t.readInt8=Z.readInt8,t.readInt16LE=Z.readInt16LE,t.readInt16BE=Z.readInt16BE,t.readInt32LE=Z.readInt32LE,t.readInt32BE=Z.readInt32BE,t.readFloatLE=Z.readFloatLE,t.readFloatBE=Z.readFloatBE,t.readDoubleLE=Z.readDoubleLE,t.readDoubleBE=Z.readDoubleBE,t.writeUInt8=Z.writeUInt8,t.writeUIntLE=Z.writeUIntLE,t.writeUIntBE=Z.writeUIntBE,t.writeUInt16LE=Z.writeUInt16LE,t.writeUInt16BE=Z.writeUInt16BE,t.writeUInt32LE=Z.writeUInt32LE,t.writeUInt32BE=Z.writeUInt32BE,t.writeIntLE=Z.writeIntLE,t.writeIntBE=Z.writeIntBE,t.writeInt8=Z.writeInt8,t.writeInt16LE=Z.writeInt16LE,t.writeInt16BE=Z.writeInt16BE,t.writeInt32LE=Z.writeInt32LE,t.writeInt32BE=Z.writeInt32BE,t.writeFloatLE=Z.writeFloatLE,t.writeFloatBE=Z.writeFloatBE,t.writeDoubleLE=Z.writeDoubleLE,t.writeDoubleBE=Z.writeDoubleBE,t.fill=Z.fill,t.inspect=Z.inspect,t.toArrayBuffer=Z.toArrayBuffer,t};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(425).Buffer,function(){return this}())},function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a||t===f?62:t===u||t===h?63:s>t?-1:s+10>t?t-s+26+26:l+26>t?t-l:c+26>t?t-c+26:void 0}function n(e){function n(e){c[f++]=e}var r,o,a,u,s,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;s="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,c=new i(3*e.length/4-s),a=s>0?e.length-4:e.length;var f=0;for(r=0,o=0;a>r;r+=4,o+=3)u=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&u)>>16),n((65280&u)>>8),n(255&u);return 2===s?(u=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&u)):1===s&&(u=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(u>>8&255),n(255&u)),c}function o(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var o,i,a,u=e.length%3,s="";for(o=0,a=e.length-u;a>o;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],s+=n(i);switch(u){case 1:i=e[e.length-1],s+=t(i>>2),s+=t(i<<4&63),s+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],s+=t(i>>10),s+=t(i>>4&63),s+=t(i<<2&63),s+="="}return s}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),u="/".charCodeAt(0),s="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),f="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=o}(t)},function(e,t){t.read=function(e,t,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?o-1:0,h=n?-1:1,p=e[t+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=u;l>0;i=256*i+e[t+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),i-=c}return(p?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,u,s,c=8*i-o-1,l=(1<<c)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,v=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),t+=a+f>=1?h/s:h*Math.pow(2,1-f),t*s>=2&&(a++,s/=2),a+f>=l?(u=0,a=l):a+f>=1?(u=(t*s-1)*Math.pow(2,o),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+p]=255&u,p+=d,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;e[n+p]=255&a,p+=d,a/=256,c-=8);e[n+p-d]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(r,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(){return"undefined"!=typeof e&&!!e.exports}function s(){return-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")}function c(){return"undefined"!=typeof Titanium}function l(){return u()?!1:s()?"undefined"!=typeof r.device&&"iOS"===r.device.platform:c()?"iphone"===Titanium.Platform.osname||"ipad"===Titanium.Platform.osname:/iPad|iPhone|iPod/.test(r.navigator.userAgent)&&!window.MSStream}function f(){return u()?!1:s()?"undefined"!=typeof r.device&&"Android"===r.device.platform:c()?"android"===Titanium.Platform.osname:/Android/.test(r.navigator.userAgent)}function h(){return u()?!1:s()?"undefined"!=typeof r.device&&"browser"===r.device.platform:c()?"mobileweb"===Titanium.Platform.name:!l()&&!f()}Object.defineProperty(t,"__esModule",{value:!0}),t.Device=void 0;var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.isNode=u,t.isPhoneGap=s,t.isTitanium=c,t.isiOS=l,t.isAndroid=f,t.isBrowser=h;var d=n(430),v=i(d);t.Device=function(){function e(){a(this,e)}return p(e,null,[{key:"toJSON",value:function(){if(u()){var e=n(431);return{latform:{name:"node",version:o.version},os:{name:e.platform(),version:e.release()},kinveySDK:{name:v["default"].name,version:v["default"].version}}}if(s()){if(h()){var t=r.navigator.userAgent.toLowerCase(),i=/(chrome)\/([\w]+)/,a=/(firefox)\/([\w.]+)/,l=/(msie) ([\w.]+)/i,f=/(opera)(?:.*version)?[ \/]([\w.]+)/,p=/(safari)\/([\w.]+)/,d=i.exec(t)||a.exec(t)||l.exec(t)||f.exec(t)||p.exec(t)||[];return{device:{model:r.navigator.userAgent},platform:{name:"phonegap"},os:{name:d[1],version:d[2]},kinveySDK:{name:v["default"].name,version:v["default"].version}}}return{device:{model:r.device.model},platform:{name:"phonegap",version:r.device.cordova},os:{name:r.device.platform,version:r.device.version},kinveySDK:{name:v["default"].name,version:v["default"].version}}}if(c())return{device:{manufacturer:Titanium.Platform.manufacturer,model:Titanium.Platfrom.model},platform:{name:"titanium",version:Titanium.getVersion()},os:{name:Titanium.Platfrom.osname,version:Titanium.Platfrom.version},kinveySDK:{name:v["default"].name,version:v["default"].version}};var y=r.navigator.userAgent.toLowerCase(),m=/(chrome)\/([\w]+)/,g=/(firefox)\/([\w.]+)/,_=/(msie) ([\w.]+)/i,b=/(opera)(?:.*version)?[ \/]([\w.]+)/,w=/(safari)\/([\w.]+)/,E=m.exec(y)||g.exec(y)||_.exec(y)||b.exec(y)||w.exec(y)||[];return{device:{model:r.navigator.userAgent},platform:{name:"html5"},os:{name:E[1],version:E[2]},kinveySDK:{name:v["default"].name,version:v["default"].version}}}}]),e}()}).call(t,function(){return this}(),n(289))},function(e,t){e.exports={name:"kinvey-javascript-sdk-core",version:"3.0.0-beta.17",description:"Kinvey JavaScript SDK Core",main:"./build/kinvey.js",scripts:{test:"./node_modules/mocha/bin/mocha --compilers js:babel-core/register -r babel-polyfill -r ./test/mocks --recursive test","test:ci":"./node_modules/mocha/bin/mocha -w --compilers js:babel-core/register -r babel-polyfill -r ./test/mocks --recursive test",build:"gulp build",lint:"gulp lint"},repository:{type:"git",url:"git+https://github.com/Kinvey/javascript-sdk-core.git"},author:{name:"Kinvey, Inc."},license:"MIT",bugs:{url:"https://github.com/Kinvey/javascript-sdk-core/issues"},dependencies:{"append-query":"^1.1.0",async:"^2.0.0-rc.3",babybird:"0.0.1","fast-memory-cache":"^2.0.4",hellojs:"^1.10.1",indexeddbshim:"^2.2.1","local-storage":"^1.4.2",lodash:"^4.8.2",loglevel:"^1.3.1","promise-queue":"^2.2.3",qs:"^6.0.1",sift:"^3.0.0",uid:"0.0.2","url-pattern":"^1.0.0"},devDependencies:{async:"^2.0.0-rc.2","babel-eslint":"^6.0.0","babel-loader":"^6.2.4","babel-plugin-transform-async-to-module-method":"^6.7.0","babel-polyfill":"^6.7.4","babel-preset-es2015":"^6.0.0","babel-preset-stage-2":"^6.0.15","babel-register":"^6.7.2",babelify:"^7.2.0",benchmark:"^2.1.0",browserify:"^13.0.0",chai:"^3.1.0","chai-as-promised":"^5.1.0",config:"^1.19.0",del:"^2.2.0",esdoc:"^0.4.0",eslint:"^2.7.0","eslint-config-airbnb":"^6.0.0","eslint-plugin-react":"^4.0.0","fake-indexeddb":"^1.0.6",gulp:"^3.9.1","gulp-babel":"^6.1.2","gulp-bump":"^2.1.0","gulp-eslint":"^2.0.0","gulp-git":"^1.7.1","gulp-prompt":"^0.2.0","gulp-sourcemaps":"^1.6.0","gulp-util":"^3.0.7","indexeddb-mock":"^1.1.0","json-loader":"^0.5.4",karma:"^0.13.22","karma-browserify":"^5.0.0","karma-chai":"^0.1.0","karma-chai-as-promised":"^0.1.2","karma-chrome-launcher":"^0.2.2","karma-cli":"^0.1.2","karma-firefox-launcher":"^0.1.7","karma-mocha":"^0.2.2","karma-mocha-reporter":"^2.0.0","karma-phantomjs-launcher":"^1.0.0","karma-safari-launcher":"^0.1.1","karma-sauce-launcher":"^0.3.0","karma-sinon-chai":"^1.2.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0",kinvey:"^1.6.8",lolex:"^1.4.0",longjohn:"^0.2.11",microtime:"^2.0.0",mocha:"^2.4.5",mockery:"^1.4.1",nock:"^7.7.2","node-fetch":"^1.4.1","phantomjs-prebuilt":"^2.0.0","pretty-hrtime":"^1.0.2",request:"^2.70.0","run-sequence":"^1.1.5","semver-regex":"^1.0.0",sinon:"^1.12.2","sinon-chai":"^2.8.0",uid:"0.0.2",watchify:"^3.0.0",webpack:"^1.13.0"},gitHead:"c16c63c2bfc3801125b996e2715766c595e6be72",readme:'# Kinvey JavaScript Core SDK\n\nThis sdk is a standalone sdk designed for JavaScript-based platforms. The sdk acts as a client for the Kinvey REST API and can be used for building JavaScript-based apps.\n\n## Building\nThe simplest way to build the sdk is by running `gulp`. This will also perform [testing](#Testing).\nMore advanced tasks are available.\n\n* `gulp sandbox`: build the sdk without performing any [testing](#Testing).\n* `gulp build`: build the sdk without performing a code audit or [testing](#Testing).\n* `gulp watch`: auto-build the sdk when you modify a file.\n* `gulp clean`: remove temporary files created by the build process.\n\n### Flags\nThe following flags are available when running `gulp`:\n\n* `--platform=<angular|html5|node|phonegap>`: tailor to a specific platform. Defaults to `html5`.\n\n## Testing\nTesting is part of the [build process](#Building). You can run the tests without (re-)building the sdk using `gulp test`.\n\nDepending on the platform, however, a test set-up may be required.\n\n### HTML5\nOptional, but recommended: run `grunt client-tests` to spin up instances of Firefox and Google Chrome for automated testing.\n\n### Node.js\nThe tests will be executed against the current version of Node.js available on the machine. There node version managers, like [`nvm`](https://github.com/creationix/nvm), to easily switch between Node.js versions.\n\n## Releasing\nThe workflow for releasing a new version of the sdk is as follows:\n\n1. Commit all changes.\n2. Increment the [package](package.json) version. See [Version Management](#VersionManagement) below.\n3. Update the [Changelog](CHANGELOG.md).\n4. Run `gulp release --platform=<platform>` replacing `<platform>` with angular, html5, node, or phonegap. See [Flags](#Flags) above.\n5. Update the [DevCenter](https://github.com/Kinvey/devcenter).\n6. Optional: update [sample apps](https://github.com/KinveyApps).\n\n### Version Management\nUpdating the sdk version should follow [Semantic Version 2.0.0](http://semver.org/):\n\n* Major (x.0.0): when making incompatible API changes.\n* Minor (3.x.0): when adding functionality in a backwards-compatible manner.\n* Patch (3.0.x): when making backwards-compatible bug fixes or enhancements.\n\n## License\n\n    Copyright 2016 Kinvey, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n',
readmeFilename:"README.md",homepage:"https://github.com/Kinvey/javascript-sdk-core#readme",_id:"kinvey-javascript-sdk-core@3.0.0-beta.17",_shasum:"cb4c818c23ca2c0e6b7e0dec188f7d87fdd6111f",_from:"git://github.com/Kinvey/javascript-sdk-core.git#develop",_resolved:"git://github.com/Kinvey/javascript-sdk-core.git#c16c63c2bfc3801125b996e2715766c595e6be72"}},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.RequestProperties=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(298),u=n(422),s=r(u),c="appVersion";t.RequestProperties=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,e),this.properties=t}return i(e,[{key:"getProperty",value:function(e){var t=this.toJSON();return e&&t.hasOwnProperty(e)?t[e]:void 0}},{key:"setProperty",value:function(e,t){var n={};return n[e]=t,this.addProperties(n),this}},{key:"addProperties",value:function(e){var t=this;if(!(0,s["default"])(e))throw new a.KinveyError("properties argument must be an object");Object.keys(e).forEach(function(n){var r=e[n];r?t.properties[n]=r:delete t.properties[n]})}},{key:"clear",value:function(){this.properties={}}},{key:"clearProperty",value:function(e){var t=this.properties;e&&t.hasOwnProperty(e)&&delete t[e]}},{key:"clearAppVersion",value:function(){return this.clearProperty(c)}},{key:"toJSON",value:function(){return this.properties}},{key:"properties",get:function(){return this._properties},set:function(e){this._properties=e}},{key:"appVersion",get:function(){return this.getProperty(c)},set:function(e){var t=Array.prototype.slice.call(e,1),n=e[0],r=t[1],o=t[2],i="";return n&&(i=(""+n).trim()),r&&(i=("."+r).trim()),o&&(i=("."+o).trim()),this.setProperty(c,i),this}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new f["default"](function(e,n){function r(o,i){try{var a=t[o](i),u=a.value}catch(s){return void n(s)}return a.done?void e(u):f["default"].resolve(u).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkRack=t.CacheRack=t.KinveyRack=t.Rack=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function k(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:k(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},l=n(294),f=r(l),h=n(434),p=n(436),d=n(496),v=n(497),y=n(498),m=r(y),g=n(494),_=r(g),b=Symbol(),w=Symbol(),E=t.Rack=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"Rack":arguments[0];i(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.middlewares=[],n.canceled=!1,n}return u(t,e),s(t,[{key:"getMiddleware",value:function(){var e=arguments.length<=0||void 0===arguments[0]?-1:arguments[0],t=this.middlewares;if(-1>e||e>=t.length)throw new Error("Index "+e+" is out of bounds.");return t[e]}},{key:"use",value:function(e){if(e){if(e instanceof h.KinveyMiddleware)return void this.middlewares.push(e);throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"useBefore",value:function(e,t){if(t){if(t instanceof h.Middleware){var n=this.middlewares,r=(0,m["default"])(n,function(t){return t instanceof e});return void(r>-1&&(n.splice(r,0,t),this.middlewares=n))}throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"useAfter",value:function(e,t){if(t){if(t instanceof h.Middleware){var n=this.middlewares,r=(0,m["default"])(n,function(t){return t instanceof e});return void(r>-1&&(n.splice(r+1,0,t),this.middlewares=n))}throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"swap",value:function(e,t){if(t){if(t instanceof h.Middleware){var n=this.middlewares,r=(0,m["default"])(n,function(t){return t instanceof e});return void(r>-1&&(n.splice(r,1,t),this.middlewares=n))}throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"remove",value:function(e){var t=this.middlewares,n=(0,m["default"])(t,function(t){return t instanceof e});n>-1&&(t.splice(n,1),this.middlewares=t,this.remove(e))}},{key:"reset",value:function(){this.middlewares=[]}},{key:"execute",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("Request is null. Please provide a valid request.");case 2:return t.abrupt("return",(0,_["default"])(this.middlewares,function(e,t){return e.then(function(e){return t.handle(e)})},f["default"].resolve(e)));case 3:case"end":return t.stop()}},n,this)}));return e}()},{key:"cancel",value:function(){this.canceled=!0}},{key:"handle",value:function(e){return this.execute(e)}},{key:"generateTree",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=c(Object.getPrototypeOf(t.prototype),"generateTree",this).call(this,e),r=this.middlewares;return r.forEach(function(t){n.nodes.push(t.generateTree(e+1))}),n}}]),t}(h.KinveyMiddleware),x=t.KinveyRack=function(e){function t(){return i(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),s(t,[{key:"execute",value:function(e){return c(Object.getPrototypeOf(t.prototype),"execute",this).call(this,e).then(function(e){return e.response})}}]),t}(E);t.CacheRack=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"Kinvey Cache Rack":arguments[0];i(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.use(new p.CacheMiddleware),n}return u(t,e),s(t,null,[{key:"sharedInstance",value:function(){var e=this[b];return e||(e=new t,this[b]=e),e}}]),t}(x),t.NetworkRack=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"Kinvey Network Rack":arguments[0];i(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.use(new v.SerializeMiddleware),n.use(new d.ParseMiddleware),n}return u(t,e),s(t,null,[{key:"sharedInstance",value:function(){var e=this[w];return e||(e=new t,this[w]=e),e}}]),t}(x)},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),u=a.value}catch(s){return void n(s)}return a.done?void e(u):Promise.resolve(u).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.KinveyMiddleware=t.Middleware=void 0;var u=function f(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(435),l=t.Middleware=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?"Middleware":arguments[0];a(this,e),this.name=t}return s(e,[{key:"handle",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function n(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("Request is null. Please provide a valid request.");case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}},n,this)}));return e}()},{key:"generateTree",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t={value:this.name,level:e,nodes:[]};return t}},{key:"toString",value:function(){var e=this.generateTree();return c.AsciiTree.generate(e)}}]),e}();t.KinveyMiddleware=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"Kinvey Middleware":arguments[0];return a(this,t),r(this,Object.getPrototypeOf(t).call(this,e))}return o(t,e),s(t,[{key:"handle",value:function(){function e(e){return n.apply(this,arguments)}var n=i(regeneratorRuntime.mark(function r(e){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",u(Object.getPrototypeOf(t.prototype),"handle",this).call(this,e));case 1:case"end":return n.stop()}},r,this)}));return e}()}]),t}(l)},function(e,t){"use strict";function n(e,t){if(0===e.level)return e.value;for(var n="\r\n",s=t?a:o,c=1;c<e.level;c++)n=""+n+(r[c]?" ":u),n+="  ";return""+n+s+i+" "+e.value}Object.defineProperty(t,"__esModule",{value:!0});var r=[],o=String.fromCharCode(9500),i=String.fromCharCode(9472),a=String.fromCharCode(9492),u=String.fromCharCode(9474);t.AsciiTree={generate:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=arguments[1],i=n(t,o);return t.nodes.length>0&&!function(){var n=t.nodes.length-1;t.nodes.forEach(function(t,o){r[t.level]=o===n,i+=e.generate(t,o===n)})}(),i}}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),u=a.value}catch(s){return void n(s)}return a.done?void e(u):Promise.resolve(u).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CacheMiddleware=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function h(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=n(434),l=n(437),f=n(420);t.CacheMiddleware=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?[l.DBAdapter.IndexedDB,l.DBAdapter.WebSQL,l.DBAdapter.LocalStorage,l.DBAdapter.Memory]:arguments[0];o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,"Kinvey Cache Middleware"));return n.adapters=e,n}return a(t,e),u(t,[{key:"handle",value:function(){function e(e){return n.apply(this,arguments)}var n=r(regeneratorRuntime.mark(function o(e){var n,r,i,a,u;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,s(Object.getPrototypeOf(t.prototype),"handle",this).call(this,e);case 2:if(e=o.sent,n=e.method,r=e.query,i=e.data,a=new l.DB(e.appKey,this.adapters),u=void 0,n!==f.HttpMethod.GET){o.next=32;break}if(!e.entityId){o.next=27;break}if("_count"!==e.entityId){o.next=16;break}return o.next=13,a.count(e.collectionName,r);case 13:u=o.sent,o.next=25;break;case 16:if("_group"!==e.entityId){o.next=22;break}return o.next=19,a.group(e.collectionName,i);case 19:u=o.sent,o.next=25;break;case 22:return o.next=24,a.findById(e.collectionName,e.entityId);case 24:u=o.sent;case 25:o.next=30;break;case 27:return o.next=29,a.find(e.collectionName,r);case 29:u=o.sent;case 30:o.next=48;break;case 32:if(n!==f.HttpMethod.POST&&n!==f.HttpMethod.PUT){o.next=38;break}return o.next=35,a.save(e.collectionName,i);case 35:u=o.sent,o.next=48;break;case 38:if(n!==f.HttpMethod.DELETE){o.next=48;break}if(!e.entityId){o.next=45;break}return o.next=42,a.removeById(e.collectionName,e.entityId);case 42:u=o.sent,o.next=48;break;case 45:return o.next=47,a.remove(e.collectionName,r);case 47:u=o.sent;case 48:return e.response={statusCode:n===f.HttpMethod.POST?f.StatusCode.Created:f.StatusCode.Ok,headers:{},data:u},o.abrupt("return",e);case 50:case"end":return o.stop()}},o,this)}));return e}()}]),t}(c.KinveyMiddleware)},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.DB=t.DBAdapter=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(294),u=r(a),s=n(305),c=n(304),l=n(438),f=n(440),h=n(481),p=n(489),d=n(298),v=n(492),y=n(490),m=r(y),g=n(417),_=r(g),b=n(494),w=r(b),E=n(307),x=r(E),k=n(327),O=r(k),j=n(326),S=r(j),T=e.env.KINVEY_ID_ATTRIBUTE||"_id",I=e.env.KINVEY_KMD_ATTRIBUTE||"_kmd",A={IndexedDB:"IndexedDB",LocalStorage:"LocalStorage",Memory:"Memory",WebSQL:"WebSQL"};Object.freeze(A),t.DBAdapter=A;t.DB=function(){function e(t){var n=this,r=arguments.length<=1||void 0===arguments[1]?[A.IndexedDB,A.WebSQL,A.LocalStorage,A.Memory]:arguments[1];o(this,e),(0,S["default"])(r)||(r=[r]),(0,x["default"])(r,function(e){switch(e){case A.IndexedDB:if(l.IndexedDB.isSupported())return n.adapter=new l.IndexedDB(t),!1;break;case A.LocalStorage:if(f.LocalStorage.isSupported())return n.adapter=new f.LocalStorage(t),!1;break;case A.Memory:if(h.Memory.isSupported())return n.adapter=new h.Memory(t),!1;break;case A.WebSQL:if(p.WebSQL.isSupported())return n.adapter=new p.WebSQL(t),!1;break;default:v.Log.warn("The "+e+" adapter is is not recognized.")}return!0}),this.adapter||(h.Memory.isSupported()?(v.Log.error("Provided adapters are unsupported on this platform. Defaulting to StoreAdapter.Memory adapter.",r),this.adapter=new h.Memory(t)):v.Log.error("Provided adapters are unsupported on this platform.",r))}return i(e,[{key:"generateObjectId",value:function(){for(var e=arguments.length<=0||void 0===arguments[0]?24:arguments[0],t="abcdef0123456789",n="",r=0,o=t.length;e>r;r++){var i=Math.floor(Math.random()*o);n+=t.substring(i,i+1)}return n=""+this.objectIdPrefix+n}},{key:"find",value:function(e,t){var n=this.adapter.find(e).then(function(e){return e?e:[]}).then(function(e){return!t||t instanceof s.Query||(t=new s.Query((0,_["default"])(t,"toJSON",t))),e.length>0&&t&&(e=t._process(e)),e});return n}},{key:"count",value:function(e,t){var n=this.find(e,t).then(function(e){return e.length});return n}},{key:"group",value:function(e,t){var n=this.find(e).then(function(e){return t instanceof c.Aggregation||(t=new c.Aggregation((0,_["default"])(t,"toJSON",t))),e.length>0&&t?t.process(e):null});return n}},{key:"findById",value:function(e,t){if(!(0,O["default"])(t))return u["default"].reject(new d.KinveyError("id must be a string",t));var n=this.adapter.findById(e,t);return n}},{key:"save",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],r=!1;return n?((0,S["default"])(n)||(r=!0,n=[n]),n=(0,m["default"])(n,function(e){var n=e[T],r=e[I]||{};return n||(n=t.generateObjectId(),r.local=!0),e[T]=n,e[I]=r,e}),this.adapter.save(e,n).then(function(e){return r&&e.length>0?e[0]:e})):u["default"].resolve(null)}},{key:"remove",value:function(e,t){var n=this;!t||t instanceof s.Query||(t=new s.Query((0,_["default"])(t,"toJSON",t))),t&&t.sort(null).limit(null).skip(0);var r=this.find(e,t).then(function(t){var r=t.map(function(t){return n.removeById(e,t[T])});return u["default"].all(r)}).then(function(e){var t=(0,w["default"])(e,function(e,t){return e.count+=t.count,e.entities=e.entities.concat(t.entities),e},{count:0,entities:[]});return t});return r}},{key:"removeById",value:function(e,t){if(!t)return u["default"].resolve({count:0,entities:[]});if(!(0,O["default"])(t))return u["default"].reject(new d.KinveyError("id must be a string",t));var n=this.adapter.removeById(e,t);return n}},{key:"objectIdPrefix",get:function(){return""}}]),e}()}).call(t,n(289))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDB=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(294),u=r(a),s=n(298),c=n(307),l=r(c),f=n(326),h=r(f),p=n(327),d=r(p),v=n(302),y=r(v),m={},g={ReadWrite:"readwrite",ReadOnly:"readonly"};Object.freeze(g),"undefined"!=typeof window&&(n(439),e.shimIndexedDB.__useShim());var _=e.shimIndexedDB||e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB;t.IndexedDB=function(){function e(t){if(o(this,e),!t)throw new s.KinveyError("A name for the collection is required to use the indexeddb persistence adapter.",t);if(!(0,d["default"])(t))throw new s.KinveyError("The name of the collection must be a string to use the indexeddb persistence adapter",t);this.name=t,this.inTransaction=!1,this.queue=[]}return i(e,[{key:"openTransaction",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=arguments[2],r=this,o=arguments[3],i=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],a=m[this.name];if(a){var u=(0,y["default"])(a.objectStoreNames.contains)?a.objectStoreNames.contains(e):-1!==a.objectStoreNames.indexOf(e);if(u)try{var c=t?g.ReadWrite:g.ReadOnly,f=a.transaction([e],c);if(f){var h=f.objectStore(e);return n(h)}throw new s.KinveyError("Unable to open a transaction for the "+e+" "+("collection on the "+this.name+" indexedDB database."))}catch(p){return o(p)}else if(!t)return o(new s.NotFoundError("The "+e+" collection was not found on "+("the "+this.name+" indexedDB database.")))}if(!i&&this.inTransaction)return this.queue.push(function(){r.openTransaction(e,t,n,o)});this.inTransaction=!0;var d=void 0;if(a){var v=a.version+1;d=_.open(this.name,v)}else d=_.open(this.name);return d.onupgradeneeded=function(n){a=n.target.result,t&&a.createObjectStore(e,{keyPath:"_id"})},d.onsuccess=function(i){a=i.target.result,m[r.name]=a,a.onversionchange=function(){a&&(a.close(),a=null,m[r.name]=null)};var u=function(e){var t=function(t){if(e(t),r.inTransaction=!1,r.queue.length>0){var n=r.queue;r.queue=[],(0,l["default"])(n,function(e){e.call(r)})}};return t};return r.openTransaction(e,t,u(n),u(o),!0)},d.onblocked=function(){o(new s.KinveyError("The "+r.name+" indexedDB database version can't be upgraded because the database is already open."))},d.onerror=function(e){o(new s.KinveyError("Unable to open the "+r.name+" indexedDB database. "+("Received the error code "+e.target.errorCode+".")))},null}},{key:"find",value:function(e){var t=this,n=new u["default"](function(n,r){return e?t.openTransaction(e,!1,function(o){var i=o.openCursor(),a=[];i.onsuccess=function(e){var t=e.target.result;return t?(a.push(t.value),t["continue"]()):n(a)},i.onerror=function(n){r(new s.KinveyError("An error occurred while fetching data from the "+e+" "+("collection on the "+t.name+" indexedDB database. Received the error code "+n.target.errorCode+".")))}},function(e){return e instanceof s.NotFoundError?n([]):r(e)}):r(new s.KinveyError("A collection was not provided."))});return n}},{key:"findById",value:function(e,t){var n=this,r=new u["default"](function(r,o){n.openTransaction(e,!1,function(i){var a=i.get(t);a.onsuccess=function(i){var a=i.target.result;return a?r(a):o(new s.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" "+("collection on the "+n.name+" indexedDB database.")))},a.onerror=function(r){o(new s.KinveyError("An error occurred while retrieving an entity with _id = "+t+" "+("from the "+e+" collection on the "+n.name+" indexedDB database. ")+("Received the error code "+r.target.errorCode+".")))}},function(r){return o(r instanceof s.NotFoundError?new s.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" "+("collection on the "+n.name+" indexedDB database.")):r)})});return r}},{key:"save",value:function(e,t){var n=this,r=!1;if((0,h["default"])(t)||(t=[t],r=!0),0===t.length)return u["default"].resolve(t);var o=new u["default"](function(o,i){n.openTransaction(e,!0,function(a){var u=a.transaction;(0,l["default"])(t,function(e){a.put(e)}),u.oncomplete=function(){o(r?t[0]:t)},u.onerror=function(t){i(new s.KinveyError("An error occurred while saving the entities to the "+e+" "+("collection on the "+n.name+" indexedDB database. Received the error code "+t.target.errorCode+".")))}},i)});return o}},{key:"removeById",value:function(e,t){var n=this,r=new u["default"](function(r,o){n.openTransaction(e,!0,function(i){var a=i.transaction,u=i.get(t);i["delete"](t),a.oncomplete=function(){return u.result?r({count:1,entities:[u.result]}):o(new s.NotFoundError("An entity with id = "+t+" was not found in the "+e+" "+("collection on the "+n.name+" indexedDB database.")))},a.onerror=function(r){o(new s.KinveyError("An error occurred while deleting an entity with id = "+t+" "+("in the "+e+" collection on the "+n.name+" indexedDB database. ")+("Received the error code "+r.target.errorCode+".")))}},o)});return r}}],[{key:"isSupported",value:function(){return!!_}}]),e}()}).call(t,function(){return this}())},function(module,exports){var idbModules={util:{cleanInterface:!1}};!function(){"use strict";var e={test:!0};if(Object.defineProperty)try{Object.defineProperty(e,"test",{enumerable:!1}),e.test&&(idbModules.util.cleanInterface=!0)}catch(t){}}(),function(e){"use strict";function t(e,t,n){n.target=t,"function"==typeof t[e]&&t[e].apply(t,[n])}var n=function(){this.length=0,this._items=[],e.util.cleanInterface&&Object.defineProperty(this,"_items",{enumerable:!1})};if(n.prototype={contains:function(e){return-1!==this._items.indexOf(e)},item:function(e){return this._items[e]},indexOf:function(e){return this._items.indexOf(e)},push:function(e){this._items.push(e),this.length+=1;for(var t=0;t<this._items.length;t++)this[t]=this._items[t]},splice:function(){this._items.splice.apply(this._items,arguments),this.length=this._items.length;for(var e in this)e===String(parseInt(e,10))&&delete this[e];for(e=0;e<this._items.length;e++)this[e]=this._items[e]}},e.util.cleanInterface)for(var r in{indexOf:!1,push:!1,splice:!1})Object.defineProperty(n.prototype,r,{enumerable:!1});e.util.callback=t,e.util.StringList=n,e.util.quote=function(e){return'"'+e+'"'}}(idbModules),function(e){"use strict";function t(){(navigator.userAgent.match(/MSIE/)||navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/))&&n()}function n(){var e=IDBFactory.prototype.cmp,t=IDBDatabase.prototype.createObjectStore,n=IDBObjectStore.prototype.createIndex,i=IDBObjectStore.prototype.add,c=IDBObjectStore.prototype.put,l=IDBIndex.prototype.get,f=IDBIndex.prototype.getKey,h=IDBIndex.prototype.openCursor,p=IDBIndex.prototype.openKeyCursor,d=IDBObjectStore.prototype.get,v=IDBObjectStore.prototype["delete"],y=IDBObjectStore.prototype.openCursor,m=IDBObjectStore.prototype.openKeyCursor,g=IDBKeyRange.bound,_=IDBKeyRange.upperBound,b=IDBKeyRange.lowerBound,w=IDBKeyRange.only,E=Object.getOwnPropertyDescriptor(IDBRequest.prototype,"result"),x=Object.getOwnPropertyDescriptor(IDBCursor.prototype,"primaryKey"),k=Object.getOwnPropertyDescriptor(IDBCursor.prototype,"key"),O=Object.getOwnPropertyDescriptor(IDBCursorWithValue.prototype,"value");IDBFactory.prototype.cmp=function(t,n){var r=Array.prototype.slice.call(arguments);return t instanceof Array&&(r[0]=s(t)),n instanceof Array&&(r[1]=s(n)),e.apply(this,r)},IDBDatabase.prototype.createObjectStore=function(e,n){return n&&n.keyPath instanceof Array&&(n.keyPath=o(n.keyPath)),t.apply(this,arguments)},IDBObjectStore.prototype.createIndex=function(e,t,r){var i=Array.prototype.slice.call(arguments);return t instanceof Array&&(i[1]=o(t)),n.apply(this,i)},IDBObjectStore.prototype.add=function(e,t){return this.__insertData(i,arguments)},IDBObjectStore.prototype.put=function(e,t){return this.__insertData(c,arguments)},IDBObjectStore.prototype.__insertData=function(e,t){t=Array.prototype.slice.call(t);var n=t[0],o=t[1];if(o instanceof Array&&(t[1]=s(o)),"object"==typeof n){r(this.keyPath)&&a(n,this.keyPath);for(var i=0;i<this.indexNames.length;i++){var u=this.index(this.indexNames[i]);if(r(u.keyPath))try{a(n,u.keyPath)}catch(c){}}}return e.apply(this,t)},IDBIndex.prototype.get=function(e){var t=Array.prototype.slice.call(arguments);return e instanceof Array&&(t[0]=s(e)),l.apply(this,t)},IDBIndex.prototype.getKey=function(e){var t=Array.prototype.slice.call(arguments);return e instanceof Array&&(t[0]=s(e)),f.apply(this,t)},IDBIndex.prototype.openCursor=function(e){var t=Array.prototype.slice.call(arguments);return e instanceof Array&&(t[0]=s(e)),h.apply(this,t)},IDBIndex.prototype.openKeyCursor=function(e){var t=Array.prototype.slice.call(arguments);return e instanceof Array&&(t[0]=s(e)),p.apply(this,t)},IDBObjectStore.prototype.get=function(e){var t=Array.prototype.slice.call(arguments);return e instanceof Array&&(t[0]=s(e)),d.apply(this,t)},IDBObjectStore.prototype["delete"]=function(e){var t=Array.prototype.slice.call(arguments);return e instanceof Array&&(t[0]=s(e)),v.apply(this,t)},IDBObjectStore.prototype.openCursor=function(e){var t=Array.prototype.slice.call(arguments);return e instanceof Array&&(t[0]=s(e)),y.apply(this,t)},IDBObjectStore.prototype.openKeyCursor=function(e){var t=Array.prototype.slice.call(arguments);return e instanceof Array&&(t[0]=s(e)),m.apply(this,t)},IDBKeyRange.bound=function(e,t,n,r){var o=Array.prototype.slice.call(arguments);return e instanceof Array&&(o[0]=s(e)),t instanceof Array&&(o[1]=s(t)),g.apply(IDBKeyRange,o)},IDBKeyRange.upperBound=function(e,t){var n=Array.prototype.slice.call(arguments);return e instanceof Array&&(n[0]=s(e)),_.apply(IDBKeyRange,n)},IDBKeyRange.lowerBound=function(e,t){var n=Array.prototype.slice.call(arguments);return e instanceof Array&&(n[0]=s(e)),b.apply(IDBKeyRange,n)},IDBKeyRange.only=function(e){var t=Array.prototype.slice.call(arguments);return e instanceof Array&&(t[0]=s(e)),w.apply(IDBKeyRange,t)},Object.defineProperty(IDBRequest.prototype,"result",{enumerable:E.enumerable,configurable:E.configurable,get:function(){var e=E.get.call(this);return u(e)}}),Object.defineProperty(IDBCursor.prototype,"primaryKey",{enumerable:x.enumerable,configurable:x.configurable,get:function(){var e=x.get.call(this);return u(e)}}),Object.defineProperty(IDBCursor.prototype,"key",{enumerable:k.enumerable,configurable:k.configurable,get:function(){var e=k.get.call(this);return u(e)}}),Object.defineProperty(IDBCursorWithValue.prototype,"value",{enumerable:O.enumerable,configurable:O.configurable,get:function(){var e=O.get.call(this);return u(e)}});try{IDBTransaction.VERSION_CHANGE||(IDBTransaction.VERSION_CHANGE="versionchange")}catch(j){}}function r(e){return e&&0===e.indexOf(f+".")}function o(e){for(var t=0;t<e.length;t++)e[t]=e[t].replace(/\./g,p);return f+"."+e.join(d)}function i(e){e=e.substr(f.length+1),e=e.split(d);for(var t=0;t<e.length;t++)e[t]=e[t].replace(h,".");return e}function a(t,n){var r=i(n),o=e.Key.getValue(t,r),a=s(o);n=n.substr(f.length+1),t[f]=t[f]||{},t[f][n]=a}function u(e){return"string"==typeof e&&r(e)?c(e):(e&&"object"==typeof e[f]&&delete e[f],e)}function s(t){return e.Key.validate(t),t=e.Key.encode(t),t=f+"."+t,l(t),t}function c(t){return l(t),t=t.substr(f.length+1),t=e.Key.decode(t)}function l(t){if(t.length>889)throw e.util.createDOMException("DataError","The encoded key is "+t.length+" characters long, but IE only allows 889 characters. Consider replacing numeric keys with strings to reduce the encoded length.")}var f="__$$compoundKey",h=/\$\$/g,p="$$$$",d="$_$";e.polyfill=t}(idbModules),function(idbModules){"use strict";var Sca=function(){return{decycle:function(object,callback){function checkForCompletion(){0===queuedObjects.length&&returnCallback(derezObj)}function readBlobAsDataURL(e,t){var n=new FileReader;n.onloadend=function(n){var r=n.target.result,o="Blob";e instanceof File,updateEncodedBlob(r,t,o)},n.readAsDataURL(e)}function updateEncodedBlob(dataURL,path,blobtype){var encoded=queuedObjects.indexOf(path);path=path.replace("$","derezObj"),eval(path+'.$enc="'+dataURL+'"'),eval(path+'.$type="'+blobtype+'"'),queuedObjects.splice(encoded,1),checkForCompletion()}function derez(e,t){var n,r,o;if(!("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof Blob||e instanceof String)){for(n=0;n<objects.length;n+=1)if(objects[n]===e)return{$ref:paths[n]};if(objects.push(e),paths.push(t),"[object Array]"===Object.prototype.toString.apply(e))for(o=[],n=0;n<e.length;n+=1)o[n]=derez(e[n],t+"["+n+"]");else{o={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=derez(e[r],t+"["+JSON.stringify(r)+"]"))}return o}return e instanceof Blob?(queuedObjects.push(t),readBlobAsDataURL(e,t)):e instanceof Boolean?e={$type:"Boolean",$enc:e.toString()}:e instanceof Date?e={$type:"Date",$enc:e.getTime()}:e instanceof Number?e={$type:"Number",$enc:e.toString()}:e instanceof RegExp?e={$type:"RegExp",$enc:e.toString()}:"number"==typeof e?e={$type:"number",
$enc:e+""}:void 0===e&&(e={$type:"undefined"}),e}var objects=[],paths=[],queuedObjects=[],returnCallback=callback,derezObj=derez(object,"$");checkForCompletion()},retrocycle:function retrocycle($){function dataURLToBlob(e){var t,n,r,o=";base64,";if(-1===e.indexOf(o))return n=e.split(","),t=n[0].split(":")[1],r=n[1],new Blob([r],{type:t});n=e.split(o),t=n[0].split(":")[1],r=window.atob(n[1]);for(var i=r.length,a=new Uint8Array(i),u=0;i>u;++u)a[u]=r.charCodeAt(u);return new Blob([a.buffer],{type:t})}function rez(value){var i,item,name,path;if(value&&"object"==typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)item=value[i],item&&"object"==typeof item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[i]=eval(path):value[i]=rez(item));else if(void 0!==value.$type)switch(value.$type){case"Blob":case"File":value=dataURLToBlob(value.$enc);break;case"Boolean":value=Boolean("true"===value.$enc);break;case"Date":value=new Date(value.$enc);break;case"Number":value=Number(value.$enc);break;case"RegExp":value=eval(value.$enc);break;case"number":value=parseFloat(value.$enc);break;case"undefined":value=void 0}else for(name in value)"object"==typeof value[name]&&(item=value[name],item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[name]=eval(path):value[name]=rez(item)));return value}var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return rez($)},encode:function(e,t){function n(e){t(JSON.stringify(e))}this.decycle(e,n)},decode:function(e){return this.retrocycle(JSON.parse(e))}}}();idbModules.Sca=Sca}(idbModules),function(idbModules){"use strict";function padBase32Exponent(e){return e=e.toString(32),1===e.length?"0"+e:e}function padBase32Mantissa(e){return(e+zeros(11)).slice(0,11)}function flipBase32(e){for(var t="",n=0;n<e.length;n++)t+=(31-parseInt(e[n],32)).toString(32);return t}function pow32(e,t){var n,r,o;return t=parseInt(t,32),0>t?roundToPrecision(parseInt(e,32)*Math.pow(32,t-10)):11>t?(n=e.slice(0,t),n=parseInt(n,32),r=e.slice(t),r=parseInt(r,32)*Math.pow(32,t-11),roundToPrecision(n+r)):(o=e+zeros(t-11),parseInt(o,32))}function roundToPrecision(e,t){return t=t||16,parseFloat(e.toPrecision(t))}function zeros(e){for(var t="";e--;)t+="0";return t}function negate(e){return"-"+e}function getType(e){return e instanceof Date?"date":e instanceof Array?"array":typeof e}function validate(e){var t=getType(e);if("array"===t)for(var n=0;n<e.length;n++)validate(e[n]);else if(!types[t]||"string"!==t&&isNaN(e))throw idbModules.util.createDOMException("DataError","Not a valid key")}function getValue(source,keyPath){try{if(keyPath instanceof Array){for(var arrayValue=[],i=0;i<keyPath.length;i++)arrayValue.push(eval("source."+keyPath[i]));return arrayValue}return eval("source."+keyPath)}catch(e){return}}function setValue(e,t,n){for(var r=t.split("."),o=0;o<r.length-1;o++){var i=r[o];e=e[i]=e[i]||{}}e[r[r.length-1]]=n}function isMultiEntryMatch(e,t){var n=collations[t.substring(0,1)];return"array"===n?t.indexOf(e)>1:t===e}function isKeyInRange(e,t){var n=void 0===t.lower,r=void 0===t.upper,o=idbModules.Key.encode(e,!0);return void 0!==t.lower&&(t.lowerOpen&&o>t.__lower&&(n=!0),!t.lowerOpen&&o>=t.__lower&&(n=!0)),void 0!==t.upper&&(t.upperOpen&&o<t.__upper&&(r=!0),!t.upperOpen&&o<=t.__upper&&(r=!0)),n&&r}function findMultiEntryMatches(e,t){var n=[];if(e instanceof Array)for(var r=0;r<e.length;r++){var o=e[r];if(o instanceof Array){if(t.lower===t.upper)continue;if(1!==o.length){var i=findMultiEntryMatches(o,t);i.length>0&&n.push(o);continue}o=o[0]}isKeyInRange(o,t)&&n.push(o)}else isKeyInRange(e,t)&&n.push(e);return n}var collations=["undefined","number","date","string","array"],signValues=["negativeInfinity","bigNegative","smallNegative","smallPositive","bigPositive","positiveInfinity"],types={undefined:{encode:function(e){return collations.indexOf("undefined")+"-"},decode:function(e){}},date:{encode:function(e){return collations.indexOf("date")+"-"+e.toJSON()},decode:function(e){return new Date(e.substring(2))}},number:{encode:function(e){var t=Math.abs(e).toString(32),n=t.indexOf(".");t=-1!==n?t.replace(".",""):t;var r=t.search(/[^0]/);t=t.slice(r);var o,i=zeros(2),a=zeros(11);return isFinite(e)?0>e?e>-1?(o=signValues.indexOf("smallNegative"),i=padBase32Exponent(r),a=flipBase32(padBase32Mantissa(t))):(o=signValues.indexOf("bigNegative"),i=flipBase32(padBase32Exponent(-1!==n?n:t.length)),a=flipBase32(padBase32Mantissa(t))):1>e?(o=signValues.indexOf("smallPositive"),i=flipBase32(padBase32Exponent(r)),a=padBase32Mantissa(t)):(o=signValues.indexOf("bigPositive"),i=padBase32Exponent(-1!==n?n:t.length),a=padBase32Mantissa(t)):o=signValues.indexOf(e>0?"positiveInfinity":"negativeInfinity"),collations.indexOf("number")+"-"+o+i+a},decode:function(e){var t=+e.substr(2,1),n=e.substr(3,2),r=e.substr(5,11);switch(signValues[t]){case"negativeInfinity":return-(1/0);case"positiveInfinity":return 1/0;case"bigPositive":return pow32(r,n);case"smallPositive":return n=negate(flipBase32(n)),pow32(r,n);case"smallNegative":return n=negate(n),r=flipBase32(r),-pow32(r,n);case"bigNegative":return n=flipBase32(n),r=flipBase32(r),-pow32(r,n);default:throw new Error("Invalid number.")}}},string:{encode:function(e,t){return t&&(e=e.replace(/(.)/g,"-$1")+" "),collations.indexOf("string")+"-"+e},decode:function(e,t){return e=e.substring(2),t&&(e=e.substr(0,e.length-1).replace(/-(.)/g,"$1")),e}},array:{encode:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],o=idbModules.Key.encode(r,!0);t[n]=o}return t.push(collations.indexOf("undefined")+"-"),collations.indexOf("array")+"-"+JSON.stringify(t)},decode:function(e){var t=JSON.parse(e.substring(2));t.pop();for(var n=0;n<t.length;n++){var r=t[n],o=idbModules.Key.decode(r,!0);t[n]=o}return t}}};idbModules.Key={encode:function(e,t){return void 0===e?null:types[getType(e)].encode(e,t)},decode:function(e,t){return"string"==typeof e?types[collations[e.substring(0,1)]].decode(e,t):void 0},validate:validate,getValue:getValue,setValue:setValue,isMultiEntryMatch:isMultiEntryMatch,findMultiEntryMatches:findMultiEntryMatches}}(idbModules),function(e){"use strict";function t(e,t){var n=new Event(e);return n.debug=t,Object.defineProperty(n,"target",{writable:!0}),n}function n(e,t){this.type=e,this.debug=t,this.bubbles=!1,this.cancelable=!1,this.eventPhase=0,this.timeStamp=(new Date).valueOf()}var r=!1;try{var o=t("test type","test debug"),i={test:"test target"};o.target=i,o instanceof Event&&"test type"===o.type&&"test debug"===o.debug&&o.target===i&&(r=!0)}catch(a){}r?(e.Event=Event,e.IDBVersionChangeEvent=Event,e.util.createEvent=t):(e.Event=n,e.IDBVersionChangeEvent=n,e.util.createEvent=function(e,t){return new n(e,t)})}(idbModules),function(e){"use strict";function t(e,t){var n=new DOMException.prototype.constructor(0,t);return n.name=e||"DOMException",n.message=t,n}function n(e,t){e=e||"DOMError";var n=new DOMError(e,t);return n.name===e||(n.name=e),n.message===t||(n.message=t),n}function r(e,t){var n=new Error(t);return n.name=e||"DOMException",n.message=t,n}e.util.logError=function(t,n,r){if(e.DEBUG){r&&r.message&&(r=r.message);var o="function"==typeof console.error?"error":"log";console[o](t+": "+n+". "+(r||"")),console.trace&&console.trace()}},e.util.findError=function(e){var t;if(e){if(1===e.length)return e[0];for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof Error||r instanceof DOMException)return r;r&&"string"==typeof r.message&&(t=r)}}return t};var o,i=!1,a=!1;try{o=t("test name","test message"),o instanceof DOMException&&"test name"===o.name&&"test message"===o.message&&(i=!0)}catch(u){}try{o=n("test name","test message"),o instanceof DOMError&&"test name"===o.name&&"test message"===o.message&&(a=!0)}catch(u){}i?(e.DOMException=DOMException,e.util.createDOMException=function(n,r,o){return e.util.logError(n,r,o),t(n,r)}):(e.DOMException=Error,e.util.createDOMException=function(t,n,o){return e.util.logError(t,n,o),r(t,n)}),a?(e.DOMError=DOMError,e.util.createDOMError=function(t,r,o){return e.util.logError(t,r,o),n(t,r)}):(e.DOMError=Error,e.util.createDOMError=function(t,n,o){return e.util.logError(t,n,o),r(t,n)})}(idbModules),function(e){"use strict";function t(){this.onsuccess=this.onerror=this.result=this.error=this.source=this.transaction=null,this.readyState="pending"}function n(){this.onblocked=this.onupgradeneeded=null}n.prototype=new t,n.prototype.constructor=n,e.IDBRequest=t,e.IDBOpenDBRequest=n}(idbModules),function(e,t){"use strict";function n(n,r,o,i){n!==t&&e.Key.validate(n),r!==t&&e.Key.validate(r),this.lower=n,this.upper=r,this.lowerOpen=!!o,this.upperOpen=!!i}n.only=function(e){return new n(e,e,!1,!1)},n.lowerBound=function(e,r){return new n(e,t,r,t)},n.upperBound=function(e,r){return new n(t,e,t,r)},n.bound=function(e,t,r,o){return new n(e,t,r,o)},e.IDBKeyRange=n}(idbModules),function(e,t){"use strict";function n(n,r,o,i,a,u,s){if(null===n&&(n=t),n===t||n instanceof e.IDBKeyRange||(n=new e.IDBKeyRange(n,n,!1,!1)),o.transaction.__assertActive(),r!==t&&-1===["next","prev","nextunique","prevunique"].indexOf(r))throw new TypeError(r+"is not a valid cursor direction");this.source=i,this.direction=r||"next",this.key=t,this.primaryKey=t,this.__store=o,this.__range=n,this.__req=new e.IDBRequest,this.__keyColumnName=a,this.__valueColumnName=u,this.__valueDecoder="value"===u?e.Sca:e.Key,this.__count=s,this.__offset=-1,this.__lastKeyContinued=t,this.__multiEntryIndex=i instanceof e.IDBIndex?i.multiEntry:!1,this.__unique=-1!==this.direction.indexOf("unique"),n!==t&&(n.__lower=n.lower!==t&&e.Key.encode(n.lower,this.__multiEntryIndex),n.__upper=n.upper!==t&&e.Key.encode(n.upper,this.__multiEntryIndex)),this["continue"]()}n.prototype.__find=function(){var e=Array.prototype.slice.call(arguments);this.__multiEntryIndex?this.__findMultiEntry.apply(this,e):this.__findBasic.apply(this,e)},n.prototype.__findBasic=function(n,r,o,i,a){a=a||1;var u=this,s=e.util.quote(u.__keyColumnName),c=["SELECT * FROM",e.util.quote(u.__store.name)],l=[];c.push("WHERE",s,"NOT NULL"),!u.__range||u.__range.lower===t&&u.__range.upper===t||(c.push("AND"),u.__range.lower!==t&&(c.push(s,u.__range.lowerOpen?">":">=","?"),l.push(u.__range.__lower)),u.__range.lower!==t&&u.__range.upper!==t&&c.push("AND"),u.__range.upper!==t&&(c.push(s,u.__range.upperOpen?"<":"<=","?"),l.push(u.__range.__upper))),"undefined"!=typeof n&&(u.__lastKeyContinued=n,u.__offset=0),u.__lastKeyContinued!==t&&(c.push("AND",s,">= ?"),e.Key.validate(u.__lastKeyContinued),l.push(e.Key.encode(u.__lastKeyContinued)));var f="prev"===u.direction||"prevunique"===u.direction?"DESC":"ASC";u.__count||(c.push("ORDER BY",s,f),c.push("LIMIT",a,"OFFSET",u.__offset)),c=c.join(" "),e.DEBUG&&console.log(c,l),u.__prefetchedData=null,u.__prefetchedIndex=0,r.executeSql(c,l,function(n,r){u.__count?o(t,r.rows.length,t):r.rows.length>1?(u.__prefetchedData=r.rows,u.__prefetchedIndex=0,e.DEBUG&&console.log("Preloaded "+u.__prefetchedData.length+" records for cursor"),u.__decode(r.rows.item(0),o)):1===r.rows.length?u.__decode(r.rows.item(0),o):(e.DEBUG&&console.log("Reached end of cursors"),o(t,t,t))},function(t,n){e.DEBUG&&console.log("Could not execute Cursor.continue",c,l),i(n)})},n.prototype.__findMultiEntry=function(n,r,o,i){var a=this;if(a.__prefetchedData&&a.__prefetchedData.length===a.__prefetchedIndex)return e.DEBUG&&console.log("Reached end of multiEntry cursor"),void o(t,t,t);var u=e.util.quote(a.__keyColumnName),s=["SELECT * FROM",e.util.quote(a.__store.name)],c=[];s.push("WHERE",u,"NOT NULL"),a.__range&&a.__range.lower!==t&&a.__range.upper!==t&&0===a.__range.upper.indexOf(a.__range.lower)&&(s.push("AND",u,"LIKE ?"),c.push("%"+a.__range.__lower.slice(0,-1)+"%")),"undefined"!=typeof n&&(a.__lastKeyContinued=n,a.__offset=0),a.__lastKeyContinued!==t&&(s.push("AND",u,">= ?"),e.Key.validate(a.__lastKeyContinued),c.push(e.Key.encode(a.__lastKeyContinued)));var l="prev"===a.direction||"prevunique"===a.direction?"DESC":"ASC";a.__count||s.push("ORDER BY key",l),s=s.join(" "),e.DEBUG&&console.log(s,c),a.__prefetchedData=null,a.__prefetchedIndex=0,r.executeSql(s,c,function(n,r){if(a.__multiEntryOffset=r.rows.length,r.rows.length>0){for(var i=[],u=0;u<r.rows.length;u++)for(var s=r.rows.item(u),c=e.Key.decode(s[a.__keyColumnName],!0),l=e.Key.findMultiEntryMatches(c,a.__range),f=0;f<l.length;f++){var h=l[f],p={matchingKey:e.Key.encode(h,!0),key:s.key};p[a.__keyColumnName]=s[a.__keyColumnName],p[a.__valueColumnName]=s[a.__valueColumnName],i.push(p)}var d=0===a.direction.indexOf("prev");i.sort(function(e,t){return e.matchingKey.replace("[","z")<t.matchingKey.replace("[","z")?d?1:-1:e.matchingKey.replace("[","z")>t.matchingKey.replace("[","z")?d?-1:1:e.key<t.key?"prev"===a.direction?1:-1:e.key>t.key?"prev"===a.direction?-1:1:0}),a.__prefetchedData={data:i,length:i.length,item:function(e){return this.data[e]}},a.__prefetchedIndex=0,a.__count?o(t,i.length,t):i.length>1?(e.DEBUG&&console.log("Preloaded "+a.__prefetchedData.length+" records for multiEntry cursor"),a.__decode(i[0],o)):1===i.length?(e.DEBUG&&console.log("Reached end of multiEntry cursor"),a.__decode(i[0],o)):(e.DEBUG&&console.log("Reached end of multiEntry cursor"),o(t,t,t))}else e.DEBUG&&console.log("Reached end of multiEntry cursor"),o(t,t,t)},function(t,n){e.DEBUG&&console.log("Could not execute Cursor.continue",s,c),i(n)})},n.prototype.__onsuccess=function(e){var n=this;return function(r,o,i){if(n.__count)e(o,n.__req);else{n.key=r===t?null:r,n.value=o===t?null:o,n.primaryKey=i===t?null:i;var a=r===t?null:n;e(a,n.__req)}}},n.prototype.__decode=function(n,r){if(this.__multiEntryIndex&&this.__unique){if(this.__matchedKeys||(this.__matchedKeys={}),this.__matchedKeys[n.matchingKey])return void r(t,t,t);this.__matchedKeys[n.matchingKey]=!0}var o=e.Key.decode(this.__multiEntryIndex?n.matchingKey:n[this.__keyColumnName],this.__multiEntryIndex),i=this.__valueDecoder.decode(n[this.__valueColumnName]),a=e.Key.decode(n.key);r(o,i,a)},n.prototype["continue"]=function(t){var n=e.cursorPreloadPackSize||100,r=this;this.__store.transaction.__pushToQueue(r.__req,function(e,o,i,a){return r.__offset++,r.__prefetchedData&&(r.__prefetchedIndex++,r.__prefetchedIndex<r.__prefetchedData.length)?void r.__decode(r.__prefetchedData.item(r.__prefetchedIndex),r.__onsuccess(i)):void r.__find(t,e,r.__onsuccess(i),a,n)})},n.prototype.advance=function(n){if(0>=n)throw e.util.createDOMException("Type Error","Count is invalid - 0 or negative",n);var r=this;this.__store.transaction.__pushToQueue(r.__req,function(e,o,i,a){r.__offset+=n,r.__find(t,e,r.__onsuccess(i),a)})},n.prototype.update=function(n){var r=this;return r.__store.transaction.__assertWritable(),r.__store.transaction.__addToTransactionQueue(function(o,i,a,u){e.Sca.encode(n,function(i){r.__find(t,o,function(t,s,c){var l=r.__store,f=[i],h=["UPDATE",e.util.quote(l.name),"SET value = ?"];e.Key.validate(c);for(var p=0;p<l.indexNames.length;p++){var d=l.__indexes[l.indexNames[p]],v=e.Key.getValue(n,d.keyPath);h.push(",",e.util.quote(d.name),"= ?"),f.push(e.Key.encode(v,d.multiEntry))}h.push("WHERE key = ?"),f.push(e.Key.encode(c)),e.DEBUG&&console.log(h.join(" "),i,t,c),o.executeSql(h.join(" "),f,function(e,n){r.__prefetchedData=null,r.__prefetchedIndex=0,1===n.rowsAffected?a(t):u("No rows with key found"+t)},function(e,t){u(t)})},u)})})},n.prototype["delete"]=function(){var n=this;return n.__store.transaction.__assertWritable(),this.__store.transaction.__addToTransactionQueue(function(r,o,i,a){n.__find(t,r,function(o,u,s){var c="DELETE FROM  "+e.util.quote(n.__store.name)+" WHERE key = ?";e.DEBUG&&console.log(c,o,s),e.Key.validate(s),r.executeSql(c,[e.Key.encode(s)],function(e,r){n.__prefetchedData=null,n.__prefetchedIndex=0,1===r.rowsAffected?(n.__offset--,i(t)):a("No rows with key found"+o)},function(e,t){a(t)})},a)})},e.IDBCursor=n}(idbModules),function(e,t){"use strict";function n(e,t){this.objectStore=e,this.name=t.columnName,this.keyPath=t.keyPath,this.multiEntry=t.optionalParams&&t.optionalParams.multiEntry,this.unique=t.optionalParams&&t.optionalParams.unique,this.__deleted=!!t.__deleted}n.__clone=function(e,t){return new n(t,{columnName:e.name,keyPath:e.keyPath,optionalParams:{multiEntry:e.multiEntry,unique:e.unique}})},n.__createIndex=function(t,r){var o=!!t.__indexes[r.name]&&t.__indexes[r.name].__deleted;t.__indexes[r.name]=r,t.indexNames.push(r.name);var i=t.transaction;i.__addToTransactionQueue(function(i,a,u,s){function c(t,n){s(e.util.createDOMException(0,'Could not create index "'+r.name+'"',n))}function l(o){n.__updateIndexList(t,o,function(){o.executeSql("SELECT * FROM "+e.util.quote(t.name),[],function(n,o){function i(a){if(a<o.rows.length)try{var s=e.Sca.decode(o.rows.item(a).value),l=e.Key.getValue(s,r.keyPath);l=e.Key.encode(l,r.multiEntry),n.executeSql("UPDATE "+e.util.quote(t.name)+" set "+e.util.quote(r.name)+" = ? where key = ?",[l,o.rows.item(a).key],function(e,t){i(a+1)},c)}catch(f){i(a+1)}else u(t)}e.DEBUG&&console.log("Adding existing "+t.name+" records to the "+r.name+" index"),i(0)},c)},c)}if(o)l(i);else{var f=["ALTER TABLE",e.util.quote(t.name),"ADD",e.util.quote(r.name),"BLOB"].join(" ");e.DEBUG&&console.log(f),i.executeSql(f,[],l,c)}})},n.__deleteIndex=function(t,r){t.__indexes[r.name].__deleted=!0,t.indexNames.splice(t.indexNames.indexOf(r.name),1);var o=t.transaction;o.__addToTransactionQueue(function(o,i,a,u){function s(t,n){u(e.util.createDOMException(0,'Could not delete index "'+r.name+'"',n))}n.__updateIndexList(t,o,a,s)})},n.__updateIndexList=function(t,n,r,o){for(var i={},a=0;a<t.indexNames.length;a++){var u=t.__indexes[t.indexNames[a]];i[u.name]={columnName:u.name,keyPath:u.keyPath,optionalParams:{unique:u.unique,multiEntry:u.multiEntry},deleted:!!u.deleted}}e.DEBUG&&console.log("Updating the index list for "+t.name,i),n.executeSql("UPDATE __sys__ set indexList = ? where name = ?",[JSON.stringify(i),t.name],function(){r(t)},o)},n.prototype.__fetchIndexData=function(n,r){var o,i,a=this;return 1===arguments.length?(r=n,o=!1):(e.Key.validate(n),i=e.Key.encode(n,a.multiEntry),o=!0),a.objectStore.transaction.__addToTransactionQueue(function(n,u,s,c){var l=["SELECT * FROM",e.util.quote(a.objectStore.name),"WHERE",e.util.quote(a.name),"NOT NULL"],f=[];o&&(a.multiEntry?(l.push("AND",e.util.quote(a.name),"LIKE ?"),f.push("%"+i+"%")):(l.push("AND",e.util.quote(a.name),"= ?"),f.push(i))),e.DEBUG&&console.log("Trying to fetch data for Index",l.join(" "),f),n.executeSql(l.join(" "),f,function(n,u){var c=0,l=null;if(a.multiEntry)for(var f=0;f<u.rows.length;f++){var h=u.rows.item(f),p=e.Key.decode(h[a.name]);o&&e.Key.isMultiEntryMatch(i,h[a.name])?(c++,l=l||h):o||p===t||(c+=p instanceof Array?p.length:1,l=l||h)}else c=u.rows.length,l=c&&u.rows.item(0);s("count"===r?c:0===c?t:"key"===r?e.Key.decode(l.key):e.Sca.decode(l.value))},c)})},n.prototype.openCursor=function(t,n){return new e.IDBCursor(t,n,this.objectStore,this,this.name,"value").__req},n.prototype.openKeyCursor=function(t,n){return new e.IDBCursor(t,n,this.objectStore,this,this.name,"key").__req},n.prototype.get=function(e){if(0===arguments.length)throw new TypeError("No key was specified");return this.__fetchIndexData(e,"value")},n.prototype.getKey=function(e){if(0===arguments.length)throw new TypeError("No key was specified");return this.__fetchIndexData(e,"key")},n.prototype.count=function(n){return n===t?this.__fetchIndexData("count"):n instanceof e.IDBKeyRange?new e.IDBCursor(n,"next",this.objectStore,this,this.name,"value",!0).__req:this.__fetchIndexData(n,"count")},e.IDBIndex=n}(idbModules),function(e){"use strict";function t(t,n){this.name=t.name,this.keyPath=JSON.parse(t.keyPath),this.transaction=n,this.autoIncrement="string"==typeof t.autoInc?"true"===t.autoInc:!!t.autoInc,this.__indexes={},this.indexNames=new e.util.StringList;var r=JSON.parse(t.indexList);for(var o in r)if(r.hasOwnProperty(o)){var i=new e.IDBIndex(this,r[o]);this.__indexes[i.name]=i,i.__deleted||this.indexNames.push(i.name)}}t.__clone=function(e,n){var r=new t({name:e.name,keyPath:JSON.stringify(e.keyPath),autoInc:JSON.stringify(e.autoIncrement),indexList:"{}"},n);return r.__indexes=e.__indexes,r.indexNames=e.indexNames,r},t.__createObjectStore=function(t,n){t.__objectStores[n.name]=n,t.objectStoreNames.push(n.name);var r=t.__versionTransaction;e.IDBTransaction.__assertVersionChange(r),r.__addToTransactionQueue(function(t,r,o,i){function a(t,r){throw e.util.createDOMException(0,'Could not create object store "'+n.name+'"',r)}var u=["CREATE TABLE",e.util.quote(n.name),"(key BLOB",n.autoIncrement?"UNIQUE, inc INTEGER PRIMARY KEY AUTOINCREMENT":"PRIMARY KEY",", value BLOB)"].join(" ");e.DEBUG&&console.log(u),t.executeSql(u,[],function(e,t){e.executeSql("INSERT INTO __sys__ VALUES (?,?,?,?)",[n.name,JSON.stringify(n.keyPath),n.autoIncrement,"{}"],function(){o(n)},a)},a)})},t.__deleteObjectStore=function(t,n){t.__objectStores[n.name]=void 0,t.objectStoreNames.splice(t.objectStoreNames.indexOf(n.name),1);var r=t.__versionTransaction;e.IDBTransaction.__assertVersionChange(r),r.__addToTransactionQueue(function(t,r,o,i){function a(t,n){i(e.util.createDOMException(0,"Could not delete ObjectStore",n))}t.executeSql("SELECT * FROM __sys__ where name = ?",[n.name],function(t,r){r.rows.length>0&&t.executeSql("DROP TABLE "+e.util.quote(n.name),[],function(){t.executeSql("DELETE FROM __sys__ WHERE name = ?",[n.name],function(){o()},a)},a)})})},t.prototype.__validateKey=function(t,n){if(this.keyPath){if("undefined"!=typeof n)throw e.util.createDOMException("DataError","The object store uses in-line keys and the key parameter was provided",this);if(!t||"object"!=typeof t)throw e.util.createDOMException("DataError","KeyPath was specified, but value was not an object");if(n=e.Key.getValue(t,this.keyPath),void 0===n){if(this.autoIncrement)return;throw e.util.createDOMException("DataError","Could not eval key from keyPath")}}else if("undefined"==typeof n){if(this.autoIncrement)return;throw e.util.createDOMException("DataError","The object store uses out-of-line keys and has no key generator and the key parameter was not provided. ",this)}e.Key.validate(n)},t.prototype.__deriveKey=function(t,n,r,o,i){function a(n){t.executeSql("SELECT * FROM sqlite_sequence where name like ?",[u.name],function(e,t){n(1!==t.rows.length?1:t.rows.item(0).seq+1)},function(t,n){i(e.util.createDOMException("DataError","Could not get the auto increment value for key",n))})}var u=this;if(u.keyPath){var s=e.Key.getValue(n,u.keyPath);void 0===s&&u.autoIncrement?a(function(t){try{e.Key.setValue(n,u.keyPath,t),o(t)}catch(r){i(e.util.createDOMException("DataError","Could not assign a generated value to the keyPath",r))}}):o(s)}else"undefined"==typeof r&&u.autoIncrement?a(o):o(r)},t.prototype.__insertData=function(t,n,r,o,i,a){try{var u={};"undefined"!=typeof o&&(e.Key.validate(o),u.key=e.Key.encode(o));for(var s=0;s<this.indexNames.length;s++){var c=this.__indexes[this.indexNames[s]];u[c.name]=e.Key.encode(e.Key.getValue(r,c.keyPath),c.multiEntry)}var l=["INSERT INTO ",e.util.quote(this.name),"("],f=[" VALUES ("],h=[];for(var p in u)l.push(e.util.quote(p)+","),f.push("?,"),h.push(u[p]);l.push("value )"),f.push("?)"),h.push(n);var d=l.join(" ")+f.join(" ");e.DEBUG&&console.log("SQL for adding",d,h),t.executeSql(d,h,function(t,n){e.Sca.encode(o,function(t){t=e.Sca.decode(t),i(t)})},function(t,n){a(e.util.createDOMError("ConstraintError",n.message,n))})}catch(v){a(v)}},t.prototype.add=function(t,n){var r=this;if(0===arguments.length)throw new TypeError("No value was specified");this.__validateKey(t,n),r.transaction.__assertWritable();var o=r.transaction.__createRequest();return r.transaction.__pushToQueue(o,function(o,i,a,u){r.__deriveKey(o,t,n,function(n){e.Sca.encode(t,function(e){r.__insertData(o,e,t,n,a,u)})},u)}),o},t.prototype.put=function(t,n){var r=this;if(0===arguments.length)throw new TypeError("No value was specified");this.__validateKey(t,n),r.transaction.__assertWritable();var o=r.transaction.__createRequest();return r.transaction.__pushToQueue(o,function(o,i,a,u){r.__deriveKey(o,t,n,function(n){e.Sca.encode(t,function(i){e.Key.validate(n);var s="DELETE FROM "+e.util.quote(r.name)+" where key = ?";o.executeSql(s,[e.Key.encode(n)],function(o,s){e.DEBUG&&console.log("Did the row with the",n,"exist? ",s.rowsAffected),r.__insertData(o,i,t,n,a,u)},function(e,t){u(t)})})},u)}),o},t.prototype.get=function(t){var n=this;if(0===arguments.length)throw new TypeError("No key was specified");e.Key.validate(t);var r=e.Key.encode(t);return n.transaction.__addToTransactionQueue(function(t,o,i,a){e.DEBUG&&console.log("Fetching",n.name,r),t.executeSql("SELECT * FROM "+e.util.quote(n.name)+" where key = ?",[r],function(t,n){e.DEBUG&&console.log("Fetched data",n);var r;try{if(0===n.rows.length)return i();r=e.Sca.decode(n.rows.item(0).value)}catch(o){e.DEBUG&&console.log(o)}i(r)},function(e,t){a(t)})})},t.prototype["delete"]=function(t){var n=this;if(0===arguments.length)throw new TypeError("No key was specified");n.transaction.__assertWritable(),e.Key.validate(t);var r=e.Key.encode(t);return n.transaction.__addToTransactionQueue(function(t,o,i,a){e.DEBUG&&console.log("Fetching",n.name,r),t.executeSql("DELETE FROM "+e.util.quote(n.name)+" where key = ?",[r],function(t,n){e.DEBUG&&console.log("Deleted from database",n.rowsAffected),i()},function(e,t){a(t)})})},t.prototype.clear=function(){var t=this;return t.transaction.__assertWritable(),t.transaction.__addToTransactionQueue(function(n,r,o,i){n.executeSql("DELETE FROM "+e.util.quote(t.name),[],function(t,n){e.DEBUG&&console.log("Cleared all records from database",n.rowsAffected),o()},function(e,t){i(t)})})},t.prototype.count=function(t){if(t instanceof e.IDBKeyRange)return new e.IDBCursor(t,"next",this,this,"key","value",!0).__req;var n=this,r=!1;return void 0!==t&&(r=!0,e.Key.validate(t)),n.transaction.__addToTransactionQueue(function(o,i,a,u){var s="SELECT * FROM "+e.util.quote(n.name)+(r?" WHERE key = ?":""),c=[];r&&c.push(e.Key.encode(t)),o.executeSql(s,c,function(e,t){a(t.rows.length)},function(e,t){u(t)})})},t.prototype.openCursor=function(t,n){return new e.IDBCursor(t,n,this,this,"key","value").__req},t.prototype.index=function(t){if(0===arguments.length)throw new TypeError("No index name was specified");var n=this.__indexes[t];if(!n)throw e.util.createDOMException("NotFoundError",'Index "'+t+'" does not exist on '+this.name);return e.IDBIndex.__clone(n,this)},t.prototype.createIndex=function(t,n,r){if(0===arguments.length)throw new TypeError("No index name was specified");if(1===arguments.length)throw new TypeError("No key path was specified");if(n instanceof Array&&r&&r.multiEntry)throw e.util.createDOMException("InvalidAccessError","The keyPath argument was an array and the multiEntry option is true.");if(this.__indexes[t]&&!this.__indexes[t].__deleted)throw e.util.createDOMException("ConstraintError",'Index "'+t+'" already exists on '+this.name);this.transaction.__assertVersionChange(),r=r||{};var o={columnName:t,keyPath:n,optionalParams:{unique:!!r.unique,multiEntry:!!r.multiEntry}},i=new e.IDBIndex(this,o);return e.IDBIndex.__createIndex(this,i),i},t.prototype.deleteIndex=function(t){if(0===arguments.length)throw new TypeError("No index name was specified");var n=this.__indexes[t];if(!n)throw e.util.createDOMException("NotFoundError",'Index "'+t+'" does not exist on '+this.name);this.transaction.__assertVersionChange(),e.IDBIndex.__deleteIndex(this,n)},e.IDBObjectStore=t}(idbModules),function(e){"use strict";function t(e,t,r){this.__id=++n,this.__active=!0,this.__running=!1,this.__errored=!1,this.__requests=[],this.__storeNames=t,this.mode=r,this.db=e,this.error=null,this.onabort=this.onerror=this.oncomplete=null;var o=this;setTimeout(function(){o.__executeRequests()},0)}var n=0;t.prototype.__executeRequests=function(){function t(t){if(e.util.logError("Error","An error occurred in a transaction",t),!r.__errored){if(r.__errored=!0,!r.__active)throw t;try{r.error=t;var n=e.util.createEvent("error");e.util.callback("onerror",r,n),e.util.callback("onerror",r.db,n)}finally{r.abort()}}}function n(){e.DEBUG&&console.log("Transaction completed");var t=e.util.createEvent("complete");try{e.util.callback("oncomplete",r,t),e.util.callback("__oncomplete",r,t)}catch(n){throw r.__errored=!0,n}}if(this.__running)return void(e.DEBUG&&console.log("Looks like the request set is already running",this.mode));this.__running=!0;var r=this;r.db.__db.transaction(function(o){function i(t,n){n&&(s.req=n),s.req.readyState="done",s.req.result=t,delete s.req.error;var r=e.util.createEvent("success");e.util.callback("onsuccess",s.req,r),c++,u()}function a(n,r){r=e.util.findError(arguments);try{s.req.readyState="done",s.req.error=r||"DOMError",s.req.result=void 0;var o=e.util.createEvent("error",r);e.util.callback("onerror",s.req,o)}finally{t(r)}}function u(){if(c>=r.__requests.length)r.__requests=[],r.__active&&(r.__active=!1,n());else try{s=r.__requests[c],s.op(o,s.args,i,a)}catch(e){a(e)}}r.__tx=o;var s=null,c=0;u()},function(e){t(e)})},t.prototype.__createRequest=function(){var t=new e.IDBRequest;return t.source=this.db,t.transaction=this,t},t.prototype.__addToTransactionQueue=function(e,t){var n=this.__createRequest();return this.__pushToQueue(n,e,t),n},t.prototype.__pushToQueue=function(e,t,n){this.__assertActive(),this.__requests.push({op:t,args:n,req:e})},t.prototype.__assertActive=function(){if(!this.__active)throw e.util.createDOMException("TransactionInactiveError","A request was placed against a transaction which is currently not active, or which is finished")},t.prototype.__assertWritable=function(){if(this.mode===t.READ_ONLY)throw e.util.createDOMException("ReadOnlyError","The transaction is read only")},t.prototype.__assertVersionChange=function(){t.__assertVersionChange(this)},t.__assertVersionChange=function(n){if(!n||n.mode!==t.VERSION_CHANGE)throw e.util.createDOMException("InvalidStateError","Not a version transaction")},t.prototype.objectStore=function(n){if(0===arguments.length)throw new TypeError("No object store name was specified");if(!this.__active)throw e.util.createDOMException("InvalidStateError","A request was placed against a transaction which is currently not active, or which is finished");if(-1===this.__storeNames.indexOf(n)&&this.mode!==t.VERSION_CHANGE)throw e.util.createDOMException("NotFoundError",n+" is not participating in this transaction");var r=this.db.__objectStores[n];if(!r)throw e.util.createDOMException("NotFoundError",n+" does not exist in "+this.db.name);return e.IDBObjectStore.__clone(r,this)},t.prototype.abort=function(){var t=this;e.DEBUG&&console.log("The transaction was aborted",t),t.__active=!1;var n=e.util.createEvent("abort");setTimeout(function(){e.util.callback("onabort",t,n)},0)},t.READ_ONLY="readonly",t.READ_WRITE="readwrite",t.VERSION_CHANGE="versionchange",e.IDBTransaction=t}(idbModules),function(e){"use strict";function t(t,n,r,o){this.__db=t,this.__closed=!1,this.version=r,this.name=n,this.onabort=this.onerror=this.onversionchange=null,this.__objectStores={},this.objectStoreNames=new e.util.StringList;for(var i=0;i<o.rows.length;i++){var a=new e.IDBObjectStore(o.rows.item(i));this.__objectStores[a.name]=a,this.objectStoreNames.push(a.name)}}t.prototype.createObjectStore=function(t,n){if(0===arguments.length)throw new TypeError("No object store name was specified");if(this.__objectStores[t])throw e.util.createDOMException("ConstraintError",'Object store "'+t+'" already exists in '+this.name);this.__versionTransaction.__assertVersionChange(),n=n||{};var r={name:t,keyPath:JSON.stringify(n.keyPath||null),autoInc:JSON.stringify(n.autoIncrement),indexList:"{}"},o=new e.IDBObjectStore(r,this.__versionTransaction);return e.IDBObjectStore.__createObjectStore(this,o),o},t.prototype.deleteObjectStore=function(t){if(0===arguments.length)throw new TypeError("No object store name was specified");var n=this.__objectStores[t];if(!n)throw e.util.createDOMException("NotFoundError",'Object store "'+t+'" does not exist in '+this.name);
this.__versionTransaction.__assertVersionChange(),e.IDBObjectStore.__deleteObjectStore(this,n)},t.prototype.close=function(){this.__closed=!0},t.prototype.transaction=function(t,n){if(this.__closed)throw e.util.createDOMException("InvalidStateError","An attempt was made to start a new transaction on a database connection that is not open");if("number"==typeof n?(n=1===n?IDBTransaction.READ_WRITE:IDBTransaction.READ_ONLY,e.DEBUG&&console.log("Mode should be a string, but was specified as ",n)):n=n||IDBTransaction.READ_ONLY,n!==IDBTransaction.READ_ONLY&&n!==IDBTransaction.READ_WRITE)throw new TypeError("Invalid transaction mode: "+n);if(t="string"==typeof t?[t]:t,0===t.length)throw e.util.createDOMException("InvalidAccessError","No object store names were specified");for(var r=0;r<t.length;r++)if(!this.objectStoreNames.contains(t[r]))throw e.util.createDOMException("NotFoundError",'The "'+t[r]+'" object store does not exist');var o=new e.IDBTransaction(this,t,n);return o},e.IDBDatabase=t}(idbModules),function(e){"use strict";function t(t,n){function i(t,r){r=e.util.findError(arguments),e.DEBUG&&console.log("Error in sysdb transaction - when creating dbVersions",r),n(r)}r?t():(r=window.openDatabase("__sysdb__",1,"System Database",o),r.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS dbVersions (name VARCHAR(255), version INT);",[],t,i)},i))}function n(){this.modules=e}var r,o=4194304;n.prototype.open=function(n,i){function a(t,n){if(!c){n=e.util.findError(arguments),c=!0;var r=e.util.createEvent("error",arguments);s.readyState="done",s.error=n||"DOMError",e.util.callback("onerror",s,r)}}function u(t){var u=window.openDatabase(n,1,n,o);if(s.readyState="done","undefined"==typeof i&&(i=t||1),0>=i||t>i){var c=e.util.createDOMError("VersionError","An attempt was made to open a database using a lower version than the existing version.",i);return void a(c)}u.transaction(function(o){o.executeSql("CREATE TABLE IF NOT EXISTS __sys__ (name VARCHAR(255), keyPath VARCHAR(255), autoInc BOOLEAN, indexList BLOB)",[],function(){o.executeSql("SELECT * FROM __sys__",[],function(o,c){var l=e.util.createEvent("success");s.source=s.result=new e.IDBDatabase(u,n,i,c),i>t?r.transaction(function(r){r.executeSql("UPDATE dbVersions set version = ? where name = ?",[i,n],function(){var n=e.util.createEvent("upgradeneeded");n.oldVersion=t,n.newVersion=i,s.transaction=s.result.__versionTransaction=new e.IDBTransaction(s.source,[],e.IDBTransaction.VERSION_CHANGE),s.transaction.__addToTransactionQueue(function(t,r,o){e.util.callback("onupgradeneeded",s,n),o()}),s.transaction.__oncomplete=function(){s.transaction=null;var t=e.util.createEvent("success");e.util.callback("onsuccess",s,t)}},a)},a):e.util.callback("onsuccess",s,l)},a)},a)},a)}var s=new e.IDBOpenDBRequest,c=!1;if(0===arguments.length)throw new TypeError("Database name is required");if(2===arguments.length&&(i=parseFloat(i),isNaN(i)||!isFinite(i)||0>=i))throw new TypeError("Invalid database version: "+i);return n+="",t(function(){r.transaction(function(e){e.executeSql("SELECT * FROM dbVersions where name = ?",[n],function(e,t){0===t.rows.length?e.executeSql("INSERT INTO dbVersions VALUES (?,?)",[n,i||1],function(){u(0)},a):u(t.rows.item(0).version)},a)},a)},a),s},n.prototype.deleteDatabase=function(n){function i(t,n){if(!s){n=e.util.findError(arguments),u.readyState="done",u.error=n||"DOMError";var r=e.util.createEvent("error");r.debug=arguments,e.util.callback("onerror",u,r),s=!0}}function a(){r.transaction(function(t){t.executeSql("DELETE FROM dbVersions where name = ? ",[n],function(){u.result=void 0;var t=e.util.createEvent("success");t.newVersion=null,t.oldVersion=c,e.util.callback("onsuccess",u,t)},i)},i)}var u=new e.IDBOpenDBRequest,s=!1,c=null;if(0===arguments.length)throw new TypeError("Database name is required");return n+="",t(function(){r.transaction(function(t){t.executeSql("SELECT * FROM dbVersions where name = ?",[n],function(t,r){if(0===r.rows.length){u.result=void 0;var s=e.util.createEvent("success");return s.newVersion=null,s.oldVersion=c,void e.util.callback("onsuccess",u,s)}c=r.rows.item(0).version;var l=window.openDatabase(n,1,n,o);l.transaction(function(t){t.executeSql("SELECT * FROM __sys__",[],function(t,n){var r=n.rows;!function o(n){n>=r.length?t.executeSql("DROP TABLE IF EXISTS __sys__",[],function(){a()},i):t.executeSql("DROP TABLE "+e.util.quote(r.item(n).name),[],function(){o(n+1)},function(){o(n+1)})}(0)},function(e){a()})})},i)},i)},i),u},n.prototype.cmp=function(t,n){if(arguments.length<2)throw new TypeError("You must provide two keys to be compared");e.Key.validate(t),e.Key.validate(n);var r=e.Key.encode(t),o=e.Key.encode(n),i=r>o?1:r===o?0:-1;if(e.DEBUG){var a=e.Key.decode(r),u=e.Key.decode(o);"object"==typeof t&&(t=JSON.stringify(t),a=JSON.stringify(a)),"object"==typeof n&&(n=JSON.stringify(n),u=JSON.stringify(u)),a!==t&&console.warn(t+" was incorrectly encoded as "+a),u!==n&&console.warn(n+" was incorrectly encoded as "+u)}return i},e.shimIndexedDB=new n,e.IDBFactory=n}(idbModules),function(e,t){"use strict";function n(t,n){try{e[t]=n}catch(r){}if(e[t]!==n&&Object.defineProperty){try{Object.defineProperty(e,t,{value:n})}catch(r){}e[t]!==n&&e.console&&console.warn&&console.warn("Unable to shim "+t)}}n("shimIndexedDB",t.shimIndexedDB),e.shimIndexedDB&&(e.shimIndexedDB.__useShim=function(){"undefined"!=typeof e.openDatabase?(n("indexedDB",t.shimIndexedDB),n("IDBFactory",t.IDBFactory),n("IDBDatabase",t.IDBDatabase),n("IDBObjectStore",t.IDBObjectStore),n("IDBIndex",t.IDBIndex),n("IDBTransaction",t.IDBTransaction),n("IDBCursor",t.IDBCursor),n("IDBKeyRange",t.IDBKeyRange),n("IDBRequest",t.IDBRequest),n("IDBOpenDBRequest",t.IDBOpenDBRequest),n("IDBVersionChangeEvent",t.IDBVersionChangeEvent)):"object"==typeof e.indexedDB&&t.polyfill()},e.shimIndexedDB.__debug=function(e){t.DEBUG=e}),"indexedDB"in e||(e.indexedDB=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.oIndexedDB||e.msIndexedDB);var r=!1;if((navigator.userAgent.match(/Android 2/)||navigator.userAgent.match(/Android 3/)||navigator.userAgent.match(/Android 4\.[0-3]/))&&(navigator.userAgent.match(/Chrome/)||(r=!0)),"undefined"!=typeof e.indexedDB&&e.indexedDB&&!r||"undefined"==typeof e.openDatabase){e.IDBDatabase=e.IDBDatabase||e.webkitIDBDatabase,e.IDBTransaction=e.IDBTransaction||e.webkitIDBTransaction,e.IDBCursor=e.IDBCursor||e.webkitIDBCursor,e.IDBKeyRange=e.IDBKeyRange||e.webkitIDBKeyRange,e.IDBTransaction||(e.IDBTransaction={});try{e.IDBTransaction.READ_ONLY=e.IDBTransaction.READ_ONLY||"readonly",e.IDBTransaction.READ_WRITE=e.IDBTransaction.READ_WRITE||"readwrite"}catch(o){}}else e.shimIndexedDB.__useShim()}(window,idbModules)},function(e,t,n){(function(e,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorage=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(294),s=o(u),c=n(298),l=n(441),f=o(l),h=n(445),p=o(h),d=n(479),v=o(d),y=n(307),m=o(y),g=e.env.KINVEY_ID_ATTRIBUTE||"_id",_=r.localStorage;t.LocalStorage=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?"kinvey":arguments[0];i(this,e),this.name=t}return a(e,[{key:"find",value:function(e){var t=this;return s["default"].resolve().then(function(){var n=_.getItem(""+t.name+e);try{return JSON.parse(n)}catch(r){return n}}).then(function(e){return e?e:[]})}},{key:"findById",value:function(e,t){var n=this;return this.find(e).then(function(r){var o=find(r,function(e){return e[g]===t});if(!o)throw new c.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" "+("collection on the "+n.name+" memory database."));return o})}},{key:"save",value:function(e,t){var n=this;return this.find(e).then(function(r){var o=(0,f["default"])(r,g),i=(0,f["default"])(t,g),a=Object.keys(o);return(0,m["default"])(a,function(e){var t=o[e],n=i[e];n&&(i[e]=(0,p["default"])(t,n))}),_.setItem(""+n.name+e,JSON.stringify((0,v["default"])(i))),t})}},{key:"removeById",value:function(e,t){var n=this;return this.find(e).then(function(r){var o=(0,f["default"])(r,g),i=o[t];if(!i)throw new c.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" "+("collection on the "+n.name+" memory database."));return delete o[t],_.setItem(""+n.name+e,JSON.stringify((0,v["default"])(o))),{count:1,entities:[i]}})}}],[{key:"isSupported",value:function(){if(_){var e="testLocalStorageSupport";try{return _.setItem(e,e),_.removeItem(e),!0}catch(t){return!1}}return!1}}]),e}()}).call(t,n(289),function(){return this}())},function(e,t,n){var r=n(442),o=r(function(e,t,n){e[n]=t});e.exports=o},function(e,t,n){function r(e,t){return function(n,r){var s=u(n)?o:i,c=t?t():{};return s(n,e,a(r),c)}}var o=n(443),i=n(444),a=n(331),u=n(326);e.exports=r},function(e,t){function n(e,t,n,r){for(var o=-1,i=e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}e.exports=n},function(e,t,n){function r(e,t,n,r){return o(e,function(e,o,i){t(r,e,n(e),i)}),r}var o=n(309);e.exports=r},function(e,t,n){var r=n(446),o=n(409),i=o(function(e,t,n){r(e,t,n)});e.exports=i},function(e,t,n){function r(e,t,n,h,p){if(e!==t){if(!s(t)&&!l(t))var d=f(t);i(d||t,function(i,s){if(d&&(s=i,i=t[s]),c(i))p||(p=new o),u(e,t,s,n,r,h,p);else{var l=h?h(e[s],i,s+"",e,t,p):void 0;void 0===l&&(l=i),a(e,s,l)}})}}var o=n(334),i=n(308),a=n(447),u=n(448),s=n(326),c=n(303),l=n(384),f=n(475);e.exports=r},function(e,t,n){function r(e,t,n){(void 0===n||o(e[t],n))&&("number"!=typeof t||void 0!==n||t in e)||(e[t]=n)}var o=n(339);e.exports=r},function(e,t,n){function r(e,t,n,r,v,y,m){var g=e[n],_=t[n],b=m.get(_);if(b)return void o(e,n,b);var w=y?y(g,_,n+"",e,t,m):void 0,E=void 0===w;E&&(w=_,s(_)||p(_)?s(g)?w=g:c(g)?w=a(g):(E=!1,w=i(_,!0)):h(_)||u(_)?u(g)?w=d(g):!f(g)||r&&l(g)?(E=!1,w=i(_,!0)):w=g:E=!1),m.set(_,w),E&&v(w,_,r,y,m),m["delete"](_),o(e,n,w)}var o=n(447),i=n(449),a=n(452),u=n(319),s=n(326),c=n(320),l=n(302),f=n(303),h=n(422),p=n(384),d=n(474);e.exports=r},function(e,t,n){function r(e,t,n,E,x,k,O){var T;if(E&&(T=k?E(e,x,k,O):E(e)),void 0!==T)return T;if(!_(e))return e;var I=y(e);if(I){if(T=p(e),!t)return c(e,T)}else{var P=h(e),C=P==j||P==S;if(m(e))return s(e,t);if(P==A||P==w||C&&!k){if(g(e))return k?e:{};if(T=v(C?{}:e),!t)return l(e,u(T,e))}else{if(!G[P])return k?e:{};T=d(e,P,r,t)}}O||(O=new o);var R=O.get(e);if(R)return R;if(O.set(e,T),!I)var N=n?f(e):b(e);return i(N||e,function(o,i){N&&(i=o,o=e[i]),a(T,i,r(o,t,n,E,i,e,O))}),T}var o=n(334),i=n(308),a=n(406),u=n(450),s=n(451),c=n(452),l=n(453),f=n(455),h=n(379),p=n(458),d=n(459),v=n(470),y=n(326),m=n(472),g=n(351),_=n(303),b=n(313),w="[object Arguments]",E="[object Array]",x="[object Boolean]",k="[object Date]",O="[object Error]",j="[object Function]",S="[object GeneratorFunction]",T="[object Map]",I="[object Number]",A="[object Object]",P="[object RegExp]",C="[object Set]",R="[object String]",N="[object Symbol]",D="[object WeakMap]",M="[object ArrayBuffer]",F="[object DataView]",L="[object Float32Array]",B="[object Float64Array]",q="[object Int8Array]",U="[object Int16Array]",K="[object Int32Array]",H="[object Uint8Array]",V="[object Uint8ClampedArray]",$="[object Uint16Array]",z="[object Uint32Array]",G={};G[w]=G[E]=G[M]=G[F]=G[x]=G[k]=G[L]=G[B]=G[q]=G[U]=G[K]=G[T]=G[I]=G[A]=G[P]=G[C]=G[R]=G[N]=G[H]=G[V]=G[$]=G[z]=!0,G[O]=G[j]=G[D]=!1,e.exports=r},function(e,t,n){function r(e,t){return e&&o(t,i(t),e)}var o=n(407),i=n(313);e.exports=r},function(e,t){function n(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}e.exports=n},function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},function(e,t,n){function r(e,t){return o(e,i(e),t)}var o=n(407),i=n(454);e.exports=r},function(e,t){function n(e){return r(Object(e))}var r=Object.getOwnPropertySymbols;r||(n=function(){return[]}),e.exports=n},function(e,t,n){function r(e){return o(e,a,i)}var o=n(456),i=n(454),a=n(313);e.exports=r},function(e,t,n){function r(e,t,n){var r=t(e);return i(e)?r:o(r,n(e))}var o=n(457),i=n(326);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}e.exports=n},function(e,t){function n(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var r=Object.prototype,o=r.hasOwnProperty;e.exports=n},function(e,t,n){function r(e,t,n,r){var A=e.constructor;switch(t){case _:return o(e);case f:case h:return new A(+e);case b:return i(e,r);case w:case E:case x:case k:case O:case j:case S:case T:case I:return l(e,r);case p:return a(e,r,n);case d:case m:return new A(e);case v:return u(e);case y:return s(e,r,n);case g:return c(e)}}var o=n(460),i=n(461),a=n(462),u=n(465),s=n(466),c=n(468),l=n(469),f="[object Boolean]",h="[object Date]",p="[object Map]",d="[object Number]",v="[object RegExp]",y="[object Set]",m="[object String]",g="[object Symbol]",_="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",x="[object Int8Array]",k="[object Int16Array]",O="[object Int32Array]",j="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]";e.exports=r},function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=n(375);e.exports=r},function(e,t,n){function r(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var o=n(460);e.exports=r},function(e,t,n){function r(e,t,n){var r=t?n(a(e),!0):a(e);return i(r,o,new e.constructor)}var o=n(463),i=n(464),a=n(376);e.exports=r},function(e,t){function n(e,t){return e.set(t[0],t[1]),e}e.exports=n},function(e,t){function n(e,t,n,r){var o=-1,i=e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}e.exports=n},function(e,t){function n(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}var r=/\w*$/;e.exports=n},function(e,t,n){function r(e,t,n){var r=t?n(a(e),!0):a(e);return i(r,o,new e.constructor)}var o=n(467),i=n(464),a=n(377);e.exports=r},function(e,t){function n(e,t){return e.add(t),e}e.exports=n},function(e,t,n){function r(e){return a?Object(a.call(e)):{}}var o=n(354),i=o?o.prototype:void 0,a=i?i.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var o=n(460);e.exports=r},function(e,t,n){function r(e){return"function"!=typeof e.constructor||a(e)?{}:o(i(e))}var o=n(471),i=n(315),a=n(329);e.exports=r},function(e,t,n){function r(e){return o(e)?i(e):{}}var o=n(303),i=Object.create;e.exports=r},function(e,t,n){(function(e){var r=n(473),o=n(355),i={"function":!0,object:!0},a=i[typeof t]&&t&&!t.nodeType?t:void 0,u=i[typeof e]&&e&&!e.nodeType?e:void 0,s=u&&u.exports===a?a:void 0,c=s?o.Buffer:void 0,l=c?function(e){return e instanceof c}:r(!1);e.exports=l}).call(t,n(356)(e))},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t,n){function r(e){return o(e,i(e))}var o=n(407),i=n(475);e.exports=r},function(e,t,n){function r(e){for(var t=-1,n=u(e),r=o(e),s=r.length,l=i(e),f=!!l,h=l||[],p=h.length;++t<s;){var d=r[t];f&&("length"==d||a(d,p))||"constructor"==d&&(n||!c.call(e,d))||h.push(d)}return h}var o=n(476),i=n(317),a=n(328),u=n(329),s=Object.prototype,c=s.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){e=null==e?e:Object(e);var t=[];for(var n in e)t.push(n);return t}var o=n(477),i=n(478),a=Object.prototype,u=o?o.enumerate:void 0,s=a.propertyIsEnumerable;u&&!s.call({valueOf:1},"valueOf")&&(r=function(e){return i(u(e))}),e.exports=r},function(e,t,n){var r=n(355),o=r.Reflect;e.exports=o},function(e,t){function n(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}e.exports=n},function(e,t,n){function r(e){return e?o(e,i(e)):[]}var o=n(480),i=n(313);e.exports=r},function(e,t,n){function r(e,t){return o(t,function(t){return e[t]})}var o=n(389);e.exports=r},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Memory=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(294),u=r(a),s=n(482),c=r(s),l=n(298),f=n(485),h=r(f),p=n(441),d=r(p),v=n(307),y=r(v),m=n(479),g=r(m),_=n(486),b=r(_),w=n(327),E=r(w),x=n(326),k=r(x),O=e.env.KINVEY_ID_ATTRIBUTE||"_id",j=[];c["default"].configure(u["default"]);var S=new c["default"](1,1/0);t.Memory=function(){function e(t){if(o(this,e),!t)throw new l.KinveyError("A name for the collection is required to use the memory persistence adapter.",t);if(!(0,E["default"])(t))throw new l.KinveyError("The name of the collection must be a string to use the memory persistence adapter",t);this.name=t,this.cache=j[t],this.cache||(this.cache=new h["default"],j[t]=this.cache)}return i(e,[{key:"find",value:function(e){var t=this;return S.add(function(){var n=u["default"].resolve().then(function(){var n=t.cache.get(""+t.name+e);if(n)try{return JSON.parse(n)}catch(r){return n}return n}).then(function(e){return e?e:[]});return n})}},{key:"findById",value:function(e,t){var n=this;return this.find(e).then(function(r){var o=(0,b["default"])(r,function(e){return e[O]===t});if(!o)throw new l.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" "+("collection on the "+n.name+" memory database."));return o})}},{key:"save",value:function(e,t){var n=this,r=!1;return(0,k["default"])(t)||(t=[t],r=!0),0===t.length?u["default"].resolve(t):this.find(e).then(function(o){o=(0,d["default"])(o,O),t=(0,d["default"])(t,O);var i=Object.keys(t);return(0,y["default"])(i,function(e){o[e]=t[e]}),n.cache.set(""+n.name+e,JSON.stringify((0,g["default"])(o))),t=(0,g["default"])(t),r?t[0]:t})}},{key:"removeById",value:function(e,t){var n=this;return this.find(e).then(function(r){r=(0,d["default"])(r,O);var o=r[t];if(!o)throw new l.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" "+("collection on the "+n.name+" memory database."));return delete r[t],n.cache.set(""+n.name+e,JSON.stringify((0,g["default"])(r))),{count:1,entities:[o]}})}}],[{key:"isSupported",value:function(){return!0}}]),e}()}).call(t,n(289))},function(e,t,n){(function(t){e.exports=n(t.env.PROMISE_QUEUE_COVERAGE?483:484)}).call(t,n(289))},function(e,t){},function(e,t,n){var r,o;!function(i,a){"use strict";"object"==typeof e&&e.exports?e.exports=a():(r=a,o="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==o&&(e.exports=o)))}(this,function(){"use strict";function e(e,t){this.pendingPromises=0,this.maxPendingPromises="undefined"!=typeof e?e:1/0,this.maxQueuedPromises="undefined"!=typeof t?t:1/0,this.queue=[]}var t="undefined"!=typeof Promise?Promise:function(){return{then:function(){throw new Error("Queue.configure() before use Queue")}}},n=function(){},r=function(e){return e&&"function"==typeof e.then?e:new t(function(t){t(e)})};return e.configure=function(e){t=e},e.prototype.add=function(e){var r=this;return new t(function(t,o,i){return r.queue.length>=r.maxQueuedPromises?void o(new Error("Queue limit reached")):(r.queue.push({promiseGenerator:e,resolve:t,reject:o,notify:i||n}),void r._dequeue())})},e.prototype.getPendingLength=function(){return this.pendingPromises},e.prototype.getQueueLength=function(){return this.queue.length},e.prototype._dequeue=function(){var e=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var t=this.queue.shift();if(!t)return!1;try{this.pendingPromises++,r(t.promiseGenerator()).then(function(n){e.pendingPromises--,t.resolve(n),e._dequeue()},function(n){e.pendingPromises--,t.reject(n),e._dequeue()},function(e){t.notify(e)})}catch(n){e.pendingPromises--,t.reject(n),e._dequeue()}return!0},e})},function(e,t){"use strict";function n(){this._cache=r(),this._timeouts=r()}function r(){return Object.create(null)}n.prototype.get=function(e){return this._cache[e]},n.prototype.set=function(e,t,n){this["delete"](e),this._cache[e]=t,n&&(this._timeouts[e]=setTimeout(this["delete"].bind(this,e),1e3*n))},n.prototype["delete"]=function(e){delete this._cache[e],e in this._timeouts&&(clearTimeout(this._timeouts[e]),delete this._timeouts[e])},n.prototype.clear=function(){this._cache=r();for(var e in this._timeouts)clearTimeout(this._timeouts[e]);this._timeouts=r()},e.exports=n},function(e,t,n){function r(e,t){if(t=u(t,3),s(e)){var n=a(e,t);return n>-1?e[n]:void 0}return i(e,t,o)}var o=n(309),i=n(487),a=n(488),u=n(331),s=n(326);e.exports=r},function(e,t){function n(e,t,n,r){var o;return n(e,function(e,n,i){return t(e,n,i)?(o=r?n:e,!1):void 0}),o}e.exports=n},function(e,t){function n(e,t,n){for(var r=e.length,o=n?r:-1;n?o--:++o<r;)if(t(e[o],o,e))return o;return-1}e.exports=n},function(e,t,n){(function(e,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.WebSQL=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(294),s=o(u),c=n(298),l=n(490),f=o(l),h=n(307),p=o(h),d=n(326),v=o(d),y=n(302),m=o(y),g=n(327),_=o(g),b=e.env.KINVEY_ID_ATTRIBUTE||"_id",w="sqlite_master",E=5e6,x=null,k={};"undefined"!=typeof window&&(x={openDatabase:"undefined"!=typeof openDatabase?openDatabase:r.openDatabase});t.WebSQL=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?"kinvey":arguments[0];i(this,e),this.name=t}return a(e,[{key:"openTransaction",value:function(e,t,n){var r=this,o=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],i=k[this.name],a='"'+e+'"',u=e===w,l=(0,v["default"])(t);t=l?t:[[t,n]],i||(i=x.openDatabase(this.name,1,"",E),k[this.name]=i);var f=new s["default"](function(n,s){var f=o||!(0,m["default"])(i.readTransaction);i[f?"transaction":"readTransaction"](function(e){o&&!u&&e.executeSql("CREATE TABLE IF NOT EXISTS "+a+" (key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)");var r=t.length,i=[];(0,p["default"])(t,function(t){var o=t[0].replace("#{collection}",a);e.executeSql(o,t[1],function(e,t){var o={rowCount:t.rowsAffected,result:[]};if(t.rows.length)for(var a=0,s=t.rows.length;s>a;a++)try{var c=t.rows.item(a).value,f=u?c:JSON.parse(c);o.result.push(f)}catch(h){}i.push(o),r-=1,0===r&&n(l?i:i.shift())})})},function(t){if(t=(0,_["default"])(t)?t:t.message,t&&-1===t.indexOf("no such table"))return s(new c.NotFoundError("The "+e+" collection was not found on "+("the "+r.name+" webSQL database.")));var n="SELECT name AS value from #{collection} WHERE type = ? AND name = ?",o=["table",e];return r.openTransaction(w,n,o).then(function(t){return s(0===t.result.length?new c.NotFoundError("The "+e+" collection was not found on "+("the "+r.name+" webSQL database.")):new c.KinveyError("Unable to open a transaction for the "+e+" "+("collection on the "+r.name+" webSQL database.")))})["catch"](function(t){s(new c.KinveyError("Unable to open a transaction for the "+e+" "+("collection on the "+r.name+" webSQL database."),t))})})});return f}},{key:"find",value:function(e){var t="SELECT value FROM #{collection}",n=this.openTransaction(e,t,[]).then(function(e){return e.result})["catch"](function(e){if(e instanceof c.NotFoundError)return[];throw e});return n}},{key:"findById",value:function(e,t){var n=this,r="SELECT value FROM #{collection} WHERE key = ?",o=this.openTransaction(e,r,[t]).then(function(r){var o=r.result;if(0===o.length)throw new c.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" "+("collection on the "+n.name+" webSQL database."));return o[0]});return o}},{key:"save",value:function(e,t){var n=[];t=(0,f["default"])(t,function(e){return n.push(["REPLACE INTO #{collection} (key, value) VALUES (?, ?)",[e[b],JSON.stringify(e)]]),e});var r=this.openTransaction(e,n,null,!0).then(function(){return t});return r}},{key:"removeById",value:function(e,t){var n=this,r=this.openTransaction(e,[["SELECT value FROM #{collection} WHERE key = ?",[t]],["DELETE FROM #{collection} WHERE key = ?",[t]]],null,!0).then(function(r){var o=r[0].result,i=r[1].rowCount;if(i=i?i:o.length,0===i)throw new c.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" "+("collection on the "+n.name+" webSQL database."));return{count:1,entities:o}});return r}}],[{key:"isSupported",value:function(){return!!x}}]),e}()}).call(t,n(289),function(){return this}())},function(e,t,n){function r(e,t){var n=u(e)?o:a;return n(e,i(t,3))}var o=n(389),i=n(331),a=n(491),u=n(326);e.exports=r},function(e,t,n){function r(e,t){var n=-1,r=i(e)?Array(e.length):[];return o(e,function(e,o,i){r[++n]=t(e,o,i)}),r}var o=n(309),i=n(321);e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Log=void 0;var o=n(493),i=r(o),a=i["default"].methodFactory;i["default"].methodFactory=function(e,t,n){var r=a(e,t,n);return function(e){r("Kinvey: "+e)}},i["default"].setDefaultLevel(i["default"].levels.SILENT),t.Log=i["default"]},function(e,t,n){var r,o;!function(i,a){"use strict";"object"==typeof e&&e.exports?e.exports=a():(r=a,o="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==o&&(e.exports=o)))}(this,function(){"use strict";function e(e){return typeof console===u?!1:void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):a}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==u&&(r.call(this,t,n),this[e].apply(this,arguments))}}function r(e,t){for(var n=0;n<s.length;n++){var r=s[n];this[r]=e>n?a:this.methodFactory(r,e,t)}}function o(t,r,o){return e(t)||n.apply(this,arguments)}function i(e,t,n){function i(e){var t=(s[e]||"silent").toUpperCase();try{return void(window.localStorage[f]=t)}catch(n){}try{window.document.cookie=encodeURIComponent(f)+"="+t+";"}catch(n){}}function a(){var e;try{e=window.localStorage[f]}catch(t){}if(typeof e===u)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(f)+"=");r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===l.levels[e]&&(e=void 0),e}var c,l=this,f="loglevel";e&&(f+=":"+e),l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=n||o,l.getLevel=function(){return c},l.setLevel=function(t,n){if("string"==typeof t&&void 0!==l.levels[t.toUpperCase()]&&(t=l.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;return c=t,n!==!1&&i(t),r.call(l,t,e),typeof console===u&&t<l.levels.SILENT?"No console available for logging":void 0},l.setDefaultLevel=function(e){a()||l.setLevel(e,!1)},l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)},l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)};var h=a();null==h&&(h=null==t?"WARN":t),l.setLevel(h,!1)}var a=function(){},u="undefined",s=["trace","debug","info","warn","error"],c=new i,l={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=l[e];return t||(t=l[e]=new i(e,c.getLevel(),c.methodFactory)),t};var f=typeof window!==u?window.log:void 0;return c.noConflict=function(){return typeof window!==u&&window.log===c&&(window.log=f),c},c})},function(e,t,n){function r(e,t,n){var r=s(e)?o:u,c=arguments.length<3;return r(e,a(t,4),n,c,i)}var o=n(464),i=n(309),a=n(331),u=n(495),s=n(326);e.exports=r},function(e,t){function n(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}e.exports=n},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),u=a.value}catch(s){return void n(s)}return a.done?void e(u):Promise.resolve(u).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ParseMiddleware=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function l(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:l(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=n(434);t.ParseMiddleware=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"Kinvey Parse Middleware":arguments[0];return o(this,t),i(this,Object.getPrototypeOf(t).call(this,e))}return a(t,e),u(t,[{key:"handle",value:function(){function e(e){return n.apply(this,arguments)}var n=r(regeneratorRuntime.mark(function o(e){var n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,s(Object.getPrototypeOf(t.prototype),"handle",this).call(this,e);case 2:if(e=o.sent,n=e.response,n&&n.data&&(r=n.headers["content-type"]||n.headers["Content-Type"],0===r.indexOf("application/json"))){try{n.data=JSON.parse(n.data)}catch(i){n.data=n.data}e.response=n}return o.abrupt("return",e);case 6:case"end":return o.stop()}},o,this)}));return e}()}]),t}(c.KinveyMiddleware)},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),u=a.value}catch(s){return void n(s)}return a.done?void e(u):Promise.resolve(u).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SerializeMiddleware=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function p(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n);
}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},l=n(434),f=n(307),h=r(f);t.SerializeMiddleware=function(t){function n(){var e=arguments.length<=0||void 0===arguments[0]?"Kinvey Serialize Middleware":arguments[0];return i(this,n),a(this,Object.getPrototypeOf(n).call(this,e))}return u(n,t),s(n,[{key:"handle",value:function(){function t(e){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function i(t){var r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,c(Object.getPrototypeOf(n.prototype),"handle",this).call(this,t);case 2:return t=o.sent,t&&t.data&&(r=t.headers["content-type"]||t.headers["Content-Type"],0===r.indexOf("application/json")?t.data=JSON.stringify(t.data):0===r.indexOf("application/x-www-form-urlencoded")&&!function(){var n=t.data,r=[],o=Object.keys(n);(0,h["default"])(o,function(t){r.push(e.encodeURIComponent(t)+"="+e.encodeURIComponent(n[t]))}),t.data=r.join("&")}()),o.abrupt("return",t);case 5:case"end":return o.stop()}},i,this)}));return t}()}]),n}(l.KinveyMiddleware)}).call(t,function(){return this}())},function(e,t,n){function r(e,t){return e&&e.length?o(e,i(t,3)):-1}var o=n(488),i=n(331);e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=0,n=e.length;e=String(e||"");for(var r=0;n>r;r++){var o=encodeURI(e[r]).split("%").length;t+=1===o?1:o-1}return t}function i(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return""+t+(0,u["default"])(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.byteCount=o,t.randomString=i;var a=n(500),u=r(a)},function(e,t){function n(e){return e=e||7,Math.random().toString(35).substr(2,e)}e.exports=n},function(e,t,n){var r,o,i,a=[].slice;!function(a,u){return null!=n(502)?(o=[],r=u,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))):"undefined"!=typeof t&&null!==t?e.exports=u():a.UrlPattern=u()}(this,function(){var e,t,n,r,o,i,u,s,c,l,f,h,p,d,v;return c=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},u=function(e,t){var n,r,o;for(o=[],n=-1,r=e.length;++n<r;)o=o.concat(t(e[n]));return o},d=function(e,t){var n,r,o;for(o="",n=-1,r=e.length;++n<r;)o+=t(e[n]);return o},p=function(e){return new RegExp(e.toString()+"|").exec("").length-1},f=function(e,t){var n,r,o,i,a;for(i={},n=-1,o=e.length;++n<o;)r=e[n],a=t[n],null!=a&&(null!=i[r]?(Array.isArray(i[r])||(i[r]=[i[r]]),i[r].push(a)):i[r]=a);return i},e={},e.Result=function(e,t){this.value=e,this.rest=t},e.Tagged=function(e,t){this.tag=e,this.value=t},e.tag=function(t,n){return function(r){var o,i;return o=n(r),null!=o?(i=new e.Tagged(t,o.value),new e.Result(i,o.rest)):void 0}},e.regex=function(t){return function(n){var r,o;return r=t.exec(n),null!=r?(o=r[0],new e.Result(o,n.slice(o.length))):void 0}},e.sequence=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],function(n){var r,o,i,a,u,s;for(r=-1,o=t.length,s=[],a=n;++r<o;){if(i=t[r],u=i(a),null==u)return;s.push(u.value),a=u.rest}return new e.Result(s,a)}},e.pick=function(){var t,n;return t=arguments[0],n=2<=arguments.length?a.call(arguments,1):[],function(r){var o,i;return i=e.sequence.apply(e,n)(r),null!=i?(o=i.value,i.value=o[t],i):void 0}},e.string=function(t){var n;return n=t.length,function(r){return r.slice(0,n)===t?new e.Result(t,r.slice(n)):void 0}},e.lazy=function(e){var t;return t=null,function(n){return null==t&&(t=e()),t(n)}},e.baseMany=function(t,n,r,o,i){var a,u,s,c;for(s=i,c=r?"":[];;){if(null!=n&&(a=n(s),null!=a))break;if(u=t(s),null==u)break;r?c+=u.value:c.push(u.value),s=u.rest}return o&&0===c.length?void 0:new e.Result(c,s)},e.many1=function(t){return function(n){return e.baseMany(t,null,!1,!0,n)}},e.concatMany1Till=function(t,n){return function(r){return e.baseMany(t,n,!0,!0,r)}},e.firstChoice=function(){var e;return e=1<=arguments.length?a.call(arguments,0):[],function(t){var n,r,o,i;for(n=-1,r=e.length;++n<r;)if(o=e[n],i=o(t),null!=i)return i}},h=function(t){var n;return n={},n.wildcard=e.tag("wildcard",e.string(t.wildcardChar)),n.optional=e.tag("optional",e.pick(1,e.string(t.optionalSegmentStartChar),e.lazy(function(){return n.pattern}),e.string(t.optionalSegmentEndChar))),n.name=e.regex(new RegExp("^["+t.segmentNameCharset+"]+")),n.named=e.tag("named",e.pick(1,e.string(t.segmentNameStartChar),e.lazy(function(){return n.name}))),n.escapedChar=e.pick(1,e.string(t.escapeChar),e.regex(/^./)),n["static"]=e.tag("static",e.concatMany1Till(e.firstChoice(e.lazy(function(){return n.escapedChar}),e.regex(/^./)),e.firstChoice(e.string(t.segmentNameStartChar),e.string(t.optionalSegmentStartChar),e.string(t.optionalSegmentEndChar),n.wildcard))),n.token=e.lazy(function(){return e.firstChoice(n.wildcard,n.optional,n.named,n["static"])}),n.pattern=e.many1(e.lazy(function(){return n.token})),n},s={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},i=function(e,t){if(Array.isArray(e))return d(e,function(e){return i(e,t)});switch(e.tag){case"wildcard":return"(.*?)";case"named":return"(["+t+"]+)";case"static":return c(e.value);case"optional":return"(?:"+i(e.value,t)+")?"}},o=function(e,t){return null==t&&(t=s.segmentValueCharset),"^"+i(e,t)+"$"},r=function(e){if(Array.isArray(e))return u(e,r);switch(e.tag){case"wildcard":return["_"];case"named":return[e.value];case"static":return[];case"optional":return r(e.value)}},l=function(e,t,n,r){var o,i,a,u;if(null==r&&(r=!1),u=e[t],null!=u){if(o=n[t]||0,i=Array.isArray(u)?u.length-1:0,!(o>i))return a=Array.isArray(u)?u[o]:u,r&&(n[t]=o+1),a;if(r)throw new Error("too few values provided for key `"+t+"`")}else if(r)throw new Error("no values provided for key `"+t+"`")},n=function(e,t,r){var o,i;if(Array.isArray(e)){for(o=-1,i=e.length;++o<i;)if(n(e[o],t,r))return!0;return!1}switch(e.tag){case"wildcard":return null!=l(t,"_",r,!1);case"named":return null!=l(t,e.value,r,!1);case"static":return!1;case"optional":return n(e.value,t,r)}},v=function(e,t,r){if(Array.isArray(e))return d(e,function(e){return v(e,t,r)});switch(e.tag){case"wildcard":return l(t,"_",r,!0);case"named":return l(t,e.value,r,!0);case"static":return e.value;case"optional":return n(e.value,t,r)?v(e.value,t,r):""}},t=function(e,n){var i,a,u,c,l;if(e instanceof t)return this.isRegex=e.isRegex,this.regex=e.regex,this.ast=e.ast,void(this.names=e.names);if(this.isRegex=e instanceof RegExp,"string"!=typeof e&&!this.isRegex)throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=e,null!=n){if(!Array.isArray(n))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(i=p(this.regex),n.length!==i)throw new Error("regex contains "+i+" groups but array of group names contains "+n.length);this.names=n}}else{if(""===e)throw new Error("argument must not be the empty string");if(l=e.replace(/\s+/g,""),l!==e)throw new Error("argument must not contain whitespace");if(a={escapeChar:(null!=n?n.escapeChar:void 0)||s.escapeChar,segmentNameStartChar:(null!=n?n.segmentNameStartChar:void 0)||s.segmentNameStartChar,segmentNameCharset:(null!=n?n.segmentNameCharset:void 0)||s.segmentNameCharset,segmentValueCharset:(null!=n?n.segmentValueCharset:void 0)||s.segmentValueCharset,optionalSegmentStartChar:(null!=n?n.optionalSegmentStartChar:void 0)||s.optionalSegmentStartChar,optionalSegmentEndChar:(null!=n?n.optionalSegmentEndChar:void 0)||s.optionalSegmentEndChar,wildcardChar:(null!=n?n.wildcardChar:void 0)||s.wildcardChar},c=h(a),u=c.pattern(e),null==u)throw new Error("couldn't parse pattern");if(""!==u.rest)throw new Error("could only partially parse pattern");this.ast=u.value,this.regex=new RegExp(o(this.ast,a.segmentValueCharset)),this.names=r(this.ast)}},t.prototype.match=function(e){var t,n;return n=this.regex.exec(e),null==n?null:(t=n.slice(1),this.names?f(this.names,t):t)},t.prototype.stringify=function(e){if(null==e&&(e={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(e!==Object(e))throw new Error("argument must be an object or undefined");return v(this.ast,e,{})},t.escapeForRegex=c,t.concatMap=u,t.stringConcatMap=d,t.regexGroupCount=p,t.keysAndValuesToObject=f,t.P=e,t.newParser=h,t.defaultOptions=s,t.astNodeToRegexString=o,t.astNodeToNames=r,t.getParam=l,t.astNodeContainsSegmentsForProvidedParams=n,t.stringify=v,t})},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";var r=n(504),o=n(506);e.exports={stringify:r,parse:o}},function(e,t,n){"use strict";var r=n(505),o={delimiter:"&",arrayPrefixGenerators:{brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},strictNullHandling:!1,skipNulls:!1,encode:!0};o.stringify=function(e,t,n,i,a,u,s,c,l){var f=e;if("function"==typeof s)f=s(t,f);else if(r.isBuffer(f))f=String(f);else if(f instanceof Date)f=f.toISOString();else if(null===f){if(i)return u?r.encode(t):t;f=""}if("string"==typeof f||"number"==typeof f||"boolean"==typeof f)return u?[r.encode(t)+"="+r.encode(f)]:[t+"="+f];var h=[];if("undefined"==typeof f)return h;var p;if(Array.isArray(s))p=s;else{var d=Object.keys(f);p=c?d.sort(c):d}for(var v=0;v<p.length;++v){var y=p[v];a&&null===f[y]||(h=Array.isArray(f)?h.concat(o.stringify(f[y],n(t,y),n,i,a,u,s,c,l)):h.concat(o.stringify(f[y],t+(l?"."+y:"["+y+"]"),n,i,a,u,s,c,l)))}return h},e.exports=function(e,t){var n,r,i=e,a=t||{},u="undefined"==typeof a.delimiter?o.delimiter:a.delimiter,s="boolean"==typeof a.strictNullHandling?a.strictNullHandling:o.strictNullHandling,c="boolean"==typeof a.skipNulls?a.skipNulls:o.skipNulls,l="boolean"==typeof a.encode?a.encode:o.encode,f="function"==typeof a.sort?a.sort:null,h="undefined"==typeof a.allowDots?!1:a.allowDots;"function"==typeof a.filter?(r=a.filter,i=r("",i)):Array.isArray(a.filter)&&(n=r=a.filter);var p=[];if("object"!=typeof i||null===i)return"";var d;d=a.arrayFormat in o.arrayPrefixGenerators?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var v=o.arrayPrefixGenerators[d];n||(n=Object.keys(i)),f&&n.sort(f);for(var y=0;y<n.length;++y){var m=n[y];c&&null===i[m]||(p=p.concat(o.stringify(i[m],m,v,s,c,l,r,f,h)))}return p.join(u)}},function(e,t){"use strict";var n=function(){for(var e=new Array(256),t=0;256>t;++t)e[t]="%"+((16>t?"0":"")+t.toString(16)).toUpperCase();return e}();t.arrayToObject=function(e,t){for(var n=t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!=typeof e[r]&&(n[r]=e[r]);return n},t.merge=function(e,n,r){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];e[n]=!0}return e}if("object"!=typeof e)return[e].concat(n);var o=e;return Array.isArray(e)&&!Array.isArray(n)&&(o=t.arrayToObject(e,r)),Object.keys(n).reduce(function(e,o){var i=n[o];return Object.prototype.hasOwnProperty.call(e,o)?e[o]=t.merge(e[o],i,r):e[o]=i,e},o)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",o=0;o<t.length;++o){var i=t.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&57>=i||i>=65&&90>=i||i>=97&&122>=i?r+=t.charAt(o):128>i?r+=n[i]:2048>i?r+=n[192|i>>6]+n[128|63&i]:55296>i||i>=57344?r+=n[224|i>>12]+n[128|i>>6&63]+n[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),r+=n[240|i>>18]+n[128|i>>12&63]+n[128|i>>6&63]+n[128|63&i])}return r},t.compact=function(e,n){if("object"!=typeof e||null===e)return e;var r=n||[],o=r.indexOf(e);if(-1!==o)return r[o];if(r.push(e),Array.isArray(e)){for(var i=[],a=0;a<e.length;++a)"undefined"!=typeof e[a]&&i.push(e[a]);return i}for(var u=Object.keys(e),s=0;s<u.length;++s){var c=u[s];e[c]=t.compact(e[c],r)}return e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null===e||"undefined"==typeof e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,n){"use strict";var r=n(505),o={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1};o.parseValues=function(e,t){for(var n={},o=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),i=0;i<o.length;++i){var a=o[i],u=-1===a.indexOf("]=")?a.indexOf("="):a.indexOf("]=")+1;if(-1===u)n[r.decode(a)]="",t.strictNullHandling&&(n[r.decode(a)]=null);else{var s=r.decode(a.slice(0,u)),c=r.decode(a.slice(u+1));Object.prototype.hasOwnProperty.call(n,s)?n[s]=[].concat(n[s]).concat(c):n[s]=c}}return n},o.parseObject=function(e,t,n){if(!e.length)return t;var r,i=e.shift();if("[]"===i)r=[],r=r.concat(o.parseObject(e,t,n));else{r=n.plainObjects?Object.create(null):{};var a="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,u=parseInt(a,10);!isNaN(u)&&i!==a&&String(u)===a&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(r=[],r[u]=o.parseObject(e,t,n)):r[a]=o.parseObject(e,t,n)}return r},o.parseKeys=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^\.\[]+)/g,"[$1]"):e,i=/^([^\[\]]*)/,a=/(\[[^\[\]]*\])/g,u=i.exec(r),s=[];if(u[1]){if(!n.plainObjects&&Object.prototype.hasOwnProperty(u[1])&&!n.allowPrototypes)return;s.push(u[1])}for(var c=0;null!==(u=a.exec(r))&&c<n.depth;)c+=1,(n.plainObjects||!Object.prototype.hasOwnProperty(u[1].replace(/\[|\]/g,""))||n.allowPrototypes)&&s.push(u[1]);return u&&s.push("["+r.slice(u.index)+"]"),o.parseObject(s,t,n)}},e.exports=function(e,t){var n=t||{};if(n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:o.delimiter,n.depth="number"==typeof n.depth?n.depth:o.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:o.arrayLimit,n.parseArrays=n.parseArrays!==!1,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:o.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:o.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:o.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:o.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:o.strictNullHandling,""===e||null===e||"undefined"==typeof e)return n.plainObjects?Object.create(null):{};for(var i="string"==typeof e?o.parseValues(e,n):e,a=n.plainObjects?Object.create(null):{},u=Object.keys(i),s=0;s<u.length;++s){var c=u[s],l=o.parseKeys(c,i[c],n);a=r.merge(a,l,n)}return r.compact(a)}},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,n){if(e&&c.isObject(e)&&e instanceof r)return e;var o=new r;return o.parse(e,t,n),o}function i(e){return c.isString(e)&&(e=o(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return o(e,!1,!0).resolve(t)}function u(e,t){return e?o(e,!1,!0).resolveObject(t):t}var s=n(508),c=n(509);t.parse=o,t.resolve=a,t.resolveObject=u,t.format=i,t.Url=r;var l=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","	"],d=["{","}","|","\\","^","`"].concat(p),v=["'"].concat(d),y=["%","/","?",";","#"].concat(v),m=["/","?","#"],g=255,_=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=n(510);r.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),o=-1!==r&&r<e.indexOf("#")?"?":"#",i=e.split(o),a=/\\/g;i[0]=i[0].replace(a,"/"),e=i.join(o);var u=e;if(u=u.trim(),!n&&1===e.split("#").length){var f=h.exec(u);if(f)return this.path=u,this.href=u,this.pathname=f[1],f[2]?(this.search=f[2],t?this.query=k.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=l.exec(u);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,u=u.substr(p.length)}if(n||p||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===u.substr(0,2);!O||p&&E[p]||(u=u.substr(2),this.slashes=!0)}if(!E[p]&&(O||p&&!x[p])){for(var j=-1,S=0;S<m.length;S++){var T=u.indexOf(m[S]);-1!==T&&(-1===j||j>T)&&(j=T)}var I,A;A=-1===j?u.lastIndexOf("@"):u.lastIndexOf("@",j),-1!==A&&(I=u.slice(0,A),u=u.slice(A+1),this.auth=decodeURIComponent(I)),j=-1;for(var S=0;S<y.length;S++){var T=u.indexOf(y[S]);-1!==T&&(-1===j||j>T)&&(j=T)}-1===j&&(j=u.length),this.host=u.slice(0,j),u=u.slice(j),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var C=this.hostname.split(/\./),S=0,R=C.length;R>S;S++){var N=C[S];if(N&&!N.match(_)){for(var D="",M=0,F=N.length;F>M;M++)D+=N.charCodeAt(M)>127?"x":N[M];if(!D.match(_)){var L=C.slice(0,S),B=C.slice(S+1),q=N.match(b);q&&(L.push(q[1]),B.unshift(q[2])),B.length&&(u="/"+B.join(".")+u),this.hostname=L.join(".");break}}}this.hostname.length>g?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=s.toASCII(this.hostname));var U=this.port?":"+this.port:"",K=this.hostname||"";this.host=K+U,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!w[d])for(var S=0,R=v.length;R>S;S++){var H=v[S];if(-1!==u.indexOf(H)){var V=encodeURIComponent(H);V===H&&(V=escape(H)),u=u.split(H).join(V)}}var $=u.indexOf("#");-1!==$&&(this.hash=u.substr($),u=u.slice(0,$));var z=u.indexOf("?");if(-1!==z?(this.search=u.substr(z),this.query=u.substr(z+1),t&&(this.query=k.parse(this.query)),u=u.slice(0,z)):t&&(this.search="",this.query={}),u&&(this.pathname=u),x[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",G=this.search||"";this.path=U+G}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(i=k.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||x[t])&&o!==!1?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+o+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,o=Object.keys(this),i=0;i<o.length;i++){var a=o[i];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),s=0;s<u.length;s++){var l=u[s];"protocol"!==l&&(n[l]=e[l])}return x[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!x[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var p=f[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||E[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",y=n.search||"";n.path=v+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=g||m||n.host&&e.pathname,b=_,w=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],k=n.protocol&&!x[n.protocol];if(k&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),_=_&&(""===d[0]||""===w[0])),g)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(k){n.hostname=n.host=w.shift();var O=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;O&&(n.auth=O.shift(),n.host=n.hostname=O.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var j=w.slice(-1)[0],S=(n.host||e.host||w.length>1)&&("."===j||".."===j)||""===j,T=0,I=w.length;I>=0;I--)j=w[I],"."===j?w.splice(I,1):".."===j?(w.splice(I,1),T++):T&&(w.splice(I,1),T--);if(!_&&!b)for(;T--;T)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var A=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(k){n.hostname=n.host=A?"":w.length?w.shift():"";var O=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;O&&(n.auth=O.shift(),n.host=n.hostname=O.shift())}return _=_||n.host&&w.length,_&&!A&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){var r;(function(e,o){!function(i){function a(e){throw RangeError(C[e])}function u(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function s(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(P,".");var o=e.split("."),i=u(o,t).join(".");return r+i}function c(e){for(var t,n,r=[],o=0,i=e.length;i>o;)t=e.charCodeAt(o++),t>=55296&&56319>=t&&i>o?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function l(e){return u(e,function(e){var t="";return e>65535&&(e-=65536,t+=D(e>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function f(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:w}function h(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function p(e,t,n){var r=0;for(e=n?N(e/O):e>>1,e+=N(e/t);e>R*x>>1;r+=w)e=N(e/R);return N(r+(R+1)*e/(e+k))}function d(e){var t,n,r,o,i,u,s,c,h,d,v=[],y=e.length,m=0,g=S,_=j;for(n=e.lastIndexOf(T),0>n&&(n=0),r=0;n>r;++r)e.charCodeAt(r)>=128&&a("not-basic"),v.push(e.charCodeAt(r));for(o=n>0?n+1:0;y>o;){for(i=m,u=1,s=w;o>=y&&a("invalid-input"),c=f(e.charCodeAt(o++)),(c>=w||c>N((b-m)/u))&&a("overflow"),m+=c*u,h=_>=s?E:s>=_+x?x:s-_,!(h>c);s+=w)d=w-h,u>N(b/d)&&a("overflow"),u*=d;t=v.length+1,_=p(m-i,t,0==i),N(m/t)>b-g&&a("overflow"),g+=N(m/t),m%=t,v.splice(m++,0,g)}return l(v)}function v(e){var t,n,r,o,i,u,s,l,f,d,v,y,m,g,_,k=[];for(e=c(e),y=e.length,t=S,n=0,i=j,u=0;y>u;++u)v=e[u],128>v&&k.push(D(v));for(r=o=k.length,o&&k.push(T);y>r;){for(s=b,u=0;y>u;++u)v=e[u],v>=t&&s>v&&(s=v);for(m=r+1,s-t>N((b-n)/m)&&a("overflow"),n+=(s-t)*m,t=s,u=0;y>u;++u)if(v=e[u],t>v&&++n>b&&a("overflow"),v==t){for(l=n,f=w;d=i>=f?E:f>=i+x?x:f-i,!(d>l);f+=w)_=l-d,g=w-d,k.push(D(h(d+_%g,0))),l=N(_/g);k.push(D(h(l,0))),i=p(n,m,r==o),n=0,++r}++n,++t}return k.join("")}function y(e){return s(e,function(e){return I.test(e)?d(e.slice(4).toLowerCase()):e})}function m(e){return s(e,function(e){return A.test(e)?"xn--"+v(e):e})}var g=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof o&&o);g.global!==g&&g.window!==g&&g.self!==g||(i=g);var _,b=2147483647,w=36,E=1,x=26,k=38,O=700,j=72,S=128,T="-",I=/^xn--/,A=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=w-E,N=Math.floor,D=String.fromCharCode;_={version:"1.3.2",ucs2:{decode:c,encode:l},decode:d,encode:v,toASCII:m,toUnicode:y},r=function(){return _}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)}).call(t,n(356)(e),function(){return this}())},function(e,t){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(511),t.encode=t.stringify=n(512)},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var s=e.length;u>0&&s>u&&(s=u);for(var c=0;s>c;++c){var l,f,h,p,d=e[c].replace(a,"%20"),v=d.indexOf(r);v>=0?(l=d.substr(0,v),f=d.substr(v+1)):(l=d,f=""),h=decodeURIComponent(l),p=decodeURIComponent(f),n(i,h)?Array.isArray(i[h])?i[h].push(p):i[h]=[i[h],p]:i[h]=p}return i}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(n(e))}).join(t):i+encodeURIComponent(n(e[o]))}).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""}},function(e,t,n){function r(e,t){var n=[],o=!1;return Array.isArray(e)&&t&&(o=!0),Object.keys(e).forEach(function(i){var a,u,s=e[i];a=t?t+"["+(o?"":i)+"]":i,u="object"==typeof s?r(s,a):encodeURIComponent(a)+"="+encodeURIComponent(s),n.push(u)}),n.join("&")}var o=n(510),i=n(514),a=n(507);e.exports=function(e,t){var n=a.parse(e,!0),u=i(!0,{},n.query,"string"==typeof t?o.parse(t):t);return n.search="?"+r(u),a.format(n)}},function(e,t){var n,r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=function(e){"use strict";if(!e||"[object Object]"!==o.call(e)||e.nodeType||e.setInterval)return!1;var t=r.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!i)return!1;var a;for(a in e);return a===n||r.call(e,a)};e.exports=function a(){"use strict";var e,t,r,o,u,s,c=arguments[0],l=1,f=arguments.length,h=!1;for("boolean"==typeof c?(h=c,c=arguments[1]||{},l=2):("object"!=typeof c&&"function"!=typeof c||c==n)&&(c={});f>l;++l)if(null!=(e=arguments[l]))for(t in e)r=c[t],o=e[t],c!==o&&(h&&o&&(i(o)||(u=Array.isArray(o)))?(u?(u=!1,s=r&&Array.isArray(r)?r:[]):s=r&&i(r)?r:{},c[t]=a(h,s,o)):o!==n&&(c[t]=o));return c}},function(e,t,n){function r(e){if(u(e)&&(a(e)||f(e)||c(e.splice)||i(e)||s(e)))return!e.length;if(l(e)){var t=o(e);if(t==p||t==d)return!e.size}for(var n in e)if(y.call(e,n))return!1;return!(g&&h(e).length)}var o=n(379),i=n(319),a=n(326),u=n(321),s=n(472),c=n(302),l=n(325),f=n(327),h=n(313),p="[object Map]",d="[object Set]",v=Object.prototype,y=v.hasOwnProperty,m=v.propertyIsEnumerable,g=!m.call({valueOf:1},"valueOf");e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Response=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(420),u=n(298),s=n(405),c=r(s),l=n(307),f=r(l),h=n(327),p=r(h),d=n(422),v=r(d);t.Response=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,e),t=(0,c["default"])({statusCode:a.StatusCode.Ok,headers:{"Content-Type":"application/json; charset=utf-8"},data:null},t),this.statusCode=t.statusCode,this.addHeaders(t.headers),this.data=t.data}return i(e,[{key:"getHeader",value:function(e){if(e){(0,p["default"])(e)||(e=String(e));for(var t=this.headers||{},n=Object.keys(t),r=0,o=n.length;o>r;r++){var i=n[r];if(i.toLowerCase()===e.toLowerCase())return t[i]}}}},{key:"setHeader",value:function(e,t){if(!e||!t)throw new Error("A name and value must be provided to set a header.");(0,p["default"])(e)||(e=String(e));var n=this.headers||{};(0,p["default"])(t)?n[e]=t:n[e]=JSON.stringify(t),this.headers=n}},{key:"addHeader",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.setHeader(e.name,e.value)}},{key:"addHeaders",value:function(e){var t=this;if(!(0,v["default"])(e))throw new Error("Headers argument must be an object.");var n=Object.keys(e);(0,f["default"])(n,function(n){var r=e[n];t.setHeader(n,r)})}},{key:"removeHeader",value:function(e){if(e){(0,p["default"])(e)||(e=String(e));var t=this.headers||{};delete t[e],this.headers=t}}},{key:"clearHeaders",value:function(){this.headers={}}},{key:"isSuccess",value:function(){return this.statusCode>=200&&this.statusCode<300||302===this.statusCode}},{key:"toJSON",value:function(){var e={statusCode:this.statusCode,headers:this.headers,data:this.data};return e}},{key:"error",get:function(){if(this.isSuccess())return null;var e=this.data||{},t=e.name||e.error,n=e.message||e.description,r=e.debug;return"EntityNotFound"===t||"CollectionNotFound"===t||"AppNotFound"===t||"UserNotFound"===t||"BlobNotFound"===t||"DocumentNotFound"===t||404===this.statusCode?new u.NotFoundError(n,r):"InsufficientCredentials"===t?new u.InsufficientCredentialsError(n,r):"InvalidCredentials"===t?new u.InvalidCredentialsError(n,r):new u.KinveyError(n,r)}}]),e}()},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkRequest=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function w(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:w(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},l=n(424),f=n(433),h=n(298),p=n(420),d=n(516),v=n(507),y=r(v),m=e.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE||"_socialIdentity",g=e.env.KINVEY_MIC_IDENTITY||"kinveyAuth",_=e.env.KINVEY_MIC_TOKEN_PATHNAME||"/oauth/token",b=e.env.KINVEY_USERS_NAMESPACE||"user";t.NetworkRequest=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));
return n.rack=f.NetworkRack.sharedInstance(),n.automaticallyRefreshAuthToken=!0,n}return a(t,e),s(t,[{key:"execute",value:function(){var e=this,n=c(Object.getPrototypeOf(t.prototype),"execute",this).call(this).then(function(){return e.rack.execute(e)}).then(function(e){if(!e)throw new h.NoResponseError;return e instanceof d.Response?e:new d.Response({statusCode:e.statusCode,headers:e.headers,data:e.data})}).then(function(e){if(!e.isSuccess())throw e.error;return e})["catch"](function(n){if(n instanceof h.InvalidCredentialsError&&e.automaticallyRefreshAuthToken){var r=function(){e.automaticallyRefreshAuthToken=!1;var r=e.client.socialIdentity;if(r&&r.identity===g){var o=r.token,i=new t({method:p.HttpMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:p.AuthType.App,url:y["default"].format({protocol:r.client.protocol,host:r.client.host,pathname:_}),properties:e.properties,data:{grant_type:"refresh_token",client_id:o.audience,redirect_uri:r.redirectUri,refresh_token:o.refresh_token}});return i.automaticallyRefreshAuthToken=!1,{v:i.execute().then(function(e){return e.data}).then(function(n){var r=e.client.user,o=r[m];o[o.identity]=n,r[m]=o;var i=new t({method:p.HttpMethod.POST,authType:p.AuthType.App,url:y["default"].format({protocol:e.client.protocol,host:e.client.host,pathname:"/"+b+"/"+e.client.appKey+"/login"}),properties:e.properties,data:r,timeout:e.timeout,client:e.client});return i.automaticallyRefreshAuthToken=!1,i.execute()}).then(function(t){return e.client.user=t.data,e.client.socialIdentity={identity:r.identity,redirectUri:r.redirectUri,token:t.data[m][r.identity],client:r.client},e.execute()})["catch"](function(){throw n})}}}();if("object"===("undefined"==typeof r?"undefined":u(r)))return r.v}throw n}).then(function(t){return e.automaticallyRefreshAuthToken=!0,t})["catch"](function(t){throw e.automaticallyRefreshAuthToken=!0,t});return n}},{key:"cancel",value:function(){var e=this,n=c(Object.getPrototypeOf(t.prototype),"cancel",this).call(this).then(function(){return e.rack.cancel()});return n}}]),t}(l.KinveyRequest)}).call(t,n(289))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(519),i=r(o),a=n(528),u=r(a);t["default"]=(0,u["default"])(i["default"],1),e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(520),i=r(o),a=n(527),u=r(a);t["default"]=(0,i["default"])(u["default"]),e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(t,n,r,o){return e((0,a["default"])(n),t,r,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(521),a=r(i);e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(t,n,r){r=(0,s["default"])(r||a["default"]),t=t||[];var o=(0,l["default"])(t);if(0>=e)return r(null);var i=!1,u=0,c=!1;!function f(){if(i&&0>=u)return r(null);for(;e>u&&!c;){var t=o();if(null===t)return i=!0,void(0>=u&&r(null));u+=1,n(t.value,t.key,(0,h["default"])(function(e){u-=1,e?(r(e),c=!0):f()}))}}()}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(522),a=r(i),u=n(523),s=r(u),c=n(524),l=r(c),f=n(526),h=r(f);e.exports=t["default"]},function(e,t){function n(){}e.exports=n},function(e,t){"use strict";function n(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t,n=-1;if((0,a["default"])(e))return t=e.length,function(){return n++,t>n?{value:e[n],key:n}:null};var r=(0,s["default"])(e);if(r)return function(){var e=r.next();return e.done?null:(n++,{value:e.value,key:n})};var o=(0,l["default"])(e);return t=o.length,function(){n++;var r=o[n];return t>n?{value:e[r],key:r}:null}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(321),a=r(i),u=n(525),s=r(u),c=n(313),l=r(c);e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return n&&e[n]&&e[n]()};var n="function"==typeof Symbol&&Symbol.iterator;e.exports=t["default"]},function(e,t){"use strict";function n(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n,r){r=(0,h["default"])(r||l["default"]),t=t||[];var o=(0,a["default"])(t)||(0,s["default"])(t)?[]:{};e(t,function(e,t,r){n(e,function(e,n){o[t]=n,r(e)})},function(e){r(e,o)})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(321),a=r(i),u=n(525),s=r(u),c=n(522),l=r(c),f=n(523),h=r(f);e.exports=t["default"]},function(e,t){"use strict";function n(e,t){return function(n,r,o){return e(n,t,r,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){(function(t){"use strict";function r(e,t){return 1===arguments.length?o(e):i(e,t)}function o(e){return JSON.parse(l.getItem(e))}function i(e,t){try{return l.setItem(e,JSON.stringify(t)),!0}catch(n){return!1}}function a(e){return l.removeItem(e)}function u(){return l.clear()}var s=n(530),c=n(531),l="localStorage"in t&&t.localStorage?t.localStorage:s;r.set=i,r.get=o,r.remove=a,r.clear=u,r.on=c.on,r.off=c.off,e.exports=r}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){return e in a?a[e]:null}function r(e,t){return a[e]=t,!0}function o(e){var t=e in a;return t?delete a[e]:!1}function i(){return a={},!0}var a={};e.exports={getItem:n,setItem:r,removeItem:o,clear:i}},function(e,t){(function(t){"use strict";function n(){t.addEventListener?t.addEventListener("storage",r,!1):t.attachEvent?t.attachEvent("onstorage",r):t.onstorage=r}function r(e){function n(t){t(JSON.parse(e.newValue),JSON.parse(e.oldValue),e.url||e.uri)}e||(e=t.event);var r=a[e.key];r&&r.forEach(n)}function o(e,t){a[e]?a[e].push(t):a[e]=[t],u===!1&&n()}function i(e,t){var n=a[e];n.length>1?n.splice(n.indexOf(t),1):a[e]=[]}var a={},u=!1;e.exports={on:o,off:i}}).call(t,function(){return this}())},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Command=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(418),u=n(420),s=n(298),c=n(327),l=r(c),f=e.env.KINVEY_RPC_NAMESPACE||"rpc";t.Command=function(){function e(){o(this,e)}return i(e,null,[{key:"execute",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=a.Client.sharedInstance();if(!e)throw new s.KinveyError("A command is required.");if(!(0,l["default"])(e))throw new s.KinveyError("Command must be a string.");return r.executeNetworkRequest({method:u.HttpMethod.POST,pathname:"/"+f+"/"+n.client.appKey+"/custom/"+e,properties:n.properties,auth:r.defaultAuth(),data:t,timeout:n.timeout}).then(function(e){return e.data})}}]),e}()}).call(t,n(289))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.DataStore=t.DataStoreType=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(534),a=n(538),u=n(552),s=n(553),c=n(537),l={Sync:"Sync",Cache:"Cache",Network:"Network",User:"User",File:"File"};Object.freeze(l),t.DataStoreType=l;t.DataStore=function(){function e(){r(this,e)}return o(e,null,[{key:"getInstance",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?l.Cache:arguments[1],n=void 0;switch(t){case l.Sync:n=new i.SyncStore(e);break;case l.Network:n=new a.NetworkStore(e);break;case l.User:n=new u.UserStore;break;case l.File:n=new s.FileStore;break;case l.Cache:default:n=new c.CacheStore(e)}return n}}]),e}()},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SyncStore=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function w(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:w(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=n(535),l=r(c),f=n(537),h=n(423),p=n(304),d=n(420),v=n(298),y=n(305),m=n(492),g=n(507),_=r(g),b=e.env.KINVEY_ID_ATTRIBUTE||"_id";t.SyncStore=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),u(t,[{key:"find",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(m.Log.debug("Retrieving the entities in the "+this.name+" collection.",e),e&&!(e instanceof y.Query))return l["default"].reject(new v.KinveyError("Invalid query. It must be an instance of the Kinvey.Query class."));var r=new h.LocalRequest({method:d.HttpMethod.GET,url:_["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:n.properties,query:e,timeout:n.timeout,client:this.client}),o=r.execute().then(function(e){return e.data});return o.then(function(e){m.Log.info("Retrieved the entities in the "+t.name+" collection.",e)})["catch"](function(e){m.Log.error("Failed to retrieve the entities in the "+t.name+" collection.",e)}),o}},{key:"group",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(m.Log.debug("Grouping the entities in the "+this.name+" collection.",e,n),!(e instanceof p.Aggregation))return l["default"].reject(new v.KinveyError("Invalid aggregation. It must be an instance of the Kinvey.Aggregation class."));var r=new h.LocalRequest({method:d.HttpMethod.GET,url:_["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/_group"}),properties:n.properties,data:e.toJSON(),timeout:n.timeout,client:this.client}),o=r.execute().then(function(e){return e.data});return o.then(function(e){m.Log.info("Grouped the entities in the "+t.name+" collection.",e)})["catch"](function(e){m.Log.error("Failed to group the entities in the "+t.name+" collection.",e)}),o}},{key:"count",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(m.Log.debug("Counting the number of entities in the "+this.name+" collection.",e),e&&!(e instanceof y.Query))return l["default"].reject(new v.KinveyError("Invalid query. It must be an instance of the Kinvey.Query class."));var r=new h.LocalRequest({method:d.HttpMethod.GET,url:_["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/_count"}),properties:n.properties,query:e,timeout:n.timeout,client:this.client}),o=r.execute().then(function(e){return e.data});return o.then(function(e){m.Log.info("Counted the number of entities in the "+t.name+" collection.",e)})["catch"](function(e){m.Log.error("Failed to count the number of entities in the "+t.name+" collection.",e)}),o}},{key:"findById",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!e)return m.Log.warn("No id was provided to retrieve an entity.",e),l["default"].resolve(null);m.Log.debug("Retrieving the entity in the "+this.name+" collection with id = "+e+".");var r=new h.LocalRequest({method:d.HttpMethod.GET,url:_["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/"+e}),properties:n.properties,timeout:n.timeout,client:this.client}),o=r.execute().then(function(e){return e.data});return o.then(function(n){m.Log.info("Retrieved the entity in the "+t.name+" collection with id = "+e+".",n)})["catch"](function(n){m.Log.error("Failed to retrieve the entity in the "+t.name+" collection with id = "+e+".",n)}),o}},{key:"save",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!e)return m.Log.warn("No entity was provided to be saved.",e),l["default"].resolve(null);m.Log.debug("Saving the entity(s) to the "+this.name+" collection.",e);var r=new h.LocalRequest({method:d.HttpMethod.POST,url:_["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:n.properties,data:e,timeout:n.timeout,client:this.client});e[b]&&(r.method=d.HttpMethod.PUT,r.url=_["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/"+e[b]}));var o=r.execute().then(function(e){return t._sync(e.data,n).then(function(){return e.data})});return o.then(function(e){m.Log.info("Saved the entity(s) to the "+t.name+" collection.",e)})["catch"](function(e){m.Log.error("Failed to save the entity(s) to the "+t.name+" collection.",e)}),o}},{key:"remove",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(m.Log.debug("Removing the entities in the "+this.name+" collection.",e),e&&!(e instanceof y.Query))return l["default"].reject(new v.KinveyError("Invalid query. It must be an instance of the Kinvey.Query class."));var r=new h.LocalRequest({method:d.HttpMethod.DELETE,url:_["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:n.properties,query:e,timeout:n.timeout,client:this.client}),o=r.execute().then(function(e){return t._sync(e.data.entities,n).then(function(){return e.data})});return o.then(function(e){m.Log.info("Removed the entities in the "+t.name+" collection.",e)})["catch"](function(e){m.Log.error("Failed to remove the entities in the "+t.name+" collection.",e)}),o}},{key:"removeById",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!e)return m.Log.warn("No id was provided to be removed.",e),l["default"].resolve(null);m.Log.debug("Removing an entity in the "+this.name+" collection with id = "+e+".");var r=new h.LocalRequest({method:d.HttpMethod.DELETE,url:_["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/"+e}),properties:n.properties,timeout:n.timeout,client:this.client}),o=r.execute().then(function(e){return t._sync(e.data.entities,n).then(function(){return e.data})});return o.then(function(n){m.Log.info("Removed the entity in the "+t.name+" collection with id = "+e+".",n)})["catch"](function(n){m.Log.error("Failed to remove the entity in the "+t.name+" collection with id = "+e+".",n)}),o}},{key:"pull",value:function(e){var n=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=this.syncCount(null,r).then(function(o){if(o>0)throw new v.KinveyError("Unable to pull data. You must push the pending sync items first.","Call store.push() to push the pending sync items before you pull new data.");return s(Object.getPrototypeOf(t.prototype),"find",n).call(n,e,r)}).then(function(e){return e.networkPromise});return o}}]),t}(f.CacheStore)}).call(t,n(289))},function(e,t,n){(function(t,n,r){!function(t){e.exports=t()}(function(){var e,o,i;return function a(e,t,n){function r(i,u){if(!t[i]){if(!e[i]){var s="function"==typeof _dereq_&&_dereq_;if(!u&&s)return s(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[i]={exports:{}};e[i][0].call(l.exports,function(t){var n=e[i][1][t];return r(n?n:t)},l,l.exports,a,e,t,n)}return t[i].exports}for(var o="function"==typeof _dereq_&&_dereq_,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t,n){"use strict";t.exports=function(e){function t(e){var t=new n(e),r=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),r}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,n,r){"use strict";function o(){this._isTickUsed=!1,this._lateQueue=new f(16),this._normalQueue=new f(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=l}function i(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function a(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function u(e){this._normalQueue._pushOne(e),this._queueTick()}var s;try{throw new Error}catch(c){s=c}var l=e("./schedule"),f=e("./queue"),h=e("./util");o.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},o.prototype.disableTrampolineIfNecessary=function(){h.hasDevTools&&(this._trampolineEnabled=!1)},o.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},o.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},o.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},h.hasDevTools?(o.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?i.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},o.prototype.invoke=function(e,t,n){this._trampolineEnabled?a.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},o.prototype.settlePromises=function(e){this._trampolineEnabled?u.call(this,e):this._schedule(function(){e._settlePromises()})}):(o.prototype.invokeLater=i,o.prototype.invoke=a,o.prototype.settlePromises=u),o.prototype.invokeFirst=function(e,t,n){this._normalQueue.unshift(e,t,n),this._queueTick()},o.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},o.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},o.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},o.prototype._reset=function(){this._isTickUsed=!1},n.exports=o,n.exports.firstLineError=s},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var o=!1,i=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(i,i,null,this,e)},u=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},s=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(i){o||(o=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var c=n(i),l=new e(t);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(c),c instanceof e){var h={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:c};f._then(t,a,void 0,l,h),c._then(u,s,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(f);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";function r(){try{Promise===i&&(Promise=o)}catch(e){}return i}var o;"undefined"!=typeof Promise&&(o=Promise);var i=e("./promise")();i.noConflict=r,t.exports=i},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var o=r(null),i=r(null);o[" size"]=i[" size"]=0}t.exports=function(t){function n(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var o="Object "+u.classString(e)+" has no method '"+u.toString(n)+"'";throw new t.TypeError(o)}return r}function r(e){var t=this.pop(),r=n(e,t);return r.apply(e,this)}function o(e){return e[this]}function i(e){var t=+this;return 0>t&&(t=Math.max(0,t+e.length)),e[t]}var a,u=e("./util"),s=u.canEvaluate;u.isIdentifier;t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(r,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=i;else if(s){var r=a(e);t=null!==r?r:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,o){var i=e("./util"),a=i.tryCatch,u=i.errorObj,s=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e.isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n.isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=a(e).call(this._boundValue());r===u&&(this._attachExtraTrace(r.e),s.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){function n(e,n,u){return function(s){var c=u._boundValue();e:for(var l=0;l<e.length;++l){var f=e[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(s instanceof f)return i(n).call(c,s)}else if("function"==typeof f){var h=i(f).call(c,s);if(h===a)return h;if(h)return i(n).call(c,s)}else if(r.isObject(s)){for(var p=o(f),d=0;d<p.length;++d){var v=p[d];if(f[v]!=s[v])continue e}return i(n).call(c,s)}}return t}}var r=e("./util"),o=e("./es5").keys,i=r.tryCatch,a=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(r())}function n(){return o?new t:void 0}function r(){var e=i.length-1;return e>=0?i[e]:void 0}var o=!1,i=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,i.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=i.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=n,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var n=e.prototype._pushContext,i=e.prototype._popContext,a=e._peekContext,u=e.prototype._peekContext,s=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=i,e._peekContext=a,e.prototype._peekContext=u,e.prototype._promiseCreated=s,o=!1},o=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=r,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(e,n,r){"use strict";n.exports=function(n,r){function o(e,t){return{promise:t}}function i(){return!1}function a(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+B.toString(e));r._attachCancellationCallback(e)})}catch(o){return o}}function u(e){if(!this.isCancellable())return this;var t=this._onCancel();void 0!==t?B.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function s(){return this._onCancelField}function c(e){this._onCancelField=e}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(e,t){if(0!==(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function h(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function p(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function d(){this._trace=new C(this._peekContext())}function v(e,t){if(q(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=k(e);B.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),B.notEnumerableProp(e,"__stackCleaned__",!0)}}}function y(e,t,n,r,o){if(void 0===e&&null!==t&&Y){if(void 0!==o&&o._returnedNonUndefined())return;var i=r._bitField;if(0===(65535&i))return;n&&(n+=" ");var a="a promise was created in a "+n+"handler but was not returned from it";r._warn(a,!0,t)}}function m(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),g(n)}function g(e,t,r){if(oe.warnings){var o,i=new L(e);if(t)r._attachExtraTrace(i);else if(oe.longStackTraces&&(o=n._peekContext()))o.attachExtraTrace(i);else{var a=k(i);i.stack=a.message+"\n"+a.stack.join("\n")}Z("warning",i)||O(i,"",!0)}}function _(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function b(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function w(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],o=t.length-1,i=t[o],a=-1,u=r.length-1;u>=0;--u)if(r[u]===i){a=u;break}for(var u=a;u>=0;--u){var s=r[u];if(t[o]!==s)break;t.pop(),o--}t=r}}function E(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],o="    (No stack trace)"===r||K.test(r),i=o&&te(r);o&&!i&&(V&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function x(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||K.test(r))break}return n>0&&(t=t.slice(n)),t}function k(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?x(e):["    (No stack trace)"],{message:n,stack:E(t)}}function O(e,t,n){if("undefined"!=typeof console){var r;if(B.isObject(e)){var o=e.stack;r=t+H(o,e)}else r=t+String(e);"function"==typeof D?D(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function j(e,t,n,r){var o=!1;try{"function"==typeof t&&(o=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(i){F.throwLater(i)}"unhandledRejection"===e?Z(e,n,r)||o||O(n,"Unhandled rejection "):Z(e,r)}function S(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():B.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t))try{var r=JSON.stringify(e);t=r}catch(o){}0===t.length&&(t="(empty array)")}return"(<"+T(t)+">, no stack trace)"}function T(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function I(){return"function"==typeof re}function A(e){var t=e.match(ne);return t?{fileName:t[1],line:parseInt(t[2],10)}:void 0}function P(e,t){if(I()){for(var n,r,o=e.stack.split("\n"),i=t.stack.split("\n"),a=-1,u=-1,s=0;s<o.length;++s){var c=A(o[s]);if(c){n=c.fileName,a=c.line;break}}for(var s=0;s<i.length;++s){var c=A(i[s]);if(c){r=c.fileName,u=c.line;break}}0>a||0>u||!n||!r||n!==r||a>=u||(te=function(e){if(U.test(e))return!0;var t=A(e);return!!(t&&t.fileName===n&&a<=t.line&&t.line<=u)})}}function C(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);re(this,C),t>32&&this.uncycle()}var R,N,D,M=n._getDomain,F=n._async,L=e("./errors").Warning,B=e("./util"),q=B.canAttachTrace,U=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,K=null,H=null,V=!1,$=!(0==B.env("BLUEBIRD_DEBUG")),z=!(0==B.env("BLUEBIRD_WARNINGS")||!$&&!B.env("BLUEBIRD_WARNINGS")),G=!(0==B.env("BLUEBIRD_LONG_STACK_TRACES")||!$&&!B.env("BLUEBIRD_LONG_STACK_TRACES")),Y=0!=B.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(z||!!B.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),F.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){j("rejectionHandled",R,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),j("unhandledRejection",N,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return g(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=M();N="function"==typeof e?null===t?e:t.bind(e):void 0},n.onUnhandledRejectionHandled=function(e){var t=M();R="function"==typeof e?null===t?e:t.bind(e):void 0};var J=function(){};n.longStackTraces=function(){if(F.haveItemsQueued()&&!oe.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");
if(!oe.longStackTraces&&I()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;oe.longStackTraces=!0,J=function(){if(F.haveItemsQueued()&&!oe.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,r.deactivateLongStackTraces(),F.enableTrampoline(),oe.longStackTraces=!1},n.prototype._captureStackTrace=d,n.prototype._attachExtraTrace=v,r.activateLongStackTraces(),F.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return oe.longStackTraces&&I()};var W=function(){try{var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),B.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!B.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),Q=function(){return B.isNode?function(){return t.emit.apply(t,arguments)}:B.global?function(e){var t="on"+e.toLowerCase(),n=B.global[t];return n?(n.apply(B.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),X={promiseCreated:o,promiseFulfilled:o,promiseRejected:o,promiseResolved:o,promiseCancelled:o,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:o},Z=function(e){var t=!1;try{t=Q.apply(null,arguments)}catch(n){F.throwLater(n),t=!0}var r=!1;try{r=W(e,X[e].apply(null,arguments))}catch(n){F.throwLater(n),r=!0}return r||t};n.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&J()),"warnings"in e){var t=e.warnings;oe.warnings=!!t,Y=oe.warnings,B.isObject(t)&&"wForgottenReturn"in t&&(Y=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!oe.cancellation){if(F.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=l,n.prototype._propagateFrom=f,n.prototype._onCancel=s,n.prototype._setOnCancel=c,n.prototype._attachCancellationCallback=u,n.prototype._execute=a,ee=f,oe.cancellation=!0}"monitoring"in e&&(e.monitoring&&!oe.monitoring?(oe.monitoring=!0,n.prototype._fireEvent=Z):!e.monitoring&&oe.monitoring&&(oe.monitoring=!1,n.prototype._fireEvent=i))},n.prototype._fireEvent=i,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(r){return r}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var ee=h,te=function(){return!1},ne=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;B.inherits(C,Error),r.CapturedTrace=C,C.prototype.uncycle=function(){var e=this._length;if(!(2>e)){for(var t=[],n={},r=0,o=this;void 0!==o;++r)t.push(o),o=o._parent;e=this._length=r;for(var r=e-1;r>=0;--r){var i=t[r].stack;void 0===n[i]&&(n[i]=r)}for(var r=0;e>r;++r){var a=t[r].stack,u=n[a];if(void 0!==u&&u!==r){u>0&&(t[u-1]._parent=void 0,t[u-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var s=r>0?t[r-1]:this;e-1>u?(s._parent=t[u+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,l=r-2;l>=0;--l)t[l]._length=c,c++;return}}}},C.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=k(e),n=t.message,r=[t.stack],o=this;void 0!==o;)r.push(E(o.stack.split("\n"))),o=o._parent;w(r),b(r),B.notEnumerableProp(e,"stack",_(n,r)),B.notEnumerableProp(e,"__stackCleaned__",!0)}};var re=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():S(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,K=e,H=t;var n=Error.captureStackTrace;return te=function(e){return U.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return K=/@/,H=t,V=!0,function(e){e.stack=(new Error).stack};var o;try{throw new Error}catch(i){o="stack"in i}return"stack"in r||!o||"number"!=typeof Error.stackTraceLimit?(H=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?S(t):t.toString()},null):(K=e,H=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(D=function(e){console.warn(e)},B.isNode&&t.stderr.isTTY?D=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:B.isNode||"string"!=typeof(new Error).stack||(D=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var oe={warnings:z,longStackTraces:!1,cancellation:!1,monitoring:!1};return G&&n.longStackTraces(),{longStackTraces:function(){return oe.longStackTraces},warnings:function(){return oe.warnings},cancellation:function(){return oe.cancellation},monitoring:function(){return oe.monitoring},propagateFromFunction:function(){return ee},boundValueFunction:function(){return p},checkForgottenReturns:y,setBounds:P,warn:g,deprecated:m,CapturedTrace:C,fireDomEvent:W,fireGlobalEvent:Q}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var o=function(){return r};return this.caught(n,o)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){function n(){return i(this)}function r(e,n){return o(e,n,t,t)}var o=e.reduce,i=e.all;e.prototype.each=function(e){return this.mapSeries(e)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return o(this,e,t,t)},e.each=function(e,t){return r(e,t)._then(n,void 0,void 0,e,void 0)},e.mapSeries=r}},{}],12:[function(e,t,n){"use strict";function r(e,t){function n(r){return this instanceof n?(f(this,"message","string"==typeof r?r:t),f(this,"name",e),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return l(n,Error),n}function o(e){return this instanceof o?(f(this,"name","OperationalError"),f(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(f(this,"message",e.message),f(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new o(e)}var i,a,u=e("./es5"),s=u.freeze,c=e("./util"),l=c.inherits,f=c.notEnumerableProp,h=r("Warning","warning"),p=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{i=TypeError,a=RangeError}catch(y){i=r("TypeError","type error"),a=r("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(v.prototype[m[g]]=Array.prototype[m[g]]);u.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var _=0;v.prototype.toString=function(){var e=Array(4*_+1).join(" "),t="\n"+e+"AggregateError of:\n";_++,e=Array(4*_+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",o=r.split("\n"),i=0;i<o.length;++i)o[i]=e+o[i];r=o.join("\n"),t+=r+"\n"}return _--,t},l(o,Error);var b=Error.__BluebirdErrorTypes__;b||(b=s({CancellationError:p,TimeoutError:d,OperationalError:o,RejectionError:o,AggregateError:v}),u.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:i,RangeError:a,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var o={}.hasOwnProperty,i={}.toString,a={}.constructor.prototype,u=function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t},s=function(e,t){return{value:e[t]}},c=function(e,t,n){return e[t]=n.value,e},l=function(e){return e},f=function(e){try{return Object(e).constructor.prototype}catch(t){return a}},h=function(e){try{return"[object Array]"===i.call(e)}catch(t){return!1}};t.exports={isArray:h,keys:u,names:u,defineProperty:c,getDescriptor:s,freeze:l,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,o){return n(e,r,o,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function o(e){this.finallyHandler=e}function i(e,t){return null!=e.cancelPromise?(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0):!1}function a(){return s.call(this,this.promise._target()._settledValue())}function u(e){return i(this,e)?void 0:(f.e=e,f)}function s(e){var r=this.promise,s=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?s.call(r._boundValue()):s.call(r._boundValue(),e);if(void 0!==c){r._setReturnedNonUndefined();var h=n(c,r);if(h instanceof t){if(null!=this.cancelPromise){if(h.isCancelled()){var p=new l("late cancellation observer");return r._attachExtraTrace(p),f.e=p,f}h.isPending()&&h._attachCancellationCallback(new o(this))}return h._then(a,u,void 0,this,void 0)}}}return r.isRejected()?(i(this),f.e=e,f):(i(this),e)}var c=e("./util"),l=t.CancellationError,f=c.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){i(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,o){return"function"!=typeof e?this.then():this._then(n,o,void 0,new r(this,t,e),void 0)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,s,s)},t.prototype.tap=function(e){return this._passThrough(e,1,s)},r}},{"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){function u(e,n,r){for(var i=0;i<n.length;++i){r._pushContext();var a=p(n[i])(e);if(r._popContext(),a===h){r._pushContext();var u=t.reject(h.e);return r._popContext(),u}var s=o(a,r);if(s instanceof t)return s}return null}function s(e,n,o,i){var a=this._promise=new t(r);a._captureStackTrace(),a._setOnCancel(this),this._stack=i,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(d):d,this._yieldedPromise=null}var c=e("./errors"),l=c.TypeError,f=e("./util"),h=f.errorObj,p=f.tryCatch,d=[];f.inherits(s,i),s.prototype._isResolved=function(){return null===this._promise},s.prototype._cleanup=function(){this._promise=this._generator=null},s.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),e=p(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=p(this._generator["throw"]).call(this._generator,r),this._promise._popContext(),e===h&&e.e===r&&(e=null)}var o=this._promise;this._cleanup(),e===h?o._rejectCallback(e.e,!1):o.cancel()}},s.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},s.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator["throw"]).call(this._generator,e);this._promise._popContext(),this._continue(t)},s.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,this._promiseCancelled(),e.cancel()}},s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},s.prototype._continue=function(e){var n=this._promise;if(e===h)return this._cleanup(),n._rejectCallback(e.e,!1);var r=e.value;if(e.done===!0)return this._cleanup(),n._resolveCallback(r);var i=o(r,this._promise);if(!(i instanceof t)&&(i=u(i,this._yieldHandlers,this._promise),null===i))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));i=i._target();var a=i._bitField;0===(50397184&a)?(this._yieldedPromise=i,i._proxy(this,null)):0!==(33554432&a)?this._promiseFulfilled(i._value()):0!==(16777216&a)?this._promiseRejected(i._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=s,o=(new Error).stack;return function(){var t=e.apply(this,arguments),i=new r(void 0,void 0,n,o),a=i.promise();return i._generator=t,i._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new l("expecting a function but got "+f.classString(e));d.push(e)},t.spawn=function(e){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new s(e,this),o=r.promise();return r._run(t.spawn),o}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,o){var i=e("./util");i.canEvaluate,i.tryCatch,i.errorObj;t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var r}var o=[].slice.call(arguments);e&&o.pop();var r=new n(o).promise();return void 0!==e?r.spread(e):r}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){function u(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var o=c();this._callback=null===o?t:o.bind(t),this._preservedValues=r===i?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:p,this._init$(void 0,-2)}function s(e,t,n,o){if("function"!=typeof t)return r("expecting a function but got "+l.classString(t));var i="object"==typeof n&&null!==n?n.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new u(e,t,i,o).promise()}var c=t._getDomain,l=e("./util"),f=l.tryCatch,h=l.errorObj,p=[];l.inherits(u,n),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(e,n){var r=this._values,i=this.length(),u=this._preservedValues,s=this._limit;if(0>n){if(n=-1*n-1,r[n]=e,s>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(s>=1&&this._inFlight>=s)return r[n]=e,this._queue.push(n),!1;null!==u&&(u[n]=e);var c=this._promise,l=this._callback,p=c._boundValue();c._pushContext();var d=f(l).call(p,e,n,i),v=c._popContext();if(a.checkForgottenReturns(d,v,null!==u?"Promise.filter":"Promise.map",c),d===h)return this._reject(d.e),!0;var y=o(d,this._promise);if(y instanceof t){y=y._target();var m=y._bitField;if(0===(50397184&m))return s>=1&&this._inFlight++,r[n]=y,y._proxy(this,-1*(n+1)),!1;if(0===(33554432&m))return 0!==(16777216&m)?(this._reject(y._reason()),!0):(this._cancel(),!0);d=y._value()}r[n]=d}var g=++this._totalResolved;return g>=i?(null!==u?this._filter(r,u):this._resolve(r),!0):!1},u.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},u.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),o=0,i=0;n>i;++i)e[i]&&(r[o++]=t[i]);r.length=o,this._resolve(r)},u.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return s(this,e,t,null)},t.map=function(e,t,n,r){return s(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i){var a=e("./util"),u=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var o=u(e).apply(this,arguments),a=r._popContext();return i.checkForgottenReturns(o,a,"Promise.method",r),r._resolveFromSyncValue(o),r}},t.attempt=t["try"]=function(e){if("function"!=typeof e)return o("expecting a function but got "+a.classString(e));var r=new t(n);r._captureStackTrace(),r._pushContext();var s;if(arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];s=a.isArray(c)?u(e).apply(l,c):u(e).call(l,c)}else s=u(e)();var f=r._popContext();return i.checkForgottenReturns(s,f,"Promise.try",r),r._resolveFromSyncValue(s),r},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";function r(e){return e instanceof Error&&l.getPrototypeOf(e)===Error.prototype}function o(e){var t;if(r(e)){t=new c(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var n=l.keys(e),o=0;o<n.length;++o){var i=n[o];f.test(i)||(t[i]=e[i])}return t}return a.markAsOriginatingFromRejection(e),e}function i(e,t){return function(n,r){if(null!==e){if(n){var i=o(u(n));e._attachExtraTrace(i),e._reject(i)}else if(t){var a=[].slice.call(arguments,1);e._fulfill(a)}else e._fulfill(r);e=null}}}var a=e("./util"),u=a.maybeWrapAsError,s=e("./errors"),c=s.OperationalError,l=e("./es5"),f=/^(?:name|message|stack|cause)$/;t.exports=i},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){function n(e,t){var n=this;if(!i.isArray(e))return r.call(n,e,t);var o=u(t).apply(n._boundValue(),[null].concat(e));o===s&&a.throwLater(o.e)}function r(e,t){var n=this,r=n._boundValue(),o=void 0===e?u(t).call(r,null):u(t).call(r,null,e);o===s&&a.throwLater(o.e)}function o(e,t){var n=this;if(!e){var r=new Error(e+"");r.cause=e,e=r}var o=u(t).call(n._boundValue(),e);o===s&&a.throwLater(o.e)}var i=e("./util"),a=t._async,u=i.tryCatch,s=i.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var i=r;void 0!==t&&Object(t).spread&&(i=n),this._then(i,o,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,n,r){"use strict";n.exports=function(){function n(){}function r(e,t){if("function"!=typeof t)throw new g("expecting a function but got "+p.classString(t));if(e.constructor!==o)throw new g("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function o(e){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,e!==b&&(r(this,e),this._resolveFromExecutor(e)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function i(e){this.promise._resolveCallback(e)}function a(e){this.promise._rejectCallback(e,!1)}function u(e){var t=new o(b);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var s,c=function(){return new g("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new o.PromiseInspection(this._target())},f=function(e){return o.reject(new g(e))},h={},p=e("./util");s=p.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},p.notEnumerableProp(o,"_getDomain",s);var d=e("./es5"),v=e("./async"),y=new v;d.defineProperty(o,"_async",{value:y});var m=e("./errors"),g=o.TypeError=m.TypeError;o.RangeError=m.RangeError;var _=o.CancellationError=m.CancellationError;o.TimeoutError=m.TimeoutError,o.OperationalError=m.OperationalError,o.RejectionError=m.OperationalError,o.AggregateError=m.AggregateError;var b=function(){},w={},E={},x=e("./thenables")(o,b),k=e("./promise_array")(o,b,x,f,n),O=e("./context")(o),j=O.create,S=e("./debuggability")(o,O),T=(S.CapturedTrace,e("./finally")(o,x)),I=e("./catch_filter")(E),A=e("./nodeback"),P=p.errorObj,C=p.tryCatch;return o.prototype.toString=function(){return"[object Promise]"},o.prototype.caught=o.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),o=0;for(n=0;t-1>n;++n){var i=arguments[n];if(!p.isObject(i))return f("expecting an object but got "+p.classString(i));r[o++]=i}return r.length=o,e=arguments[n],this.then(void 0,I(r,e,this))}return this.then(void 0,e)},o.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},o.prototype.then=function(e,t){if(S.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+p.classString(e);arguments.length>1&&(n+=", "+p.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},o.prototype.done=function(e,t){var n=this._then(e,t,void 0,void 0,void 0);n._setIsFinal()},o.prototype.spread=function(e){return"function"!=typeof e?f("expecting a function but got "+p.classString(e)):this.all()._then(e,void 0,void 0,w,void 0)},o.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},o.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new k(this).promise()},o.prototype.error=function(e){return this.caught(p.originatesFromRejection,e)},o.is=function(e){return e instanceof o},o.fromNode=o.fromCallback=function(e){var t=new o(b);t._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,r=C(e)(A(t,n));return r===P&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},o.all=function(e){return new k(e).promise()},o.cast=function(e){var t=x(e);return t instanceof o||(t=new o(b),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},o.resolve=o.fulfilled=o.cast,o.reject=o.rejected=function(e){var t=new o(b);return t._captureStackTrace(),t._rejectCallback(e,!0),t},o.setScheduler=function(e){if("function"!=typeof e)throw new g("expecting a function but got "+p.classString(e));var t=y._schedule;return y._schedule=e,t},o.prototype._then=function(e,t,n,r,i){var a=void 0!==i,u=a?i:new o(b),c=this._target(),l=c._bitField;a||(u._propagateFrom(this,3),u._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&l)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,u));var f=s();if(0!==(50397184&l)){var h,p,d=c._settlePromiseCtx;0!==(33554432&l)?(p=c._rejectionHandler0,h=e):0!==(16777216&l)?(p=c._fulfillmentHandler0,h=t,c._unsetRejectionIsUnhandled()):(d=c._settlePromiseLateCancellationObserver,p=new _("late cancellation observer"),c._attachExtraTrace(p),h=t),y.invoke(d,c,{handler:null===f?h:"function"==typeof h&&f.bind(h),promise:u,receiver:r,value:p})}else c._addCallbacks(e,t,u,r,f);return u},o.prototype._length=function(){return 65535&this._bitField},o.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},o.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},o.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},o.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},o.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},o.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},o.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},o.prototype._isFinal=function(){return(4194304&this._bitField)>0},o.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},o.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},o.prototype._setAsyncGuaranteed=function(){this._bitField=134217728|this._bitField},o.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==h)return void 0===t&&this._isBound()?this._boundValue():t},o.prototype._promiseAt=function(e){return this[4*e-4+2]},o.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},o.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},o.prototype._boundValue=function(){},o.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,r=e._promise0,o=e._receiverAt(0);void 0===o&&(o=h),this._addCallbacks(t,n,r,o,null)},o.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),o=e._promiseAt(t),i=e._receiverAt(t);void 0===i&&(i=h),this._addCallbacks(n,r,o,i,null)},o.prototype._addCallbacks=function(e,t,n,r,o){var i=this._length();if(i>=65531&&(i=0,this._setLength(0)),0===i)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===o?e:o.bind(e)),"function"==typeof t&&(this._rejectionHandler0=null===o?t:o.bind(t));else{var a=4*i-4;this[a+2]=n,this[a+3]=r,"function"==typeof e&&(this[a+0]=null===o?e:o.bind(e)),"function"==typeof t&&(this[a+1]=null===o?t:o.bind(t))}return this._setLength(i+1),i},o.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},o.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(c(),!1);var n=x(e,this);if(!(n instanceof o))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(c());var i=r._bitField;if(0===(50397184&i)){var a=this._length();a>0&&r._migrateCallback0(this);for(var u=1;a>u;++u)r._migrateCallbackAt(this,u);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&i))this._fulfill(r._value());else if(0!==(16777216&i))this._reject(r._reason());else{var s=new _("late cancellation observer");r._attachExtraTrace(s),this._reject(s)}}},o.prototype._rejectCallback=function(e,t,n){var r=p.ensureErrorObject(e),o=r===e;if(!o&&!n&&S.warnings()){var i="a promise was rejected with a non-error: "+p.classString(e);this._warn(i,!0)}this._attachExtraTrace(r,t?o:!1),this._reject(e)},o.prototype._resolveFromExecutor=function(e){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)},o.prototype._settlePromiseFromHandler=function(e,t,n,r){var o=r._bitField;if(0===(65536&o)){r._pushContext();var i;t===w?n&&"number"==typeof n.length?i=C(e).apply(this._boundValue(),n):(i=P,i.e=new g("cannot .spread() a non-array: "+p.classString(n))):i=C(e).call(t,n);var a=r._popContext();o=r._bitField,0===(65536&o)&&(i===E?r._reject(n):i===P?r._rejectCallback(i.e,!1):(S.checkForgottenReturns(i,a,"",r,this),r._resolveCallback(i)))}},o.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},o.prototype._followee=function(){return this._rejectionHandler0},o.prototype._setFollowee=function(e){this._rejectionHandler0=e},o.prototype._settlePromise=function(e,t,r,i){var a=e instanceof o,u=this._bitField,s=0!==(134217728&u);0!==(65536&u)?(a&&e._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=e,C(t).call(r,i)===P&&e._reject(P.e)):t===l?e._fulfill(l.call(r)):r instanceof n?r._promiseCancelled(e):a||e instanceof k?e._cancel():r.cancel()):"function"==typeof t?a?(s&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,i,e)):t.call(r,i,e):r instanceof n?r._isResolved()||(0!==(33554432&u)?r._promiseFulfilled(i,e):r._promiseRejected(i,e)):a&&(s&&e._setAsyncGuaranteed(),0!==(33554432&u)?e._fulfill(i):e._reject(i))},o.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof o?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof o&&n._reject(i)},o.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},o.prototype._settlePromise0=function(e,t,n){var r=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,o,t)},o.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},o.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=c();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():y.settlePromises(this))}},o.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?y.fatalError(e,p.isNode):void((65535&t)>0?y.settlePromises(this):this._ensurePossibleRejectionHandled())},o.prototype._fulfillPromises=function(e,t){for(var n=1;e>n;n++){var r=this._fulfillmentHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,t)}},o.prototype._rejectPromises=function(e,t){for(var n=1;e>n;n++){var r=this._rejectionHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,t)}},o.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},o.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},o.defer=o.pending=function(){S.deprecated("Promise.defer","new Promise");var e=new o(b);return{promise:e,resolve:i,reject:a}},p.notEnumerableProp(o,"_makeSelfResolutionError",c),e("./method")(o,b,x,f,S),e("./bind")(o,b,x,S),e("./cancel")(o,k,f,S),e("./direct_resolve")(o),e("./synchronous_inspection")(o),e("./join")(o,k,x,b,S),o.Promise=o,e("./map.js")(o,k,f,x,b,S),e("./using.js")(o,f,x,j,b,S),e("./timers.js")(o,b,S),e("./generators.js")(o,f,b,x,n,S),e("./nodeify.js")(o),e("./call_get.js")(o),e("./props.js")(o,k,x,f),e("./race.js")(o,b,x,f),e("./reduce.js")(o,k,f,x,b,S),e("./settle.js")(o,k,S),e("./some.js")(o,k,f),
e("./promisify.js")(o,b),e("./any.js")(o),e("./each.js")(o,b),e("./filter.js")(o,b),p.toFastProperties(o),p.toFastProperties(o.prototype),u({a:1}),u({b:2}),u({c:3}),u(1),u(function(){}),u(void 0),u(!1),u(new o(b)),S.setBounds(v.firstLineError,p.lastLineError),o}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i){function a(e){switch(e){case-2:return[];case-3:return{}}}function u(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var s=e("./util");s.isArray;return s.inherits(u,i),u.prototype.length=function(){return this._length},u.prototype.promise=function(){return this._promise},u.prototype._init=function c(e,n){var i=r(this._values,this._promise);if(i instanceof t){i=i._target();var u=i._bitField;if(this._values=i,0===(50397184&u))return this._promise._setAsyncGuaranteed(),i._then(c,this._reject,void 0,this,n);if(0===(33554432&u))return 0!==(16777216&u)?this._reject(i._reason()):this._cancel();i=i._value()}if(i=s.asArray(i),null===i){var l=o("expecting an array or an iterable object but got "+s.classString(i)).reason();return void this._promise._rejectCallback(l,!1)}return 0===i.length?void(-5===n?this._resolveEmptyArray():this._resolve(a(n))):void this._iterate(i)},u.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var o=this._promise,i=!1,a=null,u=0;n>u;++u){var s=r(e[u],o);s instanceof t?(s=s._target(),a=s._bitField):a=null,i?null!==a&&s.suppressUnhandledRejections():null!==a?0===(50397184&a)?(s._proxy(this,u),this._values[u]=s):i=0!==(33554432&a)?this._promiseFulfilled(s._value(),u):0!==(16777216&a)?this._promiseRejected(s._reason(),u):this._promiseCancelled(u):i=this._promiseFulfilled(s,u)}i||o._setAsyncGuaranteed()},u.prototype._isResolved=function(){return null===this._values},u.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},u.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},u.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},u.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},u.prototype._promiseCancelled=function(){return this._cancel(),!0},u.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},u.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},u.prototype.shouldCopyValues=function(){return!0},u.prototype.getActualLength=function(e){return e},u}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e){return!E.test(e)}function o(e){try{return e.__isPromisified__===!0}catch(t){return!1}}function i(e,t,n){var r=p.getDataPropertyOrDefault(e,t+n,b);return r?o(r):!1}function a(e,t,n){for(var r=0;r<e.length;r+=2){var o=e[r];if(n.test(o))for(var i=o.replace(n,""),a=0;a<e.length;a+=2)if(e[a]===i)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function u(e,t,n,r){for(var u=p.inheritedDataKeys(e),s=[],c=0;c<u.length;++c){var l=u[c],f=e[l],h=r===x?!0:x(l,f,e);"function"!=typeof f||o(f)||i(e,l,t)||!r(l,f,e,h)||s.push(l,f)}return a(s,t,n),s}function s(e,r,o,i,a,u){function s(){var o=r;r===h&&(o=this);var i=new t(n);i._captureStackTrace();var a="string"==typeof l&&this!==c?this[l]:e,s=d(i,u);try{a.apply(o,v(arguments,s))}catch(f){i._rejectCallback(y(f),!0,!0)}return i._isFateSealed()||i._setAsyncGuaranteed(),i}var c=function(){return this}(),l=e;return"string"==typeof l&&(e=i),p.notEnumerableProp(s,"__isPromisified__",!0),s}function c(e,t,n,r,o){for(var i=new RegExp(k(t)+"$"),a=u(e,t,i,n),s=0,c=a.length;c>s;s+=2){var l=a[s],f=a[s+1],d=l+t;if(r===O)e[d]=O(l,h,l,f,t,o);else{var v=r(f,function(){return O(l,h,l,f,t,o)});p.notEnumerableProp(v,"__isPromisified__",!0),e[d]=v}}return p.toFastProperties(e),e}function l(e,t,n){return O(e,t,void 0,e,null,n)}var f,h={},p=e("./util"),d=e("./nodeback"),v=p.withAppended,y=p.maybeWrapAsError,m=p.canEvaluate,g=e("./errors").TypeError,_="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],E=new RegExp("^(?:"+w.join("|")+")$"),x=function(e){return p.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},k=function(e){return e.replace(/([$])/,"\\$")},O=m?f:s;t.promisify=function(e,t){if("function"!=typeof e)throw new g("expecting a function but got "+p.classString(e));if(o(e))return e;t=Object(t);var n=void 0===t.context?h:t.context,i=!!t.multiArgs,a=l(e,n,i);return p.copyDescriptors(e,a,r),a},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,r=t.suffix;"string"!=typeof r&&(r=_);var o=t.filter;"function"!=typeof o&&(o=x);var i=t.promisifier;if("function"!=typeof i&&(i=O),!p.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=p.inheritedDataKeys(e),u=0;u<a.length;++u){var s=e[a[u]];"constructor"!==a[u]&&p.isClass(s)&&(c(s.prototype,r,o,i,n),c(s,r,o,i,n))}return c(e,r,o,i,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,o){function i(e){var t,n=!1;if(void 0!==u&&e instanceof u)t=f(e),n=!0;else{var r=l.keys(e),o=r.length;t=new Array(2*o);for(var i=0;o>i;++i){var a=r[i];t[i]=e[a],t[i+o]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,-3)}function a(e){var n,a=r(e);return c(a)?(n=a instanceof t?a._then(t.props,void 0,void 0,void 0,void 0):new i(a).promise(),a instanceof t&&n._propagateFrom(a,2),n):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var u,s=e("./util"),c=s.isObject,l=e("./es5");"function"==typeof Map&&(u=Map);var f=function(){function e(e,r){this[t]=e,this[t+n]=r,t++}var t=0,n=0;return function(r){n=r.size,t=0;var o=new Array(2*r.size);return r.forEach(e,o),o}}(),h=function(e){for(var t=new u,n=e.length/2|0,r=0;n>r;++r){var o=e[n+r],i=e[r];t.set(o,i)}return t};s.inherits(i,n),i.prototype._init=function(){},i.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=h(this._values);else{r={};for(var o=this.length(),i=0,a=this.length();a>i;++i)r[this._values[i+o]]=this._values[i]}return this._resolve(r),!0}return!1},i.prototype.shouldCopyValues=function(){return!1},i.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return a(this)},t.props=function(e){return a(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e,t,n,r,o){for(var i=0;o>i;++i)n[i+r]=e[i+t],e[i+t]=void 0}function o(e){this._capacity=e,this._length=0,this._front=0}o.prototype._willBeOverCapacity=function(e){return this._capacity<e},o.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},o.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&t-1^t)-t;this[r]=e,this._front=r,this._length=this.length()+1},o.prototype.unshift=function(e,t,n){this._unshiftOne(n),this._unshiftOne(t),this._unshiftOne(e)},o.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var o=this._front+r-3;this._checkCapacity(r);var i=this._capacity-1;this[o+0&i]=e,this[o+1&i]=t,this[o+2&i]=n,this._length=r},o.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},o.prototype.length=function(){return this._length},o.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},o.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front,o=this._length,i=n+o&t-1;r(this,0,this,t,i)},t.exports=o},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,o){function i(e,i){var s=r(e);if(s instanceof t)return u(s);if(e=a.asArray(e),null===e)return o("expecting an array or an iterable object but got "+a.classString(e));var c=new t(n);void 0!==i&&c._propagateFrom(i,3);for(var l=c._fulfill,f=c._reject,h=0,p=e.length;p>h;++h){var d=e[h];(void 0!==d||h in e)&&t.cast(d)._then(l,f,void 0,c,null)}return c}var a=e("./util"),u=function(e){return e.then(function(t){return i(t,e)})};t.race=function(e){return i(e,void 0)},t.prototype.race=function(){return i(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){function u(e,n,r,o){this.constructor$(e);var a=h();this._fn=null===a?n:a.bind(n),void 0!==r&&(r=t.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=o===i?[]:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function s(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function c(e,t,n,o){if("function"!=typeof t)return r("expecting a function but got "+p.classString(t));var i=new u(e,t,n,o);return i.promise()}function l(e){this.accum=e,this.array._gotAccum(e);var n=o(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(e){var n=this.array,r=n._promise,o=d(n._fn);r._pushContext();var i;i=void 0!==n._eachValues?o.call(r._boundValue(),e,this.index,this.length):o.call(r._boundValue(),this.accum,e,this.index,this.length),i instanceof t&&(n._currentCancellable=i);var u=r._popContext();return a.checkForgottenReturns(i,u,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),i}var h=t._getDomain,p=e("./util"),d=p.tryCatch;p.inherits(u,n),u.prototype._gotAccum=function(e){void 0!==this._eachValues&&e!==i&&this._eachValues.push(e)},u.prototype._eachComplete=function(e){return this._eachValues.push(e),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},u.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},u.prototype._iterate=function(e){this._values=e;var n,r,o=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;o>r;++r){var i={accum:null,value:e[r],index:r,length:o,array:this};n=n._then(l,void 0,void 0,i,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(s,s,void 0,n,this)},t.prototype.reduce=function(e,t){return c(this,e,t,null)},t.reduce=function(e,t,n,r){return c(e,t,n,r)}}},{"./util":36}],29:[function(e,o,i){"use strict";var a,u=e("./util"),s=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};if(u.isNode&&"undefined"==typeof MutationObserver){var c=n.setImmediate,l=t.nextTick;a=u.isRecentNode?function(e){c.call(n,e)}:function(e){l.call(t,e)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?"undefined"!=typeof r?function(e){r(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:s:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div"),o=new MutationObserver(function(){e.classList.toggle("foo"),n=!1});o.observe(r,t);var i=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(e,t),i()}}();o.exports=a},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){function o(e){this.constructor$(e)}var i=t.PromiseInspection,a=e("./util");a.inherits(o,n),o.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},o.prototype._promiseFulfilled=function(e,t){var n=new i;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new i;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){function o(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function i(e,t){if((0|t)!==t||0>t)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new o(e),i=n.promise();return n.setHowMany(t),n.init(),i}var a=e("./util"),u=e("./errors").RangeError,s=e("./errors").AggregateError,c=a.isArray,l={};a.inherits(o,n),o.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=c(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},o.prototype.init=function(){this._initialized=!0,this._init()},o.prototype.setUnwrap=function(){this._unwrap=!0},o.prototype.howMany=function(){return this._howMany},o.prototype.setHowMany=function(e){this._howMany=e},o.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},o.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},o.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},o.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==l&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},o.prototype._fulfilled=function(){return this._totalResolved},o.prototype._rejected=function(){return this._values.length-this.length()},o.prototype._addRejected=function(e){this._values.push(e)},o.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},o.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},o.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new u(t)},o.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return i(e,t)},t.prototype.some=function(e){return i(this,e)},t._SomePromiseArray=o}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},i=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},u=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=e.prototype._isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype.isCancelled=function(){return this._target()._isCancelled()},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return i.call(this._target())},e.prototype.isFulfilled=function(){return o.call(this._target())},e.prototype.isResolved=function(){return u.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e,r){if(l(e)){if(e instanceof t)return e;var o=i(e);if(o===c){r&&r._pushContext();var s=t.reject(o.e);return r&&r._popContext(),s}if("function"==typeof o){if(a(e)){var s=new t(n);return e._then(s._fulfill,s._reject,void 0,s,null),s}return u(e,o,r)}}return e}function o(e){return e.then}function i(e){try{return o(e)}catch(t){return c.e=t,c}}function a(e){return f.call(e,"_promise0")}function u(e,r,o){function i(e){u&&(u._resolveCallback(e),u=null)}function a(e){u&&(u._rejectCallback(e,f,!0),u=null)}var u=new t(n),l=u;o&&o._pushContext(),u._captureStackTrace(),o&&o._popContext();var f=!0,h=s.tryCatch(r).call(e,i,a);return f=!1,u&&h===c&&(u._rejectCallback(h.e,!0,!0),u=null),l}var s=e("./util"),c=s.errorObj,l=s.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){function o(e){this.handle=e}function i(e){return clearTimeout(this.handle),e}function a(e){throw clearTimeout(this.handle),e}var u=e("./util"),s=t.TimeoutError;o.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(e){return l(+this).thenReturn(e)},l=t.delay=function(e,i){var a,u;return void 0!==i?(a=t.resolve(i)._then(c,null,null,e,void 0),r.cancellation()&&i instanceof t&&a._setOnCancel(i)):(a=new t(n),u=setTimeout(function(){a._fulfill()},+e),r.cancellation()&&a._setOnCancel(new o(u))),a._setAsyncGuaranteed(),a};t.prototype.delay=function(e){return l(e,this)};var f=function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new s("operation timed out"):new s(t),u.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n,u,s=new o(setTimeout(function(){n.isPending()&&f(n,t,u)},e));return r.cancellation()?(u=this.then(),n=u._then(i,a,void 0,s,void 0),n._setOnCancel(s)):n=this._then(i,a,void 0,s,void 0),n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){function u(e){setTimeout(function(){throw e},0)}function s(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function c(e,n){function o(){if(a>=c)return l._fulfill();var i=s(e[a++]);if(i instanceof t&&i._isDisposable()){try{i=r(i._getDisposer().tryDispose(n),e.promise)}catch(f){return u(f)}if(i instanceof t)return i._then(o,u,null,null,null)}o()}var a=0,c=e.length,l=new t(i);return o(),l}function l(e,t,n){this._data=e,this._promise=t,this._context=n}function f(e,t,n){this.constructor$(e,t,n)}function h(e){return l.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function p(e){this.length=e,this.promise=null,this[e-1]=null}var d=e("./util"),v=e("./errors").TypeError,y=e("./util").inherits,m=d.errorObj,g=d.tryCatch;l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},l.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==t?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},y(f,l),f.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)},p.prototype._resultCancelled=function(){for(var e=this.length,n=0;e>n;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(2>e)return n("you must pass at least 2 arguments to Promise.using");var o=arguments[e-1];if("function"!=typeof o)return n("expecting a function but got "+d.classString(o));var i,u=!0;2===e&&Array.isArray(arguments[0])?(i=arguments[0],e=i.length,u=!1):(i=arguments,e--);for(var s=new p(e),f=0;e>f;++f){var v=i[f];if(l.isDisposer(v)){var y=v;v=v.promise(),v._setDisposable(y)}else{var _=r(v);_ instanceof t&&(v=_._then(h,null,null,{resources:s,index:f},void 0))}s[f]=v}for(var b=new Array(s.length),f=0;f<b.length;++f)b[f]=t.resolve(s[f]).reflect();var w=t.all(b).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return m.e=n.error(),m;if(!n.isFulfilled())return void w.cancel();e[t]=n.value()}E._pushContext(),o=g(o);var r=u?o.apply(void 0,e):o(e),i=E._popContext();return a.checkForgottenReturns(r,i,"Promise.using",E),r}),E=w.lastly(function(){var e=new t.PromiseInspection(w);return c(s,e)});return s.promise=E,E._setOnCancel(s),E},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new f(e,this,o());throw new v}}},{"./errors":12,"./util":36}],36:[function(e,r,o){"use strict";function i(){try{var e=I;return I=null,e.apply(this,arguments)}catch(t){return T.e=t,T}}function a(e){return I=e,i}function u(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function c(e){return u(e)?new Error(g(e)):e}function l(e,t){var n,r=e.length,o=new Array(r+1);for(n=0;r>n;++n)o[n]=e[n];return o[n]=t,o}function f(e,t,n){if(!j.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function h(e,t,n){if(u(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return j.defineProperty(e,t,r),e}function p(e){throw e}function d(e){try{if("function"==typeof e){var t=j.names(e.prototype),n=j.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),o=R.test(e+"")&&j.names(e).length>0;if(n||r||o)return!0}return!1}catch(i){return!1}}function v(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}function y(e){return N.test(e)}function m(e,t,n){for(var r=new Array(e),o=0;e>o;++o)r[o]=t+o+n;return r}function g(e){try{return e+""}catch(t){return"[no string representation]"}}function _(e){return null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function b(e){try{h(e,"isOperational",!0)}catch(t){}}function w(e){return null==e?!1:e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0}function E(e){return _(e)&&j.propertyIsWritable(e,"stack")}function x(e){return{}.toString.call(e)}function k(e,t,n){for(var r=j.names(e),o=0;o<r.length;++o){var i=r[o];if(n(i))try{j.defineProperty(t,i,j.getDescriptor(e,i))}catch(a){}}}function O(e,n){return L?t.env[e]:n}var j=e("./es5"),S="undefined"==typeof navigator,T={e:{}},I,A="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof n?n:void 0!==this?this:null,P=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},C=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(j.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],o=Object.create(null);null!=e&&!t(e);){var i;try{i=n(e)}catch(a){return r}for(var u=0;u<i.length;++u){var s=i[u];if(!o[s]){o[s]=!0;var c=Object.getOwnPropertyDescriptor(e,s);null!=c&&null==c.get&&null==c.set&&r.push(s)}}e=j.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var o=[];e:for(var i in n)if(r.call(n,i))o.push(i);else{for(var a=0;a<e.length;++a)if(r.call(e[a],i))continue e;o.push(i)}return o}}(),R=/this\s*\.\s*\S+\s*=/,N=/^[a-z$_][a-z$_0-9]*$/i,D=function(){return"stack"in new Error?function(e){return E(e)?e:new Error(g(e))}:function(e){if(E(e))return e;try{throw new Error(g(e))}catch(t){return t}}}(),M=function(e){return j.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var F="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};M=function(e){return j.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?F(e):null}}var L="undefined"!=typeof t&&"[object process]"===x(t).toLowerCase(),B={isClass:d,isIdentifier:y,inheritedDataKeys:C,getDataPropertyOrDefault:f,thrower:p,isArray:j.isArray,asArray:M,notEnumerableProp:h,isPrimitive:u,isObject:s,isError:_,canEvaluate:S,errorObj:T,tryCatch:a,inherits:P,withAppended:l,maybeWrapAsError:c,toFastProperties:v,filledRange:m,toString:g,canAttachTrace:E,ensureErrorObject:D,originatesFromRejection:w,markAsOriginatingFromRejection:b,classString:x,copyDescriptors:k,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:L,env:O,global:A};B.isRecentNode=B.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),B.isNode&&B.toFastProperties(t);try{throw new Error}catch(q){B.lastLineError=q}r.exports=B},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(t,n(289),function(){return this}(),n(536).setImmediate)},function(e,t,n){(function(e,r){function o(e,t){this._id=e,this._clearFn=t}var i=n(289).nextTick,a=Function.prototype.apply,u=Array.prototype.slice,s={},c=0;t.setTimeout=function(){return new o(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=c++,r=arguments.length<2?!1:u.call(arguments,1);return s[n]=!0,i(function(){s[n]&&(r?e.apply(null,r):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof r?r:function(e){delete s[e]}}).call(t,n(536).setImmediate,n(536).clearImmediate)},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new f["default"](function(e,n){function r(o,i){try{var a=t[o](i),u=a.value}catch(s){return void n(s)}return a.done?void e(u):f["default"].resolve(u).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CacheStore=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function D(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:D(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)};n(2);var l=n(535),f=r(l),h=n(538),p=n(420),d=n(298),v=n(423),y=n(539),m=n(305),g=n(304),_=n(492),b=n(507),w=r(b),E=n(405),x=r(E),k=n(417),O=r(k),j=n(326),S=r(j),T=n(441),I=r(T),A=n(490),P=r(A),C=n(540),R=r(C),N=e.env.KINVEY_ID_ATTRIBUTE||"_id";t.CacheStore=function(e){function t(e){i(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.ttl=void 0,n.enableSync(),n}return u(t,e),s(t,[{key:"disableSync",value:function(){this._syncEnabled=!1}},{key:"enableSync",value:function(){this._syncEnabled=!0}},{key:"isSyncEnabled",value:function(){return!!this._syncEnabled}},{key:"find",value:function(){function e(e,t){return n.apply(this,arguments)}var n=o(regeneratorRuntime.mark(function r(e){var n,o,i,a=this,u=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(u=(0,x["default"])({useDeltaFetch:!0},u),!e||e instanceof m.Query){r.next=3;break}throw new d.KinveyError("Invalid query. It must be an instance of the Query class.");case 3:return n=new v.LocalRequest({method:p.HttpMethod.GET,url:w["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:u.properties,query:e,timeout:u.timeout,client:this.client}),r.next=6,n.execute().then(function(e){return e.data});case 6:return o=r.sent,i=this.syncCount().then(function(e){return e>0?a.push().then(function(){return a.syncCount()}):e}).then(function(n){if(n>0)throw new d.KinveyError("Unable to load data from the network. There are "+n+" entities that need to be synced before data is loaded from the network.");if(u.useDeltaFetch){var r=new y.DeltaFetchRequest({method:p.HttpMethod.GET,authType:p.AuthType.Default,url:w["default"].format({protocol:a.client.protocol,host:a.client.host,pathname:a._pathname}),properties:u.properties,query:e,timeout:u.timeout,client:a.client});return r.execute().then(function(e){return e.data})}return c(Object.getPrototypeOf(t.prototype),"find",a).call(a,e,u)}).then(function(e){var t=(0,R["default"])(o,e,N),n=Object.keys((0,I["default"])(t,N)),r=new m.Query;r.contains(N,n);
var i=new v.LocalRequest({method:p.HttpMethod.DELETE,url:w["default"].format({protocol:a.client.protocol,host:a.client.host,pathname:a._pathname}),properties:u.properties,query:r,timeout:u.timeout,client:a.client});return i.execute().then(function(){return a._cache(e)})}),r.abrupt("return",{cache:o,networkPromise:i});case 9:case"end":return r.stop()}},r,this)}));return e}()},{key:"group",value:function(){function e(e,t){return n.apply(this,arguments)}var n=o(regeneratorRuntime.mark(function r(e){var n,o,i,a=this,u=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e instanceof g.Aggregation){r.next=2;break}throw new d.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class.");case 2:return n=new v.LocalRequest({method:p.HttpMethod.GET,url:w["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/_group"}),properties:u.properties,data:e.toJSON(),timeout:u.timeout,client:this.client}),r.next=5,n.execute().then(function(e){return e.data});case 5:return o=r.sent,i=this.syncCount().then(function(e){return e>0?a.push().then(function(){return a.syncCount()}):e}).then(function(n){if(n>0)throw new d.KinveyError("Unable to load data from the network. There are "+n+" entities that need to be synced before data is loaded from the network.");return c(Object.getPrototypeOf(t.prototype),"group",a).call(a,e,u)}),r.abrupt("return",{cache:o,networkPromise:i});case 8:case"end":return r.stop()}},r,this)}));return e}()},{key:"count",value:function(){function e(e,t){return n.apply(this,arguments)}var n=o(regeneratorRuntime.mark(function r(e){var n,o,i,a=this,u=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e||e instanceof m.Query){r.next=2;break}throw new d.KinveyError("Invalid query. It must be an instance of the Query class.");case 2:return n=new v.LocalRequest({method:p.HttpMethod.GET,url:w["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/_count"}),properties:u.properties,query:e,timeout:u.timeout,client:this.client}),r.next=5,n.execute().then(function(e){return e.data});case 5:return o=r.sent,i=this.syncCount().then(function(e){return e>0?a.push().then(function(){return a.syncCount()}):e}).then(function(n){if(n>0)throw new d.KinveyError("Unable to load data from the network. There are "+n+" entities that need to be synced before data is loaded from the network.");return c(Object.getPrototypeOf(t.prototype),"count",a).call(a,e,u)}),r.abrupt("return",{cache:o,networkPromise:i});case 8:case"end":return r.stop()}},r,this)}));return e}()},{key:"findById",value:function(){function e(e,t){return n.apply(this,arguments)}var n=o(regeneratorRuntime.mark(function r(e){var n,o,i,a=this,u=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(u=(0,x["default"])({useDeltaFetch:!0},u),e){r.next=4;break}return _.Log.warn("No id was provided to retrieve an entity.",e),r.abrupt("return",null);case 4:return n=new v.LocalRequest({method:p.HttpMethod.GET,url:w["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/"+e}),properties:u.properties,timeout:u.timeout,client:this.client}),o=null,r.prev=6,r.next=9,n.execute().then(function(e){return e.data});case 9:o=r.sent,r.next=16;break;case 12:if(r.prev=12,r.t0=r["catch"](6),r.t0 instanceof d.NotFoundError){r.next=16;break}throw r.t0;case 16:return i=this.syncCount().then(function(e){return e>0?a.push().then(function(){return a.syncCount()}):e}).then(function(n){if(n>0)throw new d.KinveyError("Unable to load data from the network. There are "+n+" entities that need to be synced before data is loaded from the network.");if(u.useDeltaFetch){var r=new y.DeltaFetchRequest({method:p.HttpMethod.GET,authType:p.AuthType.Default,url:w["default"].format({protocol:a.client.protocol,host:a.client.host,pathname:a._pathname+"/"+e}),properties:u.properties,timeout:u.timeout,client:a.client});return r.execute().then(function(e){return e.data})}return c(Object.getPrototypeOf(t.prototype),"findById",a).call(a,e,u)}).then(function(e){return a._cache(e)})["catch"](function(t){if(t instanceof d.NotFoundError){var n=new v.LocalRequest({method:p.HttpMethod.DELETE,authType:p.AuthType.Default,url:w["default"].format({protocol:a.client.protocol,host:a.client.host,pathname:a._pathname+"/"+e}),properties:u.properties,timeout:u.timeout,client:a.client});return n.execute().then(function(){throw t})}throw t}),r.abrupt("return",{cache:o,networkPromise:i});case 18:case"end":return r.stop()}},r,this,[[6,12]])}));return e}()},{key:"save",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(e){var t,r,o,i,a,u,s,c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return _.Log.warn("No entity was provided to be saved.",e),n.abrupt("return",f["default"].resolve(null));case 3:return t=new v.LocalRequest({method:p.HttpMethod.POST,url:w["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:c.properties,data:e,timeout:c.timeout,client:this.client}),e[N]&&(t.method=p.HttpMethod.PUT,t.url=w["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/"+e[N]})),n.next=7,t.execute().then(function(e){return e.data});case 7:return e=n.sent,n.next=10,this._sync(e,c);case 10:return r=(0,S["default"])(e)?e:[e],o=Object.keys((0,I["default"])(r,N)),i=(new m.Query).contains(N,o),n.next=15,this.push(i,c);case 15:return a=n.sent,u=a.success,s=(0,P["default"])(u,function(e){return e.entity}),n.abrupt("return",(0,S["default"])(e)||1!==s.length?s:s[0]);case 19:case"end":return n.stop()}},n,this)}));return e}()},{key:"remove",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(e){var t,r,o,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||e instanceof m.Query){n.next=2;break}return n.abrupt("return",f["default"].reject(new d.KinveyError("Invalid query. It must be an instance of the Query class.")));case 2:return t=new v.LocalRequest({method:p.HttpMethod.DELETE,url:w["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:i.properties,query:e,timeout:i.timeout,client:this.client}),n.next=5,t.execute().then(function(e){return e.data});case 5:return r=n.sent,n.next=8,this._sync(r.entities,i);case 8:return o=(new m.Query).contains(N,Object.keys((0,I["default"])(r.entities,N))),n.next=11,this.push(o,i);case 11:return n.abrupt("return",r);case 12:case"end":return n.stop()}},n,this)}));return e}()},{key:"removeById",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(e){var t,r,o,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return _.Log.warn("No id was provided to be removed."),n.abrupt("return",f["default"].resolve(null));case 3:return t=new v.LocalRequest({method:p.HttpMethod.DELETE,url:w["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/"+e}),properties:i.properties,authType:p.AuthType.Default,timeout:i.timeout,client:this.client}),n.next=6,t.execute().then(function(e){return e.data});case 6:return r=n.sent,n.next=9,this._sync(r.entities,i);case 9:return o=(new m.Query).contains(N,Object.keys((0,I["default"])(r.entities,N))),n.next=12,this.push(o,i);case 12:return n.abrupt("return",r);case 13:case"end":return n.stop()}},n,this)}));return e}()},{key:"push",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.isSyncEnabled()?(e instanceof m.Query||(e=new m.Query((0,O["default"])(e,"toJSON",e))),e.contains(N,[this.name]),this.client.syncManager.execute(e,t)):f["default"].reject(new d.KinveyError("Sync is disabled."))}},{key:"pull",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(e){var t,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.syncCount(null,r);case 2:if(t=n.sent,!(t>0)){n.next=5;break}throw new d.KinveyError("Unable to pull data. You must push the pending sync items first.","Call store.push() to push the pending sync items before you pull new data.");case 5:return n.abrupt("return",this.find(e,r).then(function(e){return e.networkPromise}));case 6:case"end":return n.stop()}},n,this)}));return e}()},{key:"sync",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(e){var t,r,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.push(null,o);case 2:return t=n.sent,n.next=5,this.pull(e,o);case 5:return r=n.sent,n.abrupt("return",{push:t,pull:r});case 7:case"end":return n.stop()}},n,this)}));return e}()},{key:"syncCount",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return e instanceof m.Query||(e=new m.Query((0,O["default"])(e,"toJSON",e))),e.contains(N,[this.name]),this.client.syncManager.count(e,t)}},{key:"_cache",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new v.LocalRequest({method:p.HttpMethod.PUT,url:w["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:t.properties,data:e,timeout:t.timeout,client:this.client}).execute().then(function(e){return e.data})}},{key:"_sync",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.isSyncEnabled()){n.next=2;break}return n.abrupt("return",null);case 2:return n.abrupt("return",this.client.syncManager.notify(this.name,e,t));case 3:case"end":return n.stop()}},n,this)}));return e}()}]),t}(h.NetworkStore)}).call(t,n(289))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkStore=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(294),u=r(a),s=n(304),c=n(420),l=n(298),f=n(418),h=n(517),p=n(305),d=n(492),v=n(503),y=r(v),m=n(507),g=r(m),_=n(405),b=r(_),w=n(327),E=r(w),x=e.env.KINVEY_DATASTORE_NAMESPACE||"appdata",k=e.env.KINVEY_ID_ATTRIBUTE||"_id";t.NetworkStore=function(){function e(t){if(o(this,e),t&&!(0,E["default"])(t))throw new l.KinveyError("Name must be a string.");this.name=t,this.client=f.Client.sharedInstance()}return i(e,[{key:"find",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(d.Log.debug("Retrieving the entities in the "+this.name+" collection.",e),n=(0,b["default"])({properties:null,timeout:void 0,handler:function(){}},n),n.flags=y["default"].parse(n.flags),e&&!(e instanceof p.Query))return u["default"].reject(new l.KinveyError("Invalid query. It must be an instance of the Kinvey.Query class."));var r=new h.NetworkRequest({method:c.HttpMethod.GET,authType:c.AuthType.Default,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:n.properties,query:e,timeout:n.timeout,client:this.client}),o=r.execute().then(function(e){return e.data});return o.then(function(e){d.Log.info("Retrieved the entities in the "+t.name+" collection.",e)})["catch"](function(e){d.Log.error("Failed to retrieve the entities in the "+t.name+" collection.",e)}),o}},{key:"group",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(d.Log.debug("Grouping the entities in the "+this.name+" collection.",e,n),n=(0,b["default"])({properties:null,timeout:void 0,useDeltaFetch:!0,handler:function(){}},n),!(e instanceof s.Aggregation))return u["default"].reject(new l.KinveyError("Invalid aggregation. It must be an instance of the Kinvey.Aggregation class."));var r=new h.NetworkRequest({method:c.HttpMethod.GET,authType:c.AuthType.Default,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/_group"}),properties:n.properties,data:e.toJSON(),timeout:n.timeout,client:this.client}),o=r.execute().then(function(e){return e.data});return o.then(function(e){d.Log.info("Grouped the entities in the "+t.name+" collection.",e)})["catch"](function(e){d.Log.error("Failed to group the entities in the "+t.name+" collection.",e)}),o}},{key:"count",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(d.Log.debug("Counting the number of entities in the "+this.name+" collection.",e),n=(0,b["default"])({properties:null,timeout:void 0,useDeltaFetch:!0,handler:function(){}},n),e&&!(e instanceof p.Query))return u["default"].reject(new l.KinveyError("Invalid query. It must be an instance of the Kinvey.Query class."));var r=new h.NetworkRequest({method:c.HttpMethod.GET,authType:c.AuthType.Default,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/_count"}),properties:n.properties,query:e,timeout:n.timeout,client:this.client}),o=r.execute().then(function(e){return e.data});return o.then(function(e){d.Log.info("Counted the number of entities in the "+t.name+" collection.",e)})["catch"](function(e){d.Log.error("Failed to count the number of entities in the "+t.name+" collection.",e)}),o}},{key:"findById",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!e)return d.Log.warn("No id was provided to retrieve an entity.",e),u["default"].resolve(null);d.Log.debug("Retrieving the entity in the "+this.name+" collection with id = "+e+"."),n=(0,b["default"])({properties:null,timeout:void 0,handler:function(){}},n);var r=new h.NetworkRequest({method:c.HttpMethod.GET,authType:c.AuthType.Default,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/"+e}),properties:n.properties,timeout:n.timeout,client:this.client}),o=r.execute().then(function(e){return e.data});return o.then(function(n){d.Log.info("Retrieved the entity in the "+t.name+" collection with id = "+e+".",n)})["catch"](function(n){d.Log.error("Failed to retrieve the entity in the "+t.name+" collection with id = "+e+".",n)}),o}},{key:"save",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!e)return d.Log.warn("No entity was provided to be saved.",e),u["default"].resolve(null);d.Log.debug("Saving the entity(s) to the "+this.name+" collection.",e),n=(0,b["default"])({properties:null,timeout:void 0,handler:function(){}},n);var r=new h.NetworkRequest({method:c.HttpMethod.POST,authType:c.AuthType.Default,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:n.properties,data:e,timeout:n.timeout,client:this.client});e[k]&&(r.method=c.HttpMethod.PUT,r.url=g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/"+e[k]}));var o=r.execute().then(function(e){return e.data});return o.then(function(e){d.Log.info("Saved the entity(s) to the "+t.name+" collection.",e)})["catch"](function(e){d.Log.error("Failed to save the entity(s) to the "+t.name+" collection.",e)}),o}},{key:"remove",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(d.Log.debug("Removing the entities in the "+this.name+" collection.",e),n=(0,b["default"])({properties:null,timeout:void 0,handler:function(){}},n),e&&!(e instanceof p.Query))return u["default"].reject(new l.KinveyError("Invalid query. It must be an instance of the Kinvey.Query class."));var r=new h.NetworkRequest({method:c.HttpMethod.DELETE,authType:c.AuthType.Default,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:n.properties,query:e,timeout:n.timeout}),o=r.execute().then(function(e){return e.data});return o.then(function(e){d.Log.info("Removed the entities in the "+t.name+" collection.",e)})["catch"](function(e){d.Log.error("Failed to remove the entities in the "+t.name+" collection.",e)}),o}},{key:"removeById",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!e)return d.Log.warn("No id was provided to be removed.",e),u["default"].resolve(null);d.Log.debug("Removing an entity in the "+this.name+" collection with id = "+e+"."),n=(0,b["default"])({properties:null,timeout:void 0,handler:function(){}},n);var r=new h.NetworkRequest({method:c.HttpMethod.DELETE,authType:c.AuthType.Default,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/"+e}),properties:n.properties,timeout:n.timeout}),o=r.execute().then(function(e){return e.data});return o.then(function(n){d.Log.info("Removed the entity in the "+t.name+" collection with id = "+e+".",n)})["catch"](function(n){d.Log.error("Failed to remove the entity in the "+t.name+" collection with id = "+e+".",n)}),o}},{key:"_pathname",get:function(){var e="/"+x+"/"+this.client.appKey;return this.name&&(e=e+"/"+this.name),e}}]),e}()}).call(t,n(289))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaFetchRequest=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function D(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:D(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},l=n(294),f=r(l),h=n(424),p=n(423),d=n(517),v=n(516),y=n(420),m=n(298),g=n(305),_=n(441),b=r(_),w=n(494),E=r(w),x=n(417),k=r(x),O=n(479),j=r(O),S=n(307),T=r(S),I=n(326),A=r(I),P=e.env.KINVEY_ID_ATTRIBUTE||"_id",C=e.env.KINVEY_KMD_ATTRIBUTE||"_kmd",R=e.env.KINVEY_LMT_ATTRIBUTE||"lmt",N=e.env.KINVEY_MAX_IDS||200;t.DeltaFetchRequest=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"execute",value:function(){var e=this,n=c(Object.getPrototypeOf(t.prototype),"execute",this).call(this).then(function(){if(e.method!==y.HttpMethod.GET)throw new Error("Invalid http method. Http GET requests are only supported by DeltaFetchRequests.");var t=new p.LocalRequest({method:y.HttpMethod.GET,url:e.url,headers:e.headers,query:e.query,timeout:e.timeout,client:e.client});return t.execute()})["catch"](function(e){if(e instanceof m.NotFoundError)return new v.Response({statusCode:y.StatusCode.Ok,data:[]});throw e}).then(function(e){return e.data}).then(function(t){if((0,A["default"])(t)&&t.length>0){var n=function(){var n=(0,b["default"])(t,P),r=new g.Query((0,k["default"])(e.query,"toJSON",e.query));r.fields([P,C]);var o=new d.NetworkRequest({method:y.HttpMethod.GET,url:e.url,headers:e.headers,auth:e.auth,query:r,timeout:e.timeout,client:e.client});return{v:o.execute().then(function(t){var r=(0,b["default"])(t.data,P),o=r,i=Object.keys(n);(0,T["default"])(i,function(e){var t=n[e],i=r[e];i&&i[C]&&t[C]&&i[C][R]===t[C][R]?delete o[e]:delete n[e]});for(var a=Object.keys(o),u=[],s=0;s<a.length;){var c=new g.Query((0,k["default"])(e.query,"toJSON",e.query)),l=a.slice(s,a.length>N+s?N:a.length);c.contains(P,l);var h=new d.NetworkRequest({method:y.HttpMethod.GET,url:e.url,headers:e.headers,auth:e.auth,query:c,timeout:e.timeout,client:e.client}),p=h.execute();u.push(p),s+=N}return f["default"].all(u).then(function(e){var t=new v.Response({statusCode:y.StatusCode.Ok,data:[]});return(0,E["default"])(e,function(e,t){return t.isSuccess()&&(e.addHeaders(t.headers),e.data=e.data.concat(t.data)),e},t)}).then(function(t){if(t.data=t.data.concat((0,j["default"])(n)),e.query){var r=new g.Query((0,k["default"])(e.query,"toJSON",e.query));r.skip(0).limit(0),t.data=r._process(t.data)}return t})})}}();if("object"===("undefined"==typeof n?"undefined":u(n)))return n.v}var r=new d.NetworkRequest({method:y.HttpMethod.GET,url:e.url,headers:e.headers,auth:e.auth,query:e.query,timeout:e.timeout,client:e.client});return r.execute()});return n}}]),t}(h.KinveyRequest)}).call(t,n(289))},function(e,t,n){var r=n(541),o=n(550),i=n(331),a=n(320),u=n(551),s=n(411),c=s(function(e,t){var n=u(t);return a(n)&&(n=void 0),a(e)?r(e,o(t,1,!0),i(n)):[]});e.exports=c},function(e,t,n){function r(e,t,n,r){var f=-1,h=i,p=!0,d=e.length,v=[],y=t.length;if(!d)return v;n&&(t=u(t,s(n))),r?(h=a,p=!1):t.length>=l&&(h=c,p=!1,t=new o(t));e:for(;++f<d;){var m=e[f],g=n?n(m):m;if(p&&g===g){for(var _=y;_--;)if(t[_]===g)continue e;v.push(m)}else h(t,g,r)||v.push(m)}return v}var o=n(542),i=n(544),a=n(547),u=n(389),s=n(548),c=n(549),l=200;e.exports=r},function(e,t,n){function r(e){var t=-1,n=e?e.length:0;for(this.__data__=new o;++t<n;)this.push(e[t])}var o=n(345),i=n(543);r.prototype.push=i,e.exports=r},function(e,t,n){function r(e){var t=this.__data__;if(o(e)){var n=t.__data__,r="string"==typeof e?n.string:n.hash;r[e]=i}else t.set(e,i)}var o=n(363),i="__lodash_hash_undefined__";e.exports=r},function(e,t,n){function r(e,t){return!!e.length&&o(e,t,0)>-1}var o=n(545);e.exports=r},function(e,t,n){function r(e,t,n){if(t!==t)return o(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var o=n(546);e.exports=r},function(e,t){function n(e,t,n){for(var r=e.length,o=t+(n?0:-1);n?o--:++o<r;){var i=e[o];if(i!==i)return o}return-1}e.exports=n},function(e,t){function n(e,t,n){for(var r=-1,o=e.length;++r<o;)if(n(t,e[r]))return!0;return!1}e.exports=n},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){function r(e,t){var n=e.__data__;if(o(t)){var r=n.__data__,a="string"==typeof t?r.string:r.hash;return a[t]===i}return n.has(t)}var o=n(363),i="__lodash_hash_undefined__";e.exports=r},function(e,t,n){function r(e,t,n,s){s||(s=[]);for(var c=-1,l=e.length;++c<l;){var f=e[c];t>0&&u(f)&&(n||a(f)||i(f))?t>1?r(f,t-1,n,s):o(s,f):n||(s[s.length]=f)}return s}var o=n(457),i=n(319),a=n(326),u=n(320);e.exports=r},function(e,t){function n(e){var t=e?e.length:0;return t?e[t-1]:void 0}e.exports=n},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.UserStore=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function x(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:x(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=n(294),l=r(c),f=n(298),h=n(538),p=n(420),d=n(517),v=n(507),y=r(v),m=n(326),g=r(m),_=e.env.KINVEY_USERS_NAMESPACE||"user",b=e.env.KINVEY_RPC_NAMESPACE||"rpc",w=e.env.KINVEY_ID_ATTRIBUTE||"_id",E=e.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE||"_socialIdentity";t.UserStore=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),u(t,[{key:"save",value:function(e){var n=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=l["default"].resolve().then(function(){if(!e)throw new f.KinveyError("No user was provided to be updated.");if((0,g["default"])(e))throw new f.KinveyError("Please only update one user at a time.",e);if(!e[w])throw new f.KinveyError("User must have an _id.");if(r._identity){var o=e[E];if(o)for(var i in o)o.hasOwnProperty(i)&&o[i]&&r._identity!==i&&delete o[i]}return s(Object.getPrototypeOf(t.prototype),"save",n).call(n,e,r)});return o}},{key:"exists",value:function(e,t){var n=new d.NetworkRequest({method:p.HttpMethod.POST,authType:p.AuthType.App,url:y["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:"/"+b+"/"+this.client.appKey+"/check-username-exists"}),properties:t.properties,data:{username:e},timeout:t.timeout,client:this.client}),r=n.execute().then(function(e){return e.data.usernameExists});return r}},{key:"restore",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=new d.NetworkRequest({method:p.HttpMethod.POST,authType:p.AuthType.Master,url:y["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/id"}),properties:t.properties,timeout:t.timeout,client:this.client}),r=n.execute().then(function(e){return e.data});return r}},{key:"_pathname",get:function(){return"/"+_+"/"+this.client.appKey}}]),t}(h.NetworkStore)}).call(t,n(289))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FileStore=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function x(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:x(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=n(294),l=r(c),f=n(538),h=n(517),p=n(420),d=n(298),v=n(507),y=r(v),m=n(405),g=r(m),_=n(490),b=r(_),w=e.env.KINVEY_FILES_NAMESPACE||"blob",E=e.env.KINVEY_ID_ATTRIBUTE||"_id";t.FileStore=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),u(t,[{key:"find",value:function(e){var n=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r=(0,g["default"])({download:!1,tls:!1},r),r.flags={tls:r.tls===!0,ttl_in_seconds:r.ttl};var o=s(Object.getPrototypeOf(t.prototype),"find",this).call(this,e,r).then(function(e){if(r.download===!0){var t=(0,b["default"])(e,function(e){return n.downloadByUrl(e._downloadURL,r)});return l["default"].all(t)}return e});return o}},{key:"findById",value:function(e,t){return this.download(e,t)}},{key:"download",value:function(e){var n=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r=(0,g["default"])({stream:!1,tls:!1},r),r.flags={tls:r.tls===!0,ttl_in_seconds:r.ttl};var o=s(Object.getPrototypeOf(t.prototype),"findById",this).call(this,e,r).then(function(e){return r.stream===!0?e:n.downloadByUrl(e._downloadURL,r)});return o}},{key:"downloadByUrl",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=l["default"].resolve().then(function(){var n=new h.NetworkRequest({method:p.HttpMethod.GET,url:e,timeout:t.timeout});return n.setHeader("Accept",t.mimeType||"application-octet-stream"),n.removeHeader("Content-Type"),n.removeHeader("X-Kinvey-Api-Version"),n.execute()}).then(function(e){return e.data});return n}},{key:"stream",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.stream=!0,this.download(e,t)}},{key:"upload",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];t._filename=t._filename||e._filename||e.name,t.size=t.size||e.size||e.length,t.mimeType=t.mimeType||e.mimeType||e.type||"application/octet-stream",n=(0,g["default"])({properties:null,timeout:void 0,"public":!1,handler:function(){}},n),n["public"]&&(t._public=!0);var r=new h.NetworkRequest({method:p.HttpMethod.POST,headers:{"X-Kinvey-Content-Type":t.mimeType},authType:p.AuthType.Default,url:y["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname}),properties:n.properties,timeout:n.timeout,data:t,client:this.client});t[E]&&(r.method=p.HttpMethod.PUT,r.url=y["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/"+t._id}));var o=r.execute().then(function(n){var r=n.data._uploadURL,o=n.data._requiredHeaders||{};o["Content-Type"]=t.mimeType,o["Content-Length"]=t.size,delete n.data._expiresAt,delete n.data._requiredHeaders,delete n.data._uploadURL;var i=new h.NetworkRequest({method:p.HttpMethod.PUT,url:r,data:e});return i.clearHeaders(),i.addHeaders(o),i.execute().then(function(t){if(t.isSuccess())return n.data._data=e,n.data;throw t.error})});return o}},{key:"save",value:function(){return l["default"].reject(new d.KinveyError("Please use `upload()` to save files."))}},{key:"update",value:function(){return l["default"].reject(new d.KinveyError("Please use `upload()` to update files."))}},{key:"_pathname",get:function(){return"/"+w+"/"+this.client.appKey}}]),t}(f.NetworkStore)}).call(t,n(289))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){
var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(294),u=r(a),s=n(418),c=n(305),l=n(555),f=n(421),h=n(298),p=n(556),d=n(420),v=n(533),y=n(517),m=n(507),g=r(m),_=n(405),b=r(_),w=n(417),E=r(w),x=n(303),k=r(x),O=e.env.KINVEY_DATASTORE_NAMESPACE||"appdata",j=e.env.KINVEY_USERS_NAMESPACE||"user",S=e.env.KINVEY_RPC_NAMESPACE||"rpc",T=e.env.KINVEY_ID_ATTRIBUTE||"_id",I=e.env.KINVEY_KMD_ATTRIBUTE||"_kmd",A=e.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE||"_socialIdentity",P=e.env.KINVEY_USERNAME_ATTRIBUTE||"username",C=e.env.KINVEY_EMAIL_ATTRIBUTE||"email",R=["facebook","google","linkedIn"],N=void 0;"undefined"!=typeof window&&(N=n(588));t.User=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,e),this.data=t,this.client=s.Client.sharedInstance()}return i(e,[{key:"setAsActiveUser",value:function(){return e.setActiveUser(this,this.client)}},{key:"isActive",value:function(){var t=e.getActiveUser(this.client);return!(!t||t._id!==this._id)}},{key:"login",value:function(t,n){var r=this,o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];(0,k["default"])(t)||(t={username:t,password:n}),t._socialIdentity||(t.username&&(t.username=String(t.username).trim()),t.password&&(t.password=String(t.password).trim()));var i=this.isActive();if(i)return u["default"].reject(new h.ActiveUserError("This user is already the active user."));var a=e.getActiveUser(this.client);if(a)return u["default"].reject(new h.ActiveUserError("An active user already exists. Please logout the active user before you login."));if(!(t.username&&""!==t.username&&t.password&&""!==t.password||t[A]))return u["default"].reject(new h.KinveyError("Username and/or password missing. Please provide both a username and password to login."));var s=new y.NetworkRequest({method:d.HttpMethod.POST,authType:d.AuthType.App,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:this._pathname+"/login"}),data:t,properties:o.properties,timeout:o.timeout}),c=s.execute().then(function(e){return r.data=e.data,r.setAsActiveUser()});return c}},{key:"loginWithIdentity",value:function(e,t,n){var r={_socialIdentity:{}};return r._socialIdentity[e]=t,this.login(r,n)}},{key:"loginWithMIC",value:function(e,t){var n=this,r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=new p.MobileIdentityConnect(this.client);return o.login(e,t,r).then(function(t){return r.redirectUri=e,r.micClient=(0,E["default"])(o.client,"toJSON",o.client),n.connect(p.MobileIdentityConnect.identity,t,r)})}},{key:"logout",value:function(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=this.isActive();if(!r)return u["default"].resolve();var o=new y.NetworkRequest({method:d.HttpMethod.POST,authType:d.AuthType.Session,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:"/"+j+"/"+this.client.appKey+"/_logout"}),properties:n.properties,timeout:n.timeout}),i=o.execute()["catch"](function(){return null}).then(function(){var n=t.isActive();return n?e.setActiveUser(null,t.client):null}).then(function(){return t});return i}},{key:"connectWithIdentity",value:function(t){var n=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r=(0,b["default"])({collectionName:"identities"},r);var o=u["default"].resolve().then(function(){if(!t)throw new h.KinveyError("An identity is required to connect the user.");if(!e.isIdentitySupported(t))throw new h.KinveyError("Identity "+t+" is not supported on this platform.");var o=(new c.Query).equalTo("identity",t),i=new y.NetworkRequest({method:d.HttpMethod.GET,authType:d.AuthType.None,url:g["default"].format({protocol:n.client.protocol,host:n.client.host,pathname:"/"+O+"/"+n.client.appKey+"/"+r.collectionName}),query:o,properties:r.properties,timeout:r.timeout});return i.execute()}).then(function(e){if(1===e.data.length){var n={};return n[t]=e.data[0].key||e.data[0].appId||e.data[0].clientId,N.init(n),N(t).login()}throw new h.KinveyError("Unsupported identity.")}).then(function(){var e=N(t).getAuthResponse();return n.connect(t,e,r)});return o}},{key:"connect",value:function(e,t){var n=this,r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=this.data,i=o[A]||{};i[e]=t,o[A]=i,this.data=o;var a=u["default"].resolve().then(function(){var t=n.isActive();return t?(r._identity=e,n.update(o,r)):n.login(o,null,r)})["catch"](function(i){if(i instanceof h.NotFoundError)return n.signup(o,r).then(function(){return n.connect(e,t,r)});throw i}).then(function(){return n.client.socialIdentity={identity:e,token:n._socialIdentity[e],redirectUri:r.redirectUri,client:r.micClient},n});return a}},{key:"disconnect",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=this.data,o=r[A]||{};delete o[e],r[A]=o,this.data=r;var i=u["default"].resolve().then(function(){return t._id?t.update(r,n):t}).then(function(){var n=t.client.socialIdentity;return n.identity===e&&(t.client.socialIdentity=null),t});return i}},{key:"signup",value:function(t){var n=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r=(0,b["default"])({state:!0},r);var o=u["default"].resolve().then(function(){if(r.state===!0){var t=e.getActiveUser(n.client);if(t)throw new h.ActiveUserError("An active user already exists. Please logout the active user before you login.")}}).then(function(){var e=new y.NetworkRequest({method:d.HttpMethod.POST,authType:d.AuthType.App,url:g["default"].format({protocol:n.client.protocol,host:n.client.host,pathname:"/"+j+"/"+n.client.appKey}),data:(0,E["default"])(t,"toJSON",t),properties:r.properties,timeout:r.timeout});return e.execute()}).then(function(e){return n.data=e.data,r.state===!0?n.setAsActiveUser():n});return o}},{key:"signupWithIdentity",value:function(e,t,n){var r={_socialIdentity:{}};return r._socialIdentity[e]=t,this.signup(r,n)}},{key:"update",value:function(e,t){var n=this,r=v.DataStore.getInstance(null,v.DataStoreType.User);return r.save(e,t).then(function(e){return n.data=e,n.isActive()?n.setAsActiveUser():n})}},{key:"me",value:function(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=new y.NetworkRequest({method:d.HttpMethod.GET,authType:d.AuthType.Session,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:"/"+j+"/"+this.client.appKey+"/_me"}),properties:n.properties,timeout:n.timeout}),o=r.execute().then(function(n){if(t.data=n.data,!t.authtoken){var r=e.getActiveUser(t.client);r&&(t.authtoken=r.authtoken)}return t.setAsActiveUser()});return o}},{key:"verifyEmail",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=new y.NetworkRequest({method:d.HttpMethod.POST,authType:d.AuthType.App,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:"/"+S+"/"+this.client.appKey+"/"+this.username+"/user-email-verification-initiate"}),properties:e.properties,timeout:e.timeout,client:this.client}),n=t.execute().then(function(e){return e.data});return n}},{key:"forgotUsername",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=new y.NetworkRequest({method:d.HttpMethod.POST,authType:d.AuthType.App,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:"/"+S+"/"+this.client.appKey+"/user-forgot-username"}),properties:e.properties,data:{email:this.email},timeout:e.timeout,client:this.client}),n=t.execute().then(function(e){return e.data});return n}},{key:"resetPassword",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=new y.NetworkRequest({method:d.HttpMethod.POST,authType:d.AuthType.App,url:g["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:"/"+S+"/"+this.client.appKey+"/"+this.username+"/user-password-reset-initiate"}),properties:e.properties,timeout:e.timeout,client:this.client}),n=t.execute().then(function(e){return e.data});return n}},{key:"toJSON",value:function(){return this.data}},{key:"_id",get:function(){return this.data[T]}},{key:"_acl",get:function(){return new l.Acl(this.data)}},{key:"metadata",get:function(){return new f.Metadata(this.data)},set:function(e){this.data[I]=(0,E["default"])(e,"toJSON",e)}},{key:"_kmd",get:function(){return this.metadata},set:function(e){this.metadata=e}},{key:"_socialIdentity",get:function(){return this.data[A]}},{key:"authtoken",get:function(){return this.metadata.authtoken},set:function(e){var t=this.metadata;t.authtoken=e,this.metadata=t}},{key:"username",get:function(){return this.data[P]}},{key:"email",get:function(){return this.data[C]}},{key:"_pathname",get:function(){return"/"+j+"/"+this.client.appKey}}],[{key:"getActiveUser",value:function(){var t=arguments.length<=0||void 0===arguments[0]?s.Client.sharedInstance():arguments[0],n=t.user,r=null;return n&&(r=new e(n),r.client=t),r}},{key:"setActiveUser",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?s.Client.sharedInstance():arguments[1],r=(0,E["default"])(t,"toJSON",t);return n.user=r,e.getActiveUser(n)}},{key:"login",value:function(t,n,r){var o=new e;return o.login(t,n,r)}},{key:"loginWithIdentity",value:function(t,n,r){var o=new e;return o.loginWithIdentity(t,n,r)}},{key:"loginWithMIC",value:function(t,n,r){var o=new e;return o.loginWithMIC(t,n,r)}},{key:"isIdentitySupported",value:function(e){return"undefined"!=typeof N&&-1!==R.indexOf(e)}},{key:"connectWithFacebook",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return e.connectWithIdentity(d.SocialIdentity.Facebook,t)}},{key:"connectWithGoogle",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return e.connectWithIdentity(d.SocialIdentity.Google,t)}},{key:"connectWithLinkedIn",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return e.connectWithIdentity(d.SocialIdentity.LinkedIn,t)}},{key:"connectWithIdentity",value:function(t,n){var r=new e;return r.connectWithIdentity(t,n)}},{key:"signup",value:function(t,n){var r=new e;return r.signup(t,n)}},{key:"signupWithIdentity",value:function(t,n,r){var o=new e;return o.signupWithIdentity(t,n,r)}}]),e}()}).call(t,n(289))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Acl=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(298),u=n(422),s=r(u),c=e.env.KINVEY_ACL_ATTRIBUTE||"_acl";t.Acl=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(o(this,e),!(0,s["default"])(t))throw new a.KinveyError("entity argument must be an object");this.acl=t[c]}return i(e,[{key:"addReader",value:function(e){var t=this.acl.r||[];return-1===t.indexOf(e)&&t.push(e),this.acl.r=t,this}},{key:"addReaderGroup",value:function(e){var t=this.acl.groups||{},n=t.r||[];return-1===n.indexOf(e)&&n.push(e),t.r=n,this.acl.groups=t,this}},{key:"addWriter",value:function(e){var t=this.acl.w||[];return-1===t.indexOf(e)&&t.push(e),this.acl.w=t,this}},{key:"addWriterGroup",value:function(e){var t=this.acl.groups||{},n=t.w||[];return-1===n.indexOf(e)&&n.push(e),t.w=n,this.acl.groups=t,this}},{key:"isGloballyReadable",value:function(){return this.acl.gr||!1}},{key:"isGloballyWritable",value:function(){return this.acl.gw||!1}},{key:"removeReader",value:function(e){var t=this.acl.r||[],n=t.indexOf(e);return-1!==n&&t.splice(n,1),this.acl.r=t,this}},{key:"removeReaderGroup",value:function(e){var t=this.acl.groups||{},n=t.r||[],r=n.indexOf(e);return-1!==r&&n.splice(r,1),t.r=n,this.acl.groups=t,this}},{key:"removeWriter",value:function(e){var t=this.acl.w||[],n=t.indexOf(e);return-1!==n&&t.splice(n,1),this.acl.w=t,this}},{key:"removeWriterGroup",value:function(e){var t=this.acl.groups||{},n=t.w||[],r=n.indexOf(e);return-1!==r&&n.splice(r,1),t.w=n,this.acl.groups=t,this}},{key:"toJSON",value:function(){return this.acl}},{key:"creator",get:function(){return this.acl.creator}},{key:"readers",get:function(){return this.acl.r||[]}},{key:"writers",get:function(){return this.acl.w||[]}},{key:"readerGroups",get:function(){return this.acl.groups?this.acl.groups.r:[]}},{key:"writerGroups",get:function(){return this.acl.groups?this.acl.groups.w:[]}},{key:"globallyReadable",set:function(e){this.acl.gr=e||!1}},{key:"globallyWritable",set:function(e){this.acl.gw=e||!1}}]),e}()}).call(t,n(289))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MobileIdentityConnect=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(294),u=r(a),s=n(420),c=n(298),l=n(517),f=n(418),h=n(557),p=n(587),d=r(p),v=n(507),y=r(v),m=n(327),g=r(m),_=e.env.KINVEY_MIC_AUTH_PATHNAME||"/oauth/auth",b=e.env.KINVEY_MIC_TOKEN_PATHNAME||"/oauth/token";t.MobileIdentityConnect=function(){function t(){var n=arguments.length<=0||void 0===arguments[0]?f.Client.sharedInstance():arguments[0];o(this,t),this.client=new f.Client({protocol:e.env.KINVEY_MIC_PROTOCOL||"https:",host:e.env.KINVEY_MIC_HOST||"auth.kinvey.com",appKey:n.appKey,appSecret:n.appSecret,masterSecret:n.masterSecret,encryptionKey:n.encryptionKey})}return i(t,[{key:"login",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?s.AuthorizationGrant.AuthorizationCodeLoginPage:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=this.client.appKey,i=u["default"].resolve().then(function(){if(n===s.AuthorizationGrant.AuthorizationCodeLoginPage)return t.requestCodeWithPopup(o,e,r);if(n===s.AuthorizationGrant.AuthorizationCodeAPI)return t.requestTempLoginUrl(o,e,r).then(function(n){return t.requestCodeWithUrl(n,o,e,r)});throw new c.KinveyError("The authorization grant "+n+" is unsupported. Please use a supported authorization grant.")}).then(function(n){return t.requestToken(n,o,e,r)});return i}},{key:"requestTempLoginUrl",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r="/";if(n.version){var o=n.version;(0,g["default"])(o)||(o=String(o)),r=d["default"].join(r,0===o.indexOf("v")?o:"v"+o)}var i=new l.NetworkRequest({method:s.HttpMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:y["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:d["default"].join(r,_)}),properties:n.properties,data:{client_id:e,redirect_uri:t,response_type:"code"}});return i.execute().then(function(e){return e.data.temp_login_uri})}},{key:"requestCodeWithPopup",value:function(e,t){var n=this,r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=u["default"].resolve().then(function(){var o="/";if(r.version){var i=r.version;(0,g["default"])(i)||(i=String(i)),o=d["default"].join(o,0===i.indexOf("v")?i:"v"+i)}var a=new h.Popup;return a.open(y["default"].format({protocol:n.client.protocol,host:n.client.host,pathname:d["default"].join(o,_),query:{client_id:e,redirect_uri:t,response_type:"code"}}))}).then(function(e){var n=new u["default"](function(n,r){function o(r){0===r.indexOf(t)&&(a=!0,e.removeAllListeners(),e.close(),n(y["default"].parse(r,!0).query.code))}function i(){e.removeAllListeners(),a||r(new Error("Login has been cancelled."))}var a=!1;e.on("loaded",o),e.on("closed",i)});return n});return o}},{key:"requestCodeWithUrl",value:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=u["default"].resolve().then(function(){var o=new l.NetworkRequest({method:s.HttpMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:e,properties:r.properties,data:{client_id:t,redirect_uri:n,response_type:"code",username:r.username,password:r.password},followRedirect:!1});return o.execute()}).then(function(e){var t=e.getHeader("location");if(t)return y["default"].parse(t,!0).query.code;throw new c.KinveyError("Unable to authorize user with username "+r.username+".")});return o}},{key:"requestToken",value:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=new l.NetworkRequest({method:s.HttpMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:s.AuthType.App,url:y["default"].format({protocol:this.client.protocol,host:this.client.host,pathname:b}),properties:r.properties,data:{grant_type:"authorization_code",client_id:t,redirect_uri:n,code:e}});o.automaticallyRefreshAuthToken=!1;var i=o.execute().then(function(e){return e.data});return i}}],[{key:"identity",get:function(){return e.env.KINVEY_MIC_IDENTITY||"kinveyAuth"}}]),t}()}).call(t,n(289))},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Popup=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(558),c=n(429),l=n(559),f=r(l);t.Popup=function(t){function n(){return o(this,n),i(this,Object.getPrototypeOf(n).apply(this,arguments))}return a(n,t),u(n,[{key:"open",value:function(){var t=this,n=arguments.length<=0||void 0===arguments[0]?"/":arguments[0];this.eventListeners={loadHandler:(0,f["default"])(this.loadHandler,this),clickHandler:(0,f["default"])(this.clickHandler,this),closeHandler:(0,f["default"])(this.closeHandler,this)};var r=new Promise(function(r,o){if((0,c.isTitanium)())t.tiWebView=Titanium.UI.createWebView({width:"100%",height:"100%",url:n}),t.popup=Titanium.UI.createWindow({backgroundColor:"white",barColor:"#000",title:"Mobile Identity Connect",modal:!0}),t.popup.add(t.tiWebView),(0,c.isiOS)()?(t.tiWin=Titanium.UI.createWindow({backgroundColor:"white",barColor:"#e3e3e3",title:"Mobile Identity Connect"}),t.tiWin.add(t.tiWebView),t.tiCloseButton=Titanium.UI.createButton({title:"Close",style:Titanium.UI.iPhone.SystemButtonStyle.DONE}),t.tiWin.setLeftNavButton(t.tiCloseButton),t.tiCloseButton.addEventListener("click",t.eventListeners.clickHandler),t.popup=Titanium.UI.iOS.createNavigationWindow({backgroundColor:"white",window:t.tiWin,modal:!0})):(0,c.isAndroid)()&&t.popup.addEventListener("androidback",t.eventListeners.closeHandler),t.tiWebView.addEventListener("load",t.eventListeners.loadHandler),t.tiWebView.addEventListener("error",t.eventListeners.loadHandler),t.popup.addEventListener("close",t.eventListeners.closeHandler),t.popup.open(),r(t);else if((0,c.isPhoneGap)()){if(t.popup=e.open(n,"_blank","location=yes"),!t.popup)return o(new Error("The popup was blocked."));t.popup.addEventListener("loadstart",t.eventListeners.loadHandler),t.popup.addEventListener("exit",t.eventListeners.closeHandler)}else{if(t.popup=e.open(n,"_blank","toolbar=no,location=no"),!t.popup)return o(new Error("The popup was blocked."));t.interval=setInterval(function(){if(t.popup.closed)t.closeHandler();else try{t.loadHandler({url:t.popup.location.href})}catch(e){}},100)}return r(t)});return r}},{key:"close",value:function(){var e=this,t=new Promise(function(t){e.popup.close(),t()});return t}},{key:"loadHandler",value:function(e){this.emit("loaded",e.url)}},{key:"clickHandler",value:function(){this.close()}},{key:"closeHandler",value:function(){clearTimeout(this.interval),this.popup.removeEventListener("close",this.eventListeners.closeHandler),this.popup.removeEventListener("loadstart",this.eventListeners.loadHandler),this.popup.removeEventListener("exit",this.eventListeners.closeHander),(0,c.isTitanium)()&&(this.tiWebView.removeEventListener("load",this.eventListeners.loadHandler),this.tiWebView.removeEventListener("error",this.eventListeners.loadHandler),(0,c.isiOS)()?this.tiCloseButton.removeEventListener("click",this.eventListeners.clickHandler):(0,c.isAndroid)()&&(this.popup.close(),this.popup.removeEventListener("androidback",this.eventListeners.closeHandler))),this.emit("closed")}}]),n}(s.EventEmitter)}).call(t,function(){return this}())},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,u,s,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(i(n))for(u=Array.prototype.slice.call(arguments,1),c=n.slice(),o=c.length,s=0;o>s;s++)c[s].apply(this,u);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,a,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(u=a;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){o=u;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){var r=n(560),o=n(582),i=n(584),a=n(411),u=1,s=32,c=a(function(e,t,n){var a=u;if(n.length){var l=i(n,o(c));a|=s}return r(e,a,t,n,l)});c.placeholder={},e.exports=c},function(e,t,n){function r(e,t,n,r,w,E,x,k){var O=t&v;if(!O&&"function"!=typeof e)throw new TypeError(p);var j=r?r.length:0;if(j||(t&=~(g|_),r=w=void 0),x=void 0===x?x:b(h(x),0),k=void 0===k?k:h(k),j-=w?w.length:0,t&_){var S=r,T=w;r=w=void 0}var I=O?void 0:c(e),A=[e,t,n,r,w,S,T,E,x,k];if(I&&l(A,I),e=A[0],t=A[1],n=A[2],r=A[3],w=A[4],k=A[9]=null==A[9]?O?0:e.length:b(A[9]-j,0),!k&&t&(y|m)&&(t&=~(y|m)),t&&t!=d)P=t==y||t==m?a(e,t,k):t!=g&&t!=(d|g)||w.length?u.apply(void 0,A):s(e,t,n,r);else var P=i(e,t,n);var C=I?o:f;return C(P,A)}var o=n(561),i=n(563),a=n(565),u=n(566),s=n(585),c=n(574),l=n(586),f=n(580),h=n(413),p="Expected a function",d=1,v=2,y=8,m=16,g=32,_=64,b=Math.max;e.exports=r},function(e,t,n){var r=n(401),o=n(562),i=o?function(e,t){return o.set(e,t),e}:r;e.exports=i},function(e,t,n){var r=n(383),o=r&&new r;e.exports=o},function(e,t,n){function r(e,t,n){function r(){var t=this&&this!==i&&this instanceof r?s:e;return t.apply(u?n:this,arguments)}var u=t&a,s=o(e);return r}var o=n(564),i=n(355),a=1;e.exports=r},function(e,t,n){function r(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=o(e.prototype),r=e.apply(n,t);return i(r)?r:n}}var o=n(471),i=n(303);e.exports=r},function(e,t,n){function r(e,t,n){function r(){for(var i=arguments.length,h=Array(i),p=i,d=s(r);p--;)h[p]=arguments[p];var v=3>i&&h[0]!==d&&h[i-1]!==d?[]:c(h,d);if(i-=v.length,n>i)return u(e,t,a,r.placeholder,void 0,h,v,void 0,void 0,n-i);var y=this&&this!==l&&this instanceof r?f:e;return o(y,this,h)}var f=i(e);return r}var o=n(412),i=n(564),a=n(566),u=n(570),s=n(582),c=n(584),l=n(355);e.exports=r},function(e,t,n){function r(e,t,n,_,b,w,E,x,k,O){function j(){for(var p=arguments.length,d=p,v=Array(p);d--;)v[d]=arguments[d];if(A)var y=c(j),m=a(v,y);if(_&&(v=o(v,_,b,A)),w&&(v=i(v,w,E,A)),p-=m,A&&O>p){var g=f(v,y);return s(e,t,r,j.placeholder,n,v,g,x,k,O-p)}var R=T?n:this,N=I?R[e]:e;return p=v.length,x?v=l(v,x):P&&p>1&&v.reverse(),S&&p>k&&(v.length=k),this&&this!==h&&this instanceof j&&(N=C||u(N)),N.apply(R,v)}var S=t&m,T=t&p,I=t&d,A=t&(v|y),P=t&g,C=I?void 0:u(e);return j}var o=n(567),i=n(568),a=n(569),u=n(564),s=n(570),c=n(582),l=n(583),f=n(584),h=n(355),p=1,d=2,v=8,y=16,m=128,g=512;e.exports=r},function(e,t){function n(e,t,n,o){for(var i=-1,a=e.length,u=n.length,s=-1,c=t.length,l=r(a-u,0),f=Array(c+l),h=!o;++s<c;)f[s]=t[s];for(;++i<u;)(h||a>i)&&(f[n[i]]=e[i]);for(;l--;)f[s++]=e[i++];return f}var r=Math.max;e.exports=n},function(e,t){function n(e,t,n,o){for(var i=-1,a=e.length,u=-1,s=n.length,c=-1,l=t.length,f=r(a-s,0),h=Array(f+l),p=!o;++i<f;)h[i]=e[i];for(var d=i;++c<l;)h[d+c]=t[c];for(;++u<s;)(p||a>i)&&(h[d+n[u]]=e[i++]);return h}var r=Math.max;e.exports=n},function(e,t){function n(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&r++;return r}e.exports=n},function(e,t,n){function r(e,t,n,r,p,d,v,y,m,g){var _=t&l,b=y?o(y):void 0,w=_?v:void 0,E=_?void 0:v,x=_?d:void 0,k=_?void 0:d;t|=_?f:h,t&=~(_?h:f),t&c||(t&=~(u|s));var O=[e,t,p,x,w,k,E,b,m,g],j=n.apply(void 0,O);return i(e)&&a(j,O),j.placeholder=r,j}var o=n(452),i=n(571),a=n(580),u=1,s=2,c=4,l=8,f=32,h=64;e.exports=r},function(e,t,n){function r(e){var t=a(e),n=u[t];if("function"!=typeof n||!(t in o.prototype))return!1;if(e===n)return!0;var r=i(n);return!!r&&e===r[0]}var o=n(572),i=n(574),a=n(575),u=n(577);e.exports=r},function(e,t,n){function r(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}var o=n(471),i=n(573),a=4294967295;r.prototype=o(i.prototype),r.prototype.constructor=r,e.exports=r},function(e,t){function n(){}e.exports=n},function(e,t,n){var r=n(562),o=n(522),i=r?function(e){return r.get(e)}:o;e.exports=i},function(e,t,n){function r(e){for(var t=e.name+"",n=o[t],r=a.call(o,t)?n.length:0;r--;){var i=n[r],u=i.func;if(null==u||u==e)return i.name}return t}var o=n(576),i=Object.prototype,a=i.hasOwnProperty;e.exports=r},function(e,t){var n={};e.exports=n},function(e,t,n){function r(e){if(s(e)&&!u(e)&&!(e instanceof o)){if(e instanceof i)return e;if(f.call(e,"__wrapped__"))return c(e)}return new i(e)}var o=n(572),i=n(578),a=n(573),u=n(326),s=n(325),c=n(579),l=Object.prototype,f=l.hasOwnProperty;r.prototype=a.prototype,r.prototype.constructor=r,e.exports=r},function(e,t,n){function r(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var o=n(471),i=n(573);r.prototype=o(i.prototype),r.prototype.constructor=r,e.exports=r},function(e,t,n){function r(e){if(e instanceof o)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=a(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var o=n(572),i=n(578),a=n(452);e.exports=r},function(e,t,n){var r=n(561),o=n(581),i=150,a=16,u=function(){var e=0,t=0;return function(n,u){var s=o(),c=a-(s-t);if(t=s,c>0){if(++e>=i)return n}else e=0;return r(n,u)}}();e.exports=u},function(e,t){var n=Date.now;e.exports=n},function(e,t){function n(e){var t=e;return t.placeholder}e.exports=n},function(e,t,n){function r(e,t){for(var n=e.length,r=a(t.length,n),u=o(e);r--;){var s=t[r];e[r]=i(s,n)?u[s]:void 0}return e}var o=n(452),i=n(328),a=Math.min;e.exports=r},function(e,t){function n(e,t){for(var n=-1,o=e.length,i=0,a=[];++n<o;){var u=e[n];u!==t&&u!==r||(e[n]=r,a[i++]=n)}return a}var r="__lodash_placeholder__";e.exports=n},function(e,t,n){function r(e,t,n,r){function s(){for(var t=-1,i=arguments.length,u=-1,f=r.length,h=Array(f+i),p=this&&this!==a&&this instanceof s?l:e;++u<f;)h[u]=r[u];for(;i--;)h[u++]=arguments[++t];return o(p,c?n:this,h)}var c=t&u,l=i(e);return s}var o=n(412),i=n(564),a=n(355),u=1;e.exports=r},function(e,t,n){function r(e,t){var n=e[1],r=t[1],y=n|r,m=(c|l|p)>y,g=r==p&&n==h||r==p&&n==d&&e[7].length<=t[8]||r==(p|d)&&t[7].length<=t[8]&&n==h;if(!m&&!g)return e;r&c&&(e[2]=t[2],y|=n&c?0:f);var _=t[3];if(_){var b=e[3];e[3]=b?o(b,_,t[4]):a(_),e[4]=b?u(e[3],s):a(t[4])}return _=t[5],_&&(b=e[5],e[5]=b?i(b,_,t[6]):a(_),e[6]=b?u(e[5],s):a(t[6])),_=t[7],_&&(e[7]=a(_)),r&p&&(e[8]=null==e[8]?t[8]:v(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=y,e}var o=n(567),i=n(568),a=n(452),u=n(584),s="__lodash_placeholder__",c=1,l=2,f=4,h=8,p=128,d=256,v=Math.min;e.exports=r},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return o.exec(e).slice(1)};t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");
a&&(t=a+"/"+t,o="/"===a.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+t||"."},t.normalize=function(e){var o=t.isAbsolute(e),i="/"===a(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),a=Math.min(o.length,i.length),u=a,s=0;a>s;s++)if(o[s]!==i[s]){u=s;break}for(var c=[],s=u;s<o.length;s++)c.push("..");return c=c.concat(i.slice(u)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return i(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(t,n(289))},function(e,t,n){var r;(function(o,i){Object.create||(Object.create=function(){function e(){}return function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Object.keys||(Object.keys=function(e,t,n){n=[];for(t in e)n.hasOwnProperty.call(e,t)&&n.push(t);return n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)o in t&&e.call(r,t[o],o,t);return this}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var n=[];return this.forEach(function(r,o,i){e.call(t||void 0,r,o,i)&&n.push(r)}),n}),Array.prototype.map||(Array.prototype.map=function(e,t){var n=[];return this.forEach(function(r,o,i){n.push(e.call(t||void 0,r,o,i))}),n}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"object"!=typeof window||"object"!=typeof window.location||window.location.assign||(window.location.assign=function(e){window.location=e}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=[].slice,r=n.call(arguments,1),o=this,i=function(){return o.apply(this instanceof t?this:e||window,r.concat(n.call(arguments)))};return t.prototype=this.prototype,i.prototype=new t,i});var a=function(e){return a.use(e)};a.utils={extend:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(Array.isArray(e)&&Array.isArray(t))Array.prototype.push.apply(e,t);else if(e instanceof Object&&t instanceof Object&&e!==t)for(var n in t)e[n]=a.utils.extend(e[n],t[n]);else Array.isArray(t)&&(t=t.slice(0)),e=t}),e}},a.utils.extend(a,{settings:{redirect_uri:window.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,popup:{resizable:1,scrollbars:1,width:500,height:550},scope:["basic"],scope_map:{basic:""},default_service:null,force:null,page_uri:window.location.href},services:{},use:function(e){var t=Object.create(this);return t.settings=Object.create(this.settings),e&&(t.settings.default_service=e),t.utils.Event.call(t),t},init:function(e,t){var n=this.utils;if(!e)return this.services;for(var r in e)e.hasOwnProperty(r)&&"object"!=typeof e[r]&&(e[r]={id:e[r]});return n.extend(this.services,e),t&&(n.extend(this.settings,t),"redirect_uri"in t&&(this.settings.redirect_uri=n.url(t.redirect_uri).href)),this},login:function(){function e(e,t){a.emit(e,t)}function t(e){return e}function n(e){return!!e}var r,o=this,i=o.utils,u=i.error,s=i.Promise(),c=i.args({network:"s",options:"o",callback:"f"},arguments),l=i.diffKey(c.options,o.settings),f=c.options=i.merge(o.settings,c.options||{});if(f.popup=i.merge(o.settings.popup,c.options.popup||{}),c.network=c.network||o.settings.default_service,s.proxy.then(c.callback,c.callback),s.proxy.then(e.bind(this,"auth.login auth"),e.bind(this,"auth.failed auth")),"string"!=typeof c.network||!(c.network in o.services))return s.reject(u("invalid_network","The provided network was not recognized"));var h=o.services[c.network],p=i.globalEvent(function(e){var t;t=e?JSON.parse(e):u("cancelled","The authentication was not completed"),t.error?s.reject(t):(i.store(t.network,t),s.fulfill({network:t.network,authResponse:t}))}),d=i.url(f.redirect_uri).href,v=h.oauth.response_type||f.response_type;/\bcode\b/.test(v)&&!h.oauth.grant&&(v=v.replace(/\bcode\b/,"token")),c.qs=i.merge(l,{client_id:encodeURIComponent(h.id),response_type:encodeURIComponent(v),redirect_uri:encodeURIComponent(d),display:f.display,state:{client_id:h.id,network:c.network,display:f.display,callback:p,state:f.state,redirect_uri:d}});var y=i.store(c.network),m=/[,\s]+/,g=o.settings.scope?[o.settings.scope.toString()]:[],_=i.merge(o.settings.scope_map,h.scope||{});if(f.scope&&g.push(f.scope.toString()),y&&"scope"in y&&y.scope instanceof String&&g.push(y.scope),g=g.join(",").split(m),g=i.unique(g).filter(n),c.qs.state.scope=g.join(","),g=g.map(function(e){return e in _?_[e]:e}),g=g.join(",").split(m),g=i.unique(g).filter(n),c.qs.scope=g.join(h.scope_delim||","),f.force===!1&&y&&"access_token"in y&&y.access_token&&"expires"in y&&y.expires>(new Date).getTime()/1e3){var b=i.diff((y.scope||"").split(m),(c.qs.state.scope||"").split(m));if(0===b.length)return s.fulfill({unchanged:!0,network:c.network,authResponse:y}),s}if("page"===f.display&&f.page_uri&&(c.qs.state.page_uri=i.url(f.page_uri).href),"login"in h&&"function"==typeof h.login&&h.login(c),(!/\btoken\b/.test(v)||parseInt(h.oauth.version,10)<2||"none"===f.display&&h.oauth.grant&&y&&y.refresh_token)&&(c.qs.state.oauth=h.oauth,c.qs.state.oauth_proxy=f.oauth_proxy),c.qs.state=encodeURIComponent(JSON.stringify(c.qs.state)),1===parseInt(h.oauth.version,10)?r=i.qs(f.oauth_proxy,c.qs,t):"none"===f.display&&h.oauth.grant&&y&&y.refresh_token?(c.qs.refresh_token=y.refresh_token,r=i.qs(f.oauth_proxy,c.qs,t)):r=i.qs(h.oauth.auth,c.qs,t),e("auth.init",c),"none"===f.display)i.iframe(r,d);else if("popup"===f.display)var w=i.popup(r,d,f.popup),E=setInterval(function(){if((!w||w.closed)&&(clearInterval(E),!s.state)){var e=u("cancelled","Login has been cancelled");w||(e=u("blocked","Popup was blocked")),e.network=c.network,s.reject(e)}},100);else window.location=r;return s.proxy},logout:function(){function e(e,t){a.emit(e,t)}var t=this,n=t.utils,r=n.error,o=n.Promise(),i=n.args({name:"s",options:"o",callback:"f"},arguments);if(i.options=i.options||{},o.proxy.then(i.callback,i.callback),o.proxy.then(e.bind(this,"auth.logout auth"),e.bind(this,"error")),i.name=i.name||this.settings.default_service,i.authResponse=n.store(i.name),!i.name||i.name in t.services)if(i.name&&i.authResponse){var u=function(e){n.store(i.name,null),o.fulfill(a.utils.merge({network:i.name},e||{}))},s={};if(i.options.force){var c=t.services[i.name].logout;if(c)if("function"==typeof c&&(c=c(u,i)),"string"==typeof c)n.iframe(c),s.force=null,s.message="Logout success on providers site was indeterminate";else if(void 0===c)return o.proxy}u(s)}else o.reject(r("invalid_session","There was no session to remove"));else o.reject(r("invalid_network","The network was unrecognized"));return o.proxy},getAuthResponse:function(e){return e=e||this.settings.default_service,e&&e in this.services?this.utils.store(e)||null:null},events:{}}),a.utils.extend(a.utils,{error:function(e,t){return{error:{code:e,message:t}}},qs:function(e,t,n){if(t){n=n||encodeURIComponent;for(var r in t){var o="([\\?\\&])"+r+"=[^\\&]*",i=new RegExp(o);e.match(i)&&(e=e.replace(i,"$1"+r+"="+n(t[r])),delete t[r])}}return this.isEmpty(t)?e:e+(e.indexOf("?")>-1?"&":"?")+this.param(t,n)},param:function(e,t){var n,r,o={};if("string"==typeof e){if(t=t||decodeURIComponent,r=e.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var i=0;i<r.length;i++)n=r[i].match(/([^=]+)=(.*)/),o[n[1]]=t(n[2]);return o}t=t||encodeURIComponent;var a=e;o=[];for(var u in a)a.hasOwnProperty(u)&&a.hasOwnProperty(u)&&o.push([u,"?"===a[u]?"?":t(a[u])].join("="));return o.join("&")},store:function(){function e(){var e={};try{e=JSON.parse(n.getItem("hello"))||{}}catch(t){}return e}function t(e){n.setItem("hello",JSON.stringify(e))}for(var n,r=["localStorage","sessionStorage"],o=-1,i="test";r[++o];)try{n=window[r[o]],n.setItem(i+o,o),n.removeItem(i+o);break}catch(a){n=null}if(!n){var u=null;n={getItem:function(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].replace(/(^\s+|\s+$)/,"");if(r&&0===r.indexOf(e))return r.substr(e.length)}return u},setItem:function(e,t){u=t,document.cookie=e+"="+t}},u=n.getItem("hello")}return function(n,r,o){var i=e();if(n&&void 0===r)return i[n]||null;if(n&&null===r)try{delete i[n]}catch(a){i[n]=null}else{if(!n)return i;i[n]=r}return t(i),i||null}}(),append:function(e,t,n){var r="string"==typeof e?document.createElement(e):e;if("object"==typeof t)if("tagName"in t)n=t;else for(var o in t)if(t.hasOwnProperty(o))if("object"==typeof t[o])for(var i in t[o])t[o].hasOwnProperty(i)&&(r[o][i]=t[o][i]);else"html"===o?r.innerHTML=t[o]:/^on/.test(o)?r[o]=t[o]:r.setAttribute(o,t[o]);return"body"===n?!function a(){document.body?document.body.appendChild(r):setTimeout(a,16)}():"object"==typeof n?n.appendChild(r):"string"==typeof n&&document.getElementsByTagName(n)[0].appendChild(r),r},iframe:function(e){this.append("iframe",{src:e,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")},merge:function(){var e=Array.prototype.slice.call(arguments);return e.unshift({}),this.extend.apply(null,e)},args:function(e,t){var n={},r=0,o=null,i=null;for(i in e)if(e.hasOwnProperty(i))break;if(1===t.length&&"object"==typeof t[0]&&"o!"!=e[i])for(i in t[0])if(e.hasOwnProperty(i)&&i in e)return t[0];for(i in e)if(e.hasOwnProperty(i))if(o=typeof t[r],"function"==typeof e[i]&&e[i].test(t[r])||"string"==typeof e[i]&&(e[i].indexOf("s")>-1&&"string"===o||e[i].indexOf("o")>-1&&"object"===o||e[i].indexOf("i")>-1&&"number"===o||e[i].indexOf("a")>-1&&"object"===o||e[i].indexOf("f")>-1&&"function"===o))n[i]=t[r++];else if("string"==typeof e[i]&&e[i].indexOf("!")>-1)return!1;return n},url:function(e){if(e){if(window.URL&&URL instanceof Function&&0!==URL.length)return new URL(e,window.location);var t=document.createElement("a");return t.href=e,t.cloneNode(!1)}return window.location},diff:function(e,t){return t.filter(function(t){return-1===e.indexOf(t)})},diffKey:function(e,t){if(e||!t){var n={};for(var r in e)r in t||(n[r]=e[r]);return n}return e},unique:function(e){return Array.isArray(e)?e.filter(function(t,n){return e.indexOf(t)===n}):[]},isEmpty:function(e){if(!e)return!0;if(Array.isArray(e))return!e.length;if("object"==typeof e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},Promise:function(){var e=0,t=1,n=2,r=function(t){return this instanceof r?(this.id="Thenable/1.0.6",this.state=e,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new r(t)};r.prototype={fulfill:function(e){return a(this,t,"fulfillValue",e)},reject:function(e){return a(this,n,"rejectReason",e)},then:function(e,t){var n=this,o=new r;return n.onFulfilled.push(c(e,o,"fulfill")),n.onRejected.push(c(t,o,"reject")),u(n),o.proxy}};var a=function(t,n,r,o){return t.state===e&&(t.state=n,t[r]=o,u(t)),t},u=function(e){e.state===t?s(e,"onFulfilled",e.fulfillValue):e.state===n&&s(e,"onRejected",e.rejectReason)},s=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var a=function(){for(var e=0;e<r.length;e++)r[e](n)};"object"==typeof o&&"function"==typeof o.nextTick?o.nextTick(a):"function"==typeof i?i(a):setTimeout(a,0)}},c=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var o;try{o=e(r)}catch(i){return void t.reject(i)}l(t,o)}}},l=function(e,t){if(e===t||e.proxy===t)return void e.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof t&&null!==t||"function"==typeof t)try{n=t.then}catch(r){return void e.reject(r)}if("function"!=typeof n)e.fulfill(t);else{var o=!1;try{n.call(t,function(n){o||(o=!0,n===t?e.reject(new TypeError("circular thenable chain")):l(e,n))},function(t){o||(o=!0,e.reject(t))})}catch(r){o||e.reject(r)}}};return r}(),Event:function(){var e=/[\s\,]+/;return this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(t,n){if(n&&"function"==typeof n)for(var r=t.split(e),o=0;o<r.length;o++)this.events[r[o]]=[n].concat(this.events[r[o]]||[]);return this},this.off=function(e,t){return this.findEvents(e,function(e,n){t&&this.events[e][n]!==t||(this.events[e][n]=null)}),this},this.emit=function(e){var t=Array.prototype.slice.call(arguments,1);t.push(e);for(var n=function(n,r){t[t.length-1]="*"===n?e:n,this.events[n][r].apply(this,t)},r=this;r&&r.findEvents;)r.findEvents(e+",*",n),r=r.parent;return this},this.emitAfter=function(){var e=this,t=arguments;return setTimeout(function(){e.emit.apply(e,t)},0),this},this.findEvents=function(t,n){var r=t.split(e);for(var o in this.events)if(this.events.hasOwnProperty(o)&&r.indexOf(o)>-1)for(var i=0;i<this.events[o].length;i++)this.events[o][i]&&n.call(this,o,i)},this},globalEvent:function(e,t){return t=t||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),window[t]=function(){try{e.apply(this,arguments)&&delete window[t]}catch(n){console.error(n)}},t},popup:function(e,t,n){var r=document.documentElement;if(n.height){var o=void 0!==window.screenTop?window.screenTop:screen.top,i=screen.height||window.innerHeight||r.clientHeight;n.top=parseInt((i-n.height)/2,10)+o}if(n.width){var a=void 0!==window.screenLeft?window.screenLeft:screen.left,u=screen.width||window.innerWidth||r.clientWidth;n.left=parseInt((u-n.width)/2,10)+a}var s=[];Object.keys(n).forEach(function(e){var t=n[e];s.push(e+(null!==t?"="+t:""))}),-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(e=t+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(e)));var c=window.open(e,"_blank",s.join(","));return c&&c.focus&&c.focus(),c},responseHandler:function(e,t){function n(e,t,n){var o=e.callback,a=e.network;if(i.store(a,e),!("display"in e&&"page"===e.display)){if(n&&o&&o in n){try{delete e.callback}catch(u){}i.store(a,e);var s=JSON.stringify(e);try{n[o](s)}catch(u){}}r()}}function r(){if(e.frameElement)t.document.body.removeChild(e.frameElement);else{try{e.close()}catch(n){}e.addEventListener&&e.addEventListener("load",function(){e.close()})}}var o,i=this,a=e.location;if(o=i.param(a.search),o&&o.state&&(o.code||o.oauth_token)){var u=JSON.parse(o.state);o.redirect_uri=u.redirect_uri||a.href.replace(/[\?\#].*$/,"");var s=u.oauth_proxy+"?"+i.param(o);return void a.assign(s)}if(o=i.merge(i.param(a.search||""),i.param(a.hash||"")),o&&"state"in o){try{var c=JSON.parse(o.state);i.extend(o,c)}catch(l){console.error("Could not decode state parameter")}if("access_token"in o&&o.access_token&&o.network)o.expires_in&&0!==parseInt(o.expires_in,10)||(o.expires_in=0),o.expires_in=parseInt(o.expires_in,10),o.expires=(new Date).getTime()/1e3+(o.expires_in||31536e3),n(o,e,t);else if("error"in o&&o.error&&o.network)o.error={code:o.error,message:o.error_message||o.error_description},n(o,e,t);else if(o.callback&&o.callback in t){var f="result"in o&&o.result?JSON.parse(o.result):!1;t[o.callback](f),r()}o.page_uri&&a.assign(o.page_uri)}else if("oauth_redirect"in o)return void a.assign(decodeURIComponent(o.oauth_redirect))}}),a.utils.Event.call(a),function(e){var t={},n={};e.on("auth.login, auth.logout",function(n){n&&"object"==typeof n&&n.network&&(t[n.network]=e.utils.store(n.network)||{})}),function r(){var o=(new Date).getTime()/1e3,i=function(t){e.emit("auth."+t,{network:a,authResponse:u})};for(var a in e.services)if(e.services.hasOwnProperty(a)){if(!e.services[a].id)continue;var u=e.utils.store(a)||{},s=e.services[a],c=t[a]||{};if(u&&"callback"in u){var l=u.callback;try{delete u.callback}catch(f){}e.utils.store(a,u);try{window[l](u)}catch(f){}}if(u&&"expires"in u&&u.expires<o){var h=s.refresh||u.refresh_token;!h||a in n&&!(n[a]<o)?h||a in n||(i("expired"),n[a]=!0):(e.emit("notice",a+" has expired trying to resignin"),e.login(a,{display:"none",force:!1}),n[a]=o+600);continue}if(c.access_token===u.access_token&&c.expires===u.expires)continue;!u.access_token&&c.access_token?i("logout"):u.access_token&&!c.access_token?i("login"):u.expires!==c.expires&&i("update"),t[a]=u,a in n&&delete n[a]}setTimeout(r,1e3)}()}(a),a.api=function(){function e(e){e=e.replace(/\@\{([a-z\_\-]+)(\|.*?)?\}/gi,function(e,t,n){var a=n?n.replace(/^\|/,""):"";return t in i.query?(a=i.query[t],delete i.query[t]):i.data&&t in i.data?(a=i.data[t],delete i.data[t]):n||o.reject(r("missing_attribute","The attribute "+t+" is missing from the request")),a}),e.match(/^https?:\/\//)||(e=c.base+e),i.url=e,n.request(i,function(e,t){if(!i.formatResponse)return void(("object"==typeof t?t.statusCode>=400:"object"==typeof e&&"error"in e)?o.reject(e):o.fulfill(e));if(e===!0?e={success:!0}:e||(e={}),"delete"===i.method&&(e=!e||n.isEmpty(e)?{success:!0}:e),c.wrap&&(i.path in c.wrap||"default"in c.wrap)){var r=i.path in c.wrap?i.path:"default",a=((new Date).getTime(),c.wrap[r](e,t,i));a&&(e=a)}e&&"paging"in e&&e.paging.next&&("?"===e.paging.next[0]?e.paging.next=i.path+e.paging.next:e.paging.next+="#"+i.path),!e||"error"in e?o.reject(e):o.fulfill(e)})}var t=this,n=t.utils,r=n.error,o=n.Promise(),i=n.args({path:"s!",query:"o",method:"s",data:"o",timeout:"i",callback:"f"},arguments);i.method=(i.method||"get").toLowerCase(),i.headers=i.headers||{},i.query=i.query||{},"get"!==i.method&&"delete"!==i.method||(n.extend(i.query,i.data),i.data={});var a=i.data=i.data||{};if(o.then(i.callback,i.callback),!i.path)return o.reject(r("invalid_path","Missing the path parameter from the request"));i.path=i.path.replace(/^\/+/,"");var u=(i.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(u in t.services){i.network=u;var s=new RegExp("^"+u+":?/?");i.path=i.path.replace(s,"")}i.network=t.settings.default_service=i.network||t.settings.default_service;var c=t.services[i.network];if(!c)return o.reject(r("invalid_network","Could not match the service requested: "+i.network));if(i.method in c&&i.path in c[i.method]&&c[i.method][i.path]===!1)return o.reject(r("invalid_path","The provided path is not available on the selected network"));i.oauth_proxy||(i.oauth_proxy=t.settings.oauth_proxy),"proxy"in i||(i.proxy=i.oauth_proxy&&c.oauth&&1===parseInt(c.oauth.version,10)),"timeout"in i||(i.timeout=t.settings.timeout),"formatResponse"in i||(i.formatResponse=!0),i.authResponse=t.getAuthResponse(i.network),i.authResponse&&i.authResponse.access_token&&(i.query.access_token=i.authResponse.access_token);var l,f=i.path;i.options=n.clone(i.query),i.data=n.clone(a);var h=c[{"delete":"del"}[i.method]||i.method]||{};if("get"===i.method){var p=f.split(/[\?#]/)[1];p&&(n.extend(i.query,n.param(p)),f=f.replace(/\?.*?(#|$)/,"$1"))}return(l=f.match(/#(.+)/,""))?(f=f.split("#")[0],i.path=l[1]):f in h?(i.path=f,f=h[f]):"default"in h&&(f=h["default"]),i.redirect_uri=t.settings.redirect_uri,i.xhr=c.xhr,i.jsonp=c.jsonp,i.form=c.form,"function"==typeof f?f(i,e):e(f),o.proxy},a.utils.extend(a.utils,{request:function(e,t){function n(e,t){var n;e.authResponse&&e.authResponse.oauth&&1===parseInt(e.authResponse.oauth.version,10)&&(n=e.query.access_token,delete e.query.access_token,e.proxy=!0),!e.data||"get"!==e.method&&"delete"!==e.method||(r.extend(e.query,e.data),e.data=null);var o=r.qs(e.url,e.query);e.proxy&&(o=r.qs(e.oauth_proxy,{path:o,access_token:n||"",then:e.proxy_response_type||("get"===e.method.toLowerCase()?"redirect":"proxy"),method:e.method.toLowerCase(),suppress_response_codes:!0})),t(o)}var r=this,o=r.error;r.isEmpty(e.data)||"FileList"in window||!r.hasBinary(e.data)||(e.xhr=!1,e.jsonp=!1);var i=this.request_cors(function(){return void 0===e.xhr||e.xhr&&("function"!=typeof e.xhr||e.xhr(e,e.query))});if(i)return void n(e,function(n){var o=r.xhr(e.method,n,e.headers,e.data,t);o.onprogress=e.onprogress||null,o.upload&&e.onuploadprogress&&(o.upload.onprogress=e.onuploadprogress)});var a=e.query;if(e.query=r.clone(e.query),e.callbackID=r.globalEvent(),e.jsonp!==!1){if(e.query.callback=e.callbackID,"function"==typeof e.jsonp&&e.jsonp(e,e.query),"get"===e.method)return void n(e,function(n){r.jsonp(n,t,e.callbackID,e.timeout)});e.query=a}if(e.form!==!1){e.query.redirect_uri=e.redirect_uri,e.query.state=JSON.stringify({callback:e.callbackID});var u;if("function"==typeof e.form&&(u=e.form(e,e.query)),"post"===e.method&&u!==!1)return void n(e,function(n){r.post(n,e.data,u,t,e.callbackID,e.timeout)})}t(o("invalid_request","There was no mechanism for handling this request"))},request_cors:function(e){return"withCredentials"in new XMLHttpRequest&&e()},domInstance:function(e,t){var n="HTML"+(e||"").replace(/^[a-z]/,function(e){return e.toUpperCase()})+"Element";return t?window[n]?t instanceof window[n]:window.Element?t instanceof window.Element&&(!e||t.tagName&&t.tagName.toLowerCase()===e):!(t instanceof Object||t instanceof Array||t instanceof String||t instanceof Number)&&t.tagName&&t.tagName.toLowerCase()===e:!1},clone:function(e){if(null===e||"object"!=typeof e||e instanceof Date||"nodeName"in e||this.isBinary(e)||"function"==typeof FormData&&e instanceof FormData)return e;if(Array.isArray(e))return e.map(this.clone.bind(this));var t={};for(var n in e)t[n]=this.clone(e[n]);return t},xhr:function(e,t,n,r,o){function i(e){for(var t,n={},r=/([a-z\-]+):\s?(.*);?/gi;t=r.exec(e);)n[t[1]]=t[2];return n}var a=new XMLHttpRequest,u=this.error,s=!1;"blob"===e&&(s=e,e="GET"),e=e.toUpperCase(),a.onload=function(t){var n=a.response;try{n=JSON.parse(a.responseText)}catch(r){401===a.status&&(n=u("access_denied",a.statusText))}var s=i(a.getAllResponseHeaders());s.statusCode=a.status,o(n||("GET"===e?u("empty_response","Could not get resource"):{}),s)},a.onerror=function(e){var t=a.responseText;try{t=JSON.parse(a.responseText)}catch(n){}o(t||u("access_denied","Could not get resource"))};var c;if("GET"===e||"DELETE"===e)r=null;else if(r&&"string"!=typeof r&&!(r instanceof FormData)&&!(r instanceof File)&&!(r instanceof Blob)){var l=new FormData;for(c in r)r.hasOwnProperty(c)&&(r[c]instanceof HTMLInputElement?"files"in r[c]&&r[c].files.length>0&&l.append(c,r[c].files[0]):r[c]instanceof Blob?l.append(c,r[c],r.name):l.append(c,r[c]));r=l}if(a.open(e,t,!0),s&&("responseType"in a?a.responseType=s:a.overrideMimeType("text/plain; charset=x-user-defined")),n)for(c in n)a.setRequestHeader(c,n[c]);return a.send(r),a},jsonp:function(e,t,n,r){var o,i=this,a=i.error,u=0,s=document.getElementsByTagName("head")[0],c=a("server_error","server_error"),l=function(){u++||window.setTimeout(function(){t(c),s.removeChild(f)},0)};n=i.globalEvent(function(e){return c=e,!0},n),e=e.replace(new RegExp("=\\?(&|$)"),"="+n+"$1");var f=i.append("script",{id:n,name:n,src:e,async:!0,onload:l,onerror:l,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&l()}});window.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(o=i.append("script",{text:"document.getElementById('"+n+"').onerror();"}),f.async=!1),r&&window.setTimeout(function(){c=a("timeout","timeout"),l()},r),s.appendChild(f),o&&s.appendChild(o)},post:function(e,t,n,r,o,i){var a,u=this,s=u.error,c=document,l=null,f=[],h=0,p=null,d=0,v=function(e){d++||r(e)};u.globalEvent(v,o);var y;try{y=c.createElement('<iframe name="'+o+'">')}catch(m){y=c.createElement("iframe")}if(y.name=o,y.id=o,y.style.display="none",n&&n.callbackonload&&(y.onload=function(){v({response:"posted",message:"Content was posted"})}),i&&setTimeout(function(){v(s("timeout","The post operation timed out"))},i),c.body.appendChild(y),u.domInstance("form",t)){for(l=t.form,h=0;h<l.elements.length;h++)l.elements[h]!==t&&l.elements[h].setAttribute("disabled",!0);t=l}if(u.domInstance("form",t))for(l=t,h=0;h<l.elements.length;h++)l.elements[h].disabled||"file"!==l.elements[h].type||(l.encoding=l.enctype="multipart/form-data",l.elements[h].setAttribute("name","file"));else{for(p in t)t.hasOwnProperty(p)&&u.domInstance("input",t[p])&&"file"===t[p].type&&(l=t[p].form,l.encoding=l.enctype="multipart/form-data");l||(l=c.createElement("form"),c.body.appendChild(l),a=l);var g;for(p in t)if(t.hasOwnProperty(p)){var _=u.domInstance("input",t[p])||u.domInstance("textArea",t[p])||u.domInstance("select",t[p]);if(_&&t[p].form===l)_&&t[p].name!==p&&(t[p].setAttribute("name",p),t[p].name=p);else{var b=l.elements[p];if(g)for(b instanceof NodeList||(b=[b]),h=0;h<b.length;h++)b[h].parentNode.removeChild(b[h]);g=c.createElement("input"),g.setAttribute("type","hidden"),g.setAttribute("name",p),_?g.value=t[p].value:u.domInstance(null,t[p])?g.value=t[p].innerHTML||t[p].innerText:g.value=t[p],l.appendChild(g)}}for(h=0;h<l.elements.length;h++)g=l.elements[h],g.name in t||g.getAttribute("disabled")===!0||(g.setAttribute("disabled",!0),f.push(g))}l.setAttribute("method","POST"),l.setAttribute("target",o),l.target=o,l.setAttribute("action",e),setTimeout(function(){l.submit(),setTimeout(function(){try{a&&a.parentNode.removeChild(a)}catch(e){try{console.error("HelloJS: could not remove iframe")}catch(t){}}for(var n=0;n<f.length;n++)f[n]&&(f[n].setAttribute("disabled",!1),f[n].disabled=!1)},0)},100)},hasBinary:function(e){for(var t in e)if(e.hasOwnProperty(t)&&this.isBinary(e[t]))return!0;return!1},isBinary:function(e){return e instanceof Object&&(this.domInstance("input",e)&&"file"===e.type||"FileList"in window&&e instanceof window.FileList||"File"in window&&e instanceof window.File||"Blob"in window&&e instanceof window.Blob)},toBlob:function(e){var t=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,n=e.match(t);if(!n)return e;for(var r=atob(e.replace(t,"")),o=[],i=0;i<r.length;i++)o.push(r.charCodeAt(i));return new Blob([new Uint8Array(o)],{type:n[1]})}}),function(e){var t=e.api,n=e.utils;n.extend(n,{dataToJSON:function(e){var t=this,n=window,r=e.data;if(t.domInstance("form",r)?r=t.nodeListToJSON(r.elements):"NodeList"in n&&r instanceof NodeList?r=t.nodeListToJSON(r):t.domInstance("input",r)&&(r=t.nodeListToJSON([r])),("File"in n&&r instanceof n.File||"Blob"in n&&r instanceof n.Blob||"FileList"in n&&r instanceof n.FileList)&&(r={file:r}),!("FormData"in n&&r instanceof n.FormData))for(var o in r)if(r.hasOwnProperty(o))if("FileList"in n&&r[o]instanceof n.FileList)1===r[o].length&&(r[o]=r[o][0]);else{if(t.domInstance("input",r[o])&&"file"===r[o].type)continue;t.domInstance("input",r[o])||t.domInstance("select",r[o])||t.domInstance("textArea",r[o])?r[o]=r[o].value:t.domInstance(null,r[o])&&(r[o]=r[o].innerHTML||r[o].innerText)}return e.data=r,r},nodeListToJSON:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];!r.disabled&&r.name&&("file"===r.type?t[r.name]=r:t[r.name]=r.value||r.innerHTML)}return t}}),e.api=function(){var e=n.args({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments);return e.data&&n.dataToJSON(e),t.call(this,e)}}(a),a.utils.responseHandler(window,window.opener||window.parent),"object"==typeof chrome&&"object"==typeof chrome.identity&&chrome.identity.launchWebAuthFlow&&!function(){function e(t,n){var r={closed:!1};return chrome.identity.launchWebAuthFlow({url:t,interactive:n},function(t){if(void 0===t)return void(r.closed=!0);var n=a.utils.url(t),o={location:{assign:function(t){e(t,!1)},search:n.search,hash:n.hash,href:n.href},close:function(){}};a.utils.responseHandler(o,window)}),r}a.utils.popup=function(t){return e(t,!0)},a.utils.iframe=function(t){e(t,!1)},a.utils.request_cors=function(e){return e(),!0};var t={};chrome.storage.local.get("hello",function(e){t=e.hello||{}}),a.utils.store=function(e,n){return 0===arguments.length?t:1===arguments.length?t[e]||null:n?(t[e]=n,chrome.storage.local.set({hello:t}),n):null===n?(delete t[e],chrome.storage.local.set({hello:t}),null):void 0}}(),function(){if(/^file:\/{3}[^\/]/.test(window.location.href)&&window.cordova){a.utils.iframe=function(e,t){a.utils.popup(e,t,{hidden:"yes"})};var e=a.utils.popup;a.utils.popup=function(t,n,r){var o=e.call(this,t,n,r);try{if(o&&o.addEventListener){var i=a.utils.url(n),u=i.origin||i.protocol+"//"+i.hostname;o.addEventListener("loadstart",function(e){var t=e.url;if(0===t.indexOf(u)){var n=a.utils.url(t),r={location:{assign:function(e){o.executeScript({code:'window.location.href = "'+e+';"'})},search:n.search,hash:n.hash,href:n.href},close:function(){if(o.close){o.close();try{o.closed=!0}catch(e){}}}};a.utils.responseHandler(r,window)}})}}catch(s){}return o}}}(),function(e){function t(e){e&&"error"in e&&(e.error={code:"server_error",message:e.error.message||e.error})}function n(t,n,r){if(!("object"!=typeof t||"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"error"in t)){var o=("app_folder"!==t.root?t.root:"")+t.path.replace(/\&/g,"%26");o=o.replace(/^\//,""),t.thumb_exists&&(t.thumbnail=r.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/thumbnails/auto/"+o+"?format=jpeg&size=m")+"&access_token="+r.options.access_token),t.type=t.is_dir?"folder":t.mime_type,t.name=t.path.replace(/.*\//g,""),t.is_dir?t.files=o.replace(/^\//,""):(t.downloadLink=e.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/files/auto/"+o)+"&access_token="+r.options.access_token,t.file="https://api-content.dropbox.com/1/files/auto/"+o),t.id||(t.id=t.path.replace(/^\//,""))}}function r(e){return function(t,n){delete t.query.limit,n(e)}}var o={version:"1.0",auth:"https://www.dropbox.com/1/oauth/authorize",request:"https://api.dropbox.com/1/oauth/request_token",token:"https://api.dropbox.com/1/oauth/access_token"},i={version:2,auth:"https://www.dropbox.com/1/oauth2/authorize",grant:"https://api.dropbox.com/1/oauth2/token"};e.init({dropbox:{name:"Dropbox",oauth:i,login:function(t){t.qs.scope="",delete t.qs.display;var n=decodeURIComponent(t.qs.redirect_uri);0===n.indexOf("http:")&&0!==n.indexOf("http://localhost/")?e.services.dropbox.oauth=o:e.services.dropbox.oauth=i,t.options.popup.width=1e3,t.options.popup.height=1e3},base:"https://api.dropbox.com/1/",root:"sandbox",get:{me:"account/info","me/files":r("metadata/auto/@{parent|}"),"me/folder":r("metadata/auto/@{id}"),"me/folders":r("metadata/auto/"),"default":function(e,t){e.path.match("https://api-content.dropbox.com/1/files/")&&(e.method="blob"),t(e.path)}},post:{"me/files":function(t,n){var r=t.data.parent,o=t.data.name;t.data={file:t.data.file},"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),n("https://api-content.dropbox.com/1/files_put/auto/"+r+"/"+o)},"me/folders":function(t,n){var r=t.data.name;t.data={},n("fileops/create_folder?root=@{root|sandbox}&"+e.utils.param({path:r}))}},del:{"me/files":"fileops/delete?root=@{root|sandbox}&path=@{id}","me/folder":"fileops/delete?root=@{root|sandbox}&path=@{id}"},wrap:{me:function(e){if(t(e),!e.uid)return e;e.name=e.display_name;var n=e.name.split(" ");return e.first_name=n.shift(),e.last_name=n.join(" "),e.id=e.uid,delete e.uid,delete e.display_name,e},"default":function(e,r,o){return t(e),e.is_dir&&e.contents&&(e.data=e.contents,delete e.contents,e.data.forEach(function(t){
t.root=e.root,n(t,r,o)})),n(e,r,o),e.is_deleted&&(e.success=!0),e}},xhr:function(e){if(e.data&&e.data.file){var t=e.data.file;t&&(t.files?e.data=t.files[0]:e.data=t)}return"delete"===e.method&&(e.method="post"),!0},form:function(e,t){delete t.state,delete t.redirect_uri}}})}(a),function(e){function t(e){return e.id&&(e.thumbnail=e.picture="https://graph.facebook.com/"+e.id+"/picture"),e}function n(e){return"data"in e&&e.data.forEach(t),e}function r(e,t,n){if("boolean"==typeof e&&(e={success:e}),e&&"data"in e){var r=n.query.access_token;if(!(e.data instanceof Array)){var i=e.data;delete e.data,e.data=[i]}e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.pictures=(e.images||[]).sort(function(e,t){return e.width-t.width}),e.cover_photo&&e.cover_photo.id&&(e.thumbnail=o+e.cover_photo.id+"/picture?access_token="+r),"album"===e.type&&(e.files=e.photos=o+e.id+"/photos"),e.can_upload&&(e.upload_location=o+e.id+"/photos")})}return e}e.init({facebook:{name:"Facebook",oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/",grant:"https://graph.facebook.com/oauth/access_token"},scope:{basic:"public_profile",email:"email",share:"user_posts",birthday:"user_birthday",events:"user_events",photos:"user_photos",videos:"user_videos",friends:"user_friends",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_actions",publish:"publish_actions",offline_access:""},refresh:!0,login:function(e){e.options.force&&(e.qs.auth_type="reauthenticate"),e.options.popup.width=580,e.options.popup.height=400},logout:function(t,n){var r=e.utils.globalEvent(t),o=encodeURIComponent(e.settings.redirect_uri+"?"+e.utils.param({callback:r,result:JSON.stringify({force:!0}),state:"{}"})),i=(n.authResponse||{}).access_token;return e.utils.iframe("https://www.facebook.com/logout.php?next="+o+"&access_token="+i),i?void 0:!1},base:"https://graph.facebook.com/v2.4/",get:{me:"me?fields=email,first_name,last_name,name,timezone,verified","me/friends":"me/friends","me/following":"me/friends","me/followers":"me/friends","me/share":"me/feed","me/like":"me/likes","me/files":"me/albums","me/albums":"me/albums?fields=cover_photo,name","me/album":"@{id}/photos?fields=picture","me/photos":"me/photos","me/photo":"@{id}","friend/albums":"@{id}/albums","friend/photos":"@{id}/photos"},post:{"me/share":"me/feed","me/photo":"@{id}"},wrap:{me:t,"me/friends":n,"me/following":n,"me/followers":n,"me/albums":r,"me/photos":r,"me/files":r,"default":r},xhr:function(t,n){return"get"!==t.method&&"post"!==t.method||(n.suppress_response_codes=!0),"post"===t.method&&t.data&&"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),!0},jsonp:function(t,n){var r=t.method;"get"===r||e.utils.hasBinary(t.data)?"delete"===t.method&&(n.method="delete",t.method="post"):(t.data.method=r,t.method="get")},form:function(e){return{callbackonload:!0}}}});var o="https://graph.facebook.com/"}(a),function(e){function t(t,n,r){var o=(r?"":"flickr:")+"?method="+t+"&api_key="+e.services.flickr.id+"&format=json";for(var i in n)n.hasOwnProperty(i)&&(o+="&"+i+"="+n[i]);return o}function n(t){var n=e.getAuthResponse("flickr");t(n&&n.user_nsid?n.user_nsid:null)}function r(e,r){return r||(r={}),function(o,i){n(function(n){r.user_id=n,i(t(e,r,!0))})}}function o(e,t){var n="https://www.flickr.com/images/buddyicon.gif";return e.nsid&&e.iconserver&&e.iconfarm&&(n="https://farm"+e.iconfarm+".staticflickr.com/"+e.iconserver+"/buddyicons/"+e.nsid+(t?"_"+t:"")+".jpg"),n}function i(e,t,n,r,o){return o=o?"_"+o:"","https://farm"+t+".staticflickr.com/"+n+"/"+e+"_"+r+o+".jpg"}function a(e){e&&e.stat&&"ok"!=e.stat.toLowerCase()&&(e.error={code:"invalid_request",message:e.message})}function u(e){if(e.photoset||e.photos){var t="photoset"in e?"photoset":"photos";e=c(e,t),f(e),e.data=e.photo,delete e.photo;for(var n=0;n<e.data.length;n++){var r=e.data[n];r.name=r.title,r.picture=i(r.id,r.farm,r.server,r.secret,""),r.pictures=s(r.id,r.farm,r.server,r.secret),r.source=i(r.id,r.farm,r.server,r.secret,"b"),r.thumbnail=i(r.id,r.farm,r.server,r.secret,"m")}}return e}function s(e,t,n,r){var o=2048,a=[{id:"t",max:100},{id:"m",max:240},{id:"n",max:320},{id:"",max:500},{id:"z",max:640},{id:"c",max:800},{id:"b",max:1024},{id:"h",max:1600},{id:"k",max:2048},{id:"o",max:o}];return a.map(function(o){return{source:i(e,t,n,r,o.id),width:o.max,height:o.max}})}function c(e,t){return t in e?e=e[t]:"error"in e||(e.error={code:"invalid_request",message:e.message||"Failed to get data from Flickr"}),e}function l(e){if(a(e),e.contacts){e=c(e,"contacts"),f(e),e.data=e.contact,delete e.contact;for(var t=0;t<e.data.length;t++){var n=e.data[t];n.id=n.nsid,n.name=n.realname||n.username,n.thumbnail=o(n,"m")}}return e}function f(e){e.page&&e.pages&&e.page!==e.pages&&(e.paging={next:"?page="+ ++e.page})}e.init({flickr:{name:"Flickr",oauth:{version:"1.0a",auth:"https://www.flickr.com/services/oauth/authorize?perms=read",request:"https://www.flickr.com/services/oauth/request_token",token:"https://www.flickr.com/services/oauth/access_token"},base:"https://api.flickr.com/services/rest",get:{me:r("flickr.people.getInfo"),"me/friends":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/following":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/followers":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/albums":r("flickr.photosets.getList",{per_page:"@{limit|50}"}),"me/album":r("flickr.photosets.getPhotos",{photoset_id:"@{id}"}),"me/photos":r("flickr.people.getPhotos",{per_page:"@{limit|50}"})},wrap:{me:function(e){if(a(e),e=c(e,"person"),e.id){if(e.realname){e.name=e.realname._content;var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=o(e,"l"),e.picture=o(e,"l")}return e},"me/friends":l,"me/followers":l,"me/following":l,"me/albums":function(e){return a(e),e=c(e,"photosets"),f(e),e.photoset&&(e.data=e.photoset,e.data.forEach(function(e){e.name=e.title._content,e.photos="https://api.flickr.com/services/rest"+t("flickr.photosets.getPhotos",{photoset_id:e.id},!0)}),delete e.photoset),e},"me/photos":function(e){return a(e),u(e)},"default":function(e){return a(e),u(e)}},xhr:!1,jsonp:function(e,t){"get"==e.method&&(delete t.callback,t.jsoncallback=e.callbackID)}}})}(a),function(e){function t(e){!e.meta||400!==e.meta.code&&401!==e.meta.code||(e.error={code:"access_denied",message:e.meta.errorDetail})}function n(e){e&&e.id&&(e.thumbnail=e.photo.prefix+"100x100"+e.photo.suffix,e.name=e.firstName+" "+e.lastName,e.first_name=e.firstName,e.last_name=e.lastName,e.contact&&e.contact.email&&(e.email=e.contact.email))}function r(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t.v=20121125,!0}e.init({foursquare:{name:"Foursquare",oauth:{version:2,auth:"https://foursquare.com/oauth2/authenticate",grant:"https://foursquare.com/oauth2/access_token"},refresh:!0,base:"https://api.foursquare.com/v2/",get:{me:"users/self","me/friends":"users/self/friends","me/followers":"users/self/friends","me/following":"users/self/friends"},wrap:{me:function(e){return t(e),e&&e.response&&(e=e.response.user,n(e)),e},"default":function(e){return t(e),e&&"response"in e&&"friends"in e.response&&"items"in e.response.friends&&(e.data=e.response.friends.items,e.data.forEach(n),delete e.response),e}},xhr:r,jsonp:r}})}(a),function(e){function t(e,t){var n=t?t.statusCode:e&&"meta"in e&&"status"in e.meta&&e.meta.status;401!==n&&403!==n||(e.error={code:"access_denied",message:e.message||(e.data?e.data.message:"Could not get response")},delete e.message)}function n(e){e.id&&(e.thumbnail=e.picture=e.avatar_url,e.name=e.login)}function r(e,t,n){if(e.data&&e.data.length&&t&&t.Link){var r=t.Link.match(/<(.*?)>;\s*rel=\"next\"/);r&&(e.paging={next:r[1]})}}e.init({github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token",response_type:"code"},scope:{email:"user:email"},base:"https://api.github.com/",get:{me:"user","me/friends":"user/following?per_page=@{limit|100}","me/following":"user/following?per_page=@{limit|100}","me/followers":"user/followers?per_page=@{limit|100}","me/like":"user/starred?per_page=@{limit|100}"},wrap:{me:function(e,r){return t(e,r),n(e),e},"default":function(e,o,i){return t(e,o),Array.isArray(e)&&(e={data:e}),e.data&&(r(e,o,i),e.data.forEach(n)),e}},xhr:function(e){return"get"!==e.method&&e.data&&(e.headers=e.headers||{},e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),!0}}})}(a),function(e){function t(e){return parseInt(e,10)}function n(e){return l(e),e.data=e.items,delete e.items,e}function r(e){return e.error?void 0:(e.name||(e.name=e.title||e.message),e.picture||(e.picture=e.thumbnailLink),e.thumbnail||(e.thumbnail=e.thumbnailLink),"application/vnd.google-apps.folder"===e.mimeType&&(e.type="folder",e.files="https://www.googleapis.com/drive/v2/files?q=%22"+e.id+"%22+in+parents"),e)}function o(e){return{source:e.url,width:e.width,height:e.height}}function i(e){e.data=e.feed.entry.map(c),delete e.feed}function a(e){if(l(e),"feed"in e&&"entry"in e.feed)e.data=e.feed.entry.map(c),delete e.feed;else{if("entry"in e)return c(e.entry);"items"in e?(e.data=e.items.map(r),delete e.items):r(e)}return e}function u(e){e.name=e.displayName||e.name,e.picture=e.picture||(e.image?e.image.url:null),e.thumbnail=e.picture}function s(e,t,n){l(e);if("feed"in e&&"entry"in e.feed){for(var r=n.query.access_token,o=0;o<e.feed.entry.length;o++){var i=e.feed.entry[o];if(i.id=i.id.$t,i.name=i.title.$t,delete i.title,i.gd$email&&(i.email=i.gd$email&&i.gd$email.length>0?i.gd$email[0].address:null,i.emails=i.gd$email,delete i.gd$email),i.updated&&(i.updated=i.updated.$t),i.link){var a=i.link.length>0?i.link[0].href:null;a&&i.link[0].gd$etag&&(a+=(a.indexOf("?")>-1?"&":"?")+"access_token="+r,i.picture=a,i.thumbnail=a),delete i.link}i.category&&delete i.category}e.data=e.feed.entry,delete e.feed}return e}function c(e){var t,n=e.media$group,r=n.media$content.length?n.media$content[0]:{},i=n.media$content||[],a=n.media$thumbnail||[],u=i.concat(a).map(o).sort(function(e,t){return e.width-t.width}),s=0,c={id:e.id.$t,name:e.title.$t,description:e.summary.$t,updated_time:e.updated.$t,created_time:e.published.$t,picture:r?r.url:null,pictures:u,images:[],thumbnail:r?r.url:null,width:r.width,height:r.height};if("link"in e)for(s=0;s<e.link.length;s++){var l=e.link[s];if(l.rel.match(/\#feed$/)){c.upload_location=c.files=c.photos=l.href;break}}if("category"in e&&e.category.length)for(t=e.category,s=0;s<t.length;s++)t[s].scheme&&t[s].scheme.match(/\#kind$/)&&(c.type=t[s].term.replace(/^.*?\#/,""));return"media$thumbnail"in n&&n.media$thumbnail.length&&(t=n.media$thumbnail,c.thumbnail=t[0].url,c.images=t.map(o)),t=n.media$content,t&&t.length&&c.images.push(o(t[0])),c}function l(e){if("feed"in e&&e.feed.openSearch$itemsPerPage){var n=t(e.feed.openSearch$itemsPerPage.$t),r=t(e.feed.openSearch$startIndex.$t),o=t(e.feed.openSearch$totalResults.$t);o>r+n&&(e.paging={next:"?start="+(r+n)})}else"nextPageToken"in e&&(e.paging={next:"?pageToken="+e.nextPageToken})}function f(){function e(e){var n=new FileReader;n.onload=function(n){t(btoa(n.target.result),e.type+i+"Content-Transfer-Encoding: base64")},n.readAsBinaryString(e)}function t(e,t){n.push(i+"Content-Type: "+t+i+i+e),o--,u()}var n=[],r=(1e10*Math.random()).toString(32),o=0,i="\r\n",a=i+"--"+r,u=function(){},s=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i;this.append=function(n,r){"string"!=typeof n&&"length"in Object(n)||(n=[n]);for(var a=0;a<n.length;a++){o++;var u=n[a];if("undefined"!=typeof File&&u instanceof File||"undefined"!=typeof Blob&&u instanceof Blob)e(u);else if("string"==typeof u&&u.match(s)){var c=u.match(s);t(u.replace(s,""),c[1]+i+"Content-Transfer-Encoding: base64")}else t(u,r)}},this.onready=function(e){(u=function(){0===o&&(n.unshift(""),n.push("--"),e(n.join(a),r),n=[])})()}}function h(e,t){var n={};e.data&&"undefined"!=typeof HTMLInputElement&&e.data instanceof HTMLInputElement&&(e.data={file:e.data}),!e.data.name&&Object(Object(e.data.file).files).length&&"post"===e.method&&(e.data.name=e.data.file.files[0].name),"post"===e.method?e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],file:e.data.file}:(n=e.data,e.data={},n.parent&&(e.data.parents=[{id:e.data.parent||"root"}]),n.file&&(e.data.file=n.file),n.name&&(e.data.title=n.name));var r;if("file"in e.data&&(r=e.data.file,delete e.data.file,"object"==typeof r&&"files"in r&&(r=r.files),!r||!r.length))return void t({error:{code:"request_invalid",message:"There were no files attached with this request to upload"}});var o=new f;o.append(JSON.stringify(e.data),"application/json"),r&&o.append(r),o.onready(function(r,o){e.headers["content-type"]='multipart/related; boundary="'+o+'"',e.data=r,t("upload/drive/v2/files"+(n.id?"/"+n.id:"")+"?uploadType=multipart")})}function p(e){if("object"==typeof e.data)try{e.data=JSON.stringify(e.data),e.headers["content-type"]="application/json"}catch(t){}}var d="https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}";e.init({google:{name:"Google Plus",oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth",grant:"https://accounts.google.com/o/oauth2/token"},scope:{basic:"https://www.googleapis.com/auth/plus.me profile",email:"email",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",share:"",create_event:"",offline_access:""},scope_delim:" ",login:function(e){"none"===e.qs.display&&(e.qs.display=""),"code"===e.qs.response_type&&(e.qs.access_type="offline"),e.options.force&&(e.qs.approval_prompt="force")},base:"https://www.googleapis.com/",get:{me:"plus/v1/people/me","me/friends":"plus/v1/people/me/people/visible?maxResults=@{limit|100}","me/following":d,"me/followers":d,"me/contacts":d,"me/share":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/feed":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}","me/album":function(e,t){var n=e.query.id;delete e.query.id,t(n.replace("/entry/","/feed/"))},"me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}","me/file":"drive/v2/files/@{id}","me/files":"drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}","me/folders":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}","me/folder":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}"},post:{"me/files":h,"me/folders":function(e,t){e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],mimeType:"application/vnd.google-apps.folder"},t("drive/v2/files")}},put:{"me/files":h},del:{"me/files":"drive/v2/files/@{id}","me/folder":"drive/v2/files/@{id}"},patch:{"me/file":"drive/v2/files/@{id}"},wrap:{me:function(e){return e.id&&(e.last_name=e.family_name||(e.name?e.name.familyName:null),e.first_name=e.given_name||(e.name?e.name.givenName:null),e.emails&&e.emails.length&&(e.email=e.emails[0].value),u(e)),e},"me/friends":function(e){return e.items&&(l(e),e.data=e.items,e.data.forEach(u),delete e.items),e},"me/contacts":s,"me/followers":s,"me/following":s,"me/share":n,"me/feed":n,"me/albums":a,"me/photos":i,"default":a},xhr:function(t){return"post"===t.method||"put"===t.method?p(t):"patch"===t.method&&(e.utils.extend(t.query,t.data),t.data=null),!0},form:!1}})}(a),function(e){function t(e){return{source:e.url,width:e.width,height:e.height}}function n(e){return"string"==typeof e?{error:{code:"invalid_request",message:e}}:(e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message}),e)}function r(e){return i(e),e&&"data"in e&&e.data.forEach(o),e}function o(e){e.id&&(e.thumbnail=e.profile_picture,e.name=e.full_name||e.username)}function i(e){"pagination"in e&&(e.paging={next:e.pagination.next_url},delete e.pagination)}e.init({instagram:{name:"Instagram",oauth:{version:2,auth:"https://instagram.com/oauth/authorize/",grant:"https://api.instagram.com/oauth/access_token"},refresh:!0,scope:{basic:"basic",photos:"",friends:"relationships",publish:"likes comments",email:"",share:"",publish_files:"",files:"",videos:"",offline_access:""},scope_delim:" ",login:function(e){e.qs.display=""},base:"https://api.instagram.com/v1/",get:{me:"users/self","me/feed":"users/self/feed?count=@{limit|100}","me/photos":"users/self/media/recent?min_id=0&count=@{limit|100}","me/friends":"users/self/follows?count=@{limit|100}","me/following":"users/self/follows?count=@{limit|100}","me/followers":"users/self/followed-by?count=@{limit|100}","friend/photos":"users/@{id}/media/recent?min_id=0&count=@{limit|100}"},post:{"me/like":function(e,t){var n=e.data.id;e.data={},t("media/"+n+"/likes")}},del:{"me/like":"media/@{id}/likes"},wrap:{me:function(e){return n(e),"data"in e&&(e.id=e.data.id,e.thumbnail=e.data.profile_picture,e.name=e.data.full_name||e.data.username),e},"me/friends":r,"me/following":r,"me/followers":r,"me/photos":function(e){return n(e),i(e),"data"in e&&(e.data=e.data.filter(function(e){return"image"===e.type}),e.data.forEach(function(e){e.name=e.caption?e.caption.text:null,e.thumbnail=e.images.thumbnail.url,e.picture=e.images.standard_resolution.url,e.pictures=Object.keys(e.images).map(function(n){var r=e.images[n];return t(r)}).sort(function(e,t){return e.width-t.width})})),e},"default":function(e){return e=n(e),i(e),e}},xhr:function(e,t){var n=e.method,r="get"!==n;return r&&("post"!==n&&"put"!==n||!e.query.access_token||(e.data.access_token=e.query.access_token,delete e.query.access_token),e.proxy=r),r},form:!1}})}(a),function(e){function t(e,t){var n,o;return e&&"Message"in e&&(o=e.Message,delete e.Message,"ErrorCode"in e?(n=e.ErrorCode,delete e.ErrorCode):n=r(t),e.error={code:n,message:o,details:e}),e}function n(e,t){var n=t.access_token;return delete t.access_token,e.headers.Authorization="Bearer "+n,"get"!==e.method&&e.data&&(e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),"put"===e.method&&(e.method="patch"),!0}function r(e){switch(e.statusCode){case 400:return"invalid_request";case 403:return"stale_token";case 401:return"invalid_token";case 500:return"server_error";default:return"server_error"}}e.init({joinme:{name:"join.me",oauth:{version:2,auth:"https://secure.join.me/api/public/v1/auth/oauth2",grant:"https://secure.join.me/api/public/v1/auth/oauth2"},refresh:!1,scope:{basic:"user_info",user:"user_info",scheduler:"scheduler",start:"start_meeting",email:"",friends:"",share:"",publish:"",photos:"",publish_files:"",files:"",videos:"",offline_access:""},scope_delim:" ",login:function(e){e.options.popup.width=400,e.options.popup.height=700},base:"https://api.join.me/v1/",get:{me:"user",meetings:"meetings","meetings/info":"meetings/@{id}"},post:{"meetings/start/adhoc":function(e,t){t("meetings/start")},"meetings/start/scheduled":function(e,t){var n=e.data.meetingId;e.data={},t("meetings/"+n+"/start")},"meetings/schedule":function(e,t){t("meetings")}},patch:{"meetings/update":function(e,t){t("meetings/"+e.data.meetingId)}},del:{"meetings/delete":"meetings/@{id}"},wrap:{me:function(e,n){return t(e,n),e.email?(e.name=e.fullName,e.first_name=e.name.split(" ")[0],e.last_name=e.name.split(" ")[1],e.id=e.email,e):e},"default":function(e,n){return t(e,n),e}},xhr:n}})}(a),function(e){function t(e){e&&"errorCode"in e&&(e.error={code:e.status,message:e.message})}function n(e){return e.error?void 0:(e.first_name=e.firstName,e.last_name=e.lastName,e.name=e.formattedName||e.first_name+" "+e.last_name,e.thumbnail=e.pictureUrl,e.email=e.emailAddress,e)}function r(e){return t(e),o(e),e.values&&(e.data=e.values.map(n),delete e.values),e}function o(e){"_count"in e&&"_start"in e&&e._count+e._start<e._total&&(e.paging={next:"?start="+(e._start+e._count)+"&count="+e._count})}function i(e,t){"{}"===JSON.stringify(e)&&200===t.statusCode&&(e.success=!0)}function a(e){e.access_token&&(e.oauth2_access_token=e.access_token,delete e.access_token)}function u(e,t){e.headers["x-li-format"]="json";var n=e.data.id;e.data=("delete"!==e.method).toString(),e.method="put",t("people/~/network/updates/key="+n+"/is-liked")}e.init({linkedin:{oauth:{version:2,response_type:"code",auth:"https://www.linkedin.com/uas/oauth2/authorization",grant:"https://www.linkedin.com/uas/oauth2/accessToken"},refresh:!0,scope:{basic:"r_basicprofile",email:"r_emailaddress",files:"",friends:"",photos:"",publish:"w_share",publish_files:"w_share",share:"",videos:"",offline_access:""},scope_delim:" ",base:"https://api.linkedin.com/v1/",get:{me:"people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)","me/share":"people/~/network/updates?count=@{limit|250}"},post:{"me/share":function(e,t){var n={visibility:{code:"anyone"}};e.data.id?n.attribution={share:{id:e.data.id}}:(n.comment=e.data.message,e.data.picture&&e.data.link&&(n.content={"submitted-url":e.data.link,"submitted-image-url":e.data.picture})),e.data=JSON.stringify(n),t("people/~/shares?format=json")},"me/like":u},del:{"me/like":u},wrap:{me:function(e){return t(e),n(e),e},"me/friends":r,"me/following":r,"me/followers":r,"me/share":function(e){return t(e),o(e),e.values&&(e.data=e.values.map(n),e.data.forEach(function(e){e.message=e.headline}),delete e.values),e},"default":function(e,n){t(e),i(e,n),o(e)}},jsonp:function(e,t){a(t),"get"===e.method&&(t.format="jsonp",t["error-callback"]=e.callbackID)},xhr:function(e,t){return"get"!==e.method?(a(t),e.headers["Content-Type"]="application/json",e.headers["x-li-format"]="json",e.proxy=!0,!0):!1}}})}(a),function(e){function t(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t["_status_code_map[302]"]=200,!0}function n(e){return e.id&&(e.picture=e.avatar_url,e.thumbnail=e.avatar_url,e.name=e.username||e.full_name),e}function r(e){"next_href"in e&&(e.paging={next:e.next_href})}e.init({soundcloud:{name:"SoundCloud",oauth:{version:2,auth:"https://soundcloud.com/connect",grant:"https://soundcloud.com/oauth2/token"},base:"https://api.soundcloud.com/",get:{me:"me.json","me/friends":"me/followings.json","me/followers":"me/followers.json","me/following":"me/followings.json","default":function(e,t){t(e.path+".json")}},wrap:{me:function(e){return n(e),e},"default":function(e){return Array.isArray(e)&&(e={data:e.map(n)}),r(e),e}},xhr:t,jsonp:t}})}(a),function(e){function t(e){if(e.id){if(e.name){var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=e.profile_image_url_https||e.profile_image_url}return e}function n(e){return r(e),o(e),e.users&&(e.data=e.users.map(t),delete e.users),e}function r(e){if(e.errors){var t=e.errors[0];e.error={code:"request_failed",message:t.message}}}function o(e){"next_cursor_str"in e&&(e.paging={next:"?cursor="+e.next_cursor_str})}function i(e){return Array.isArray(e)?{data:e}:e}var a="https://api.twitter.com/";e.init({twitter:{oauth:{version:"1.0a",auth:a+"oauth/authenticate",request:a+"oauth/request_token",token:a+"oauth/access_token"},login:function(e){var t="?force_login=true";this.oauth.auth=this.oauth.auth.replace(t,"")+(e.options.force?t:"")},base:a+"1.1/",get:{me:"account/verify_credentials.json","me/friends":"friends/list.json?count=@{limit|200}","me/following":"friends/list.json?count=@{limit|200}","me/followers":"followers/list.json?count=@{limit|200}","me/share":"statuses/user_timeline.json?count=@{limit|200}","me/like":"favorites/list.json?count=@{limit|200}"},post:{"me/share":function(t,n){var r=t.data;t.data=null;var o=[];r.message&&(o.push(r.message),delete r.message),r.link&&(o.push(r.link),delete r.link),r.picture&&(o.push(r.picture),delete r.picture),o.length&&(r.status=o.join(" ")),r.file?(r["media[]"]=r.file,delete r.file,t.data=r,n("statuses/update_with_media.json")):"id"in r?n("statuses/retweet/"+r.id+".json"):(e.utils.extend(t.query,r),n("statuses/update.json?include_entities=1"))},"me/like":function(e,t){var n=e.data.id;e.data=null,t("favorites/create.json?id="+n)}},del:{"me/like":function(){p.method="post";var e=p.data.id;p.data=null,callback("favorites/destroy.json?id="+e)}},wrap:{me:function(e){return r(e),t(e),e},"me/friends":n,"me/followers":n,"me/following":n,"me/share":function(e){return r(e),o(e),!e.error&&"length"in e?{data:e}:e},"default":function(e){return e=i(e),o(e),e}},xhr:function(e){return"get"!==e.method}}})}(a),function(e){function t(e,t){return null!==e&&"response"in e&&null!==e.response&&e.response.length&&(e=e.response[0],e.id=e.uid,e.thumbnail=e.picture=e.photo_max,e.name=e.first_name+" "+e.last_name,t.authResponse&&null!==t.authResponse.email&&(e.email=t.authResponse.email)),e}function n(e){if(e.error){var t=e.error;e.error={code:t.error_code,message:t.error_msg}}}e.init({vk:{name:"Vk",oauth:{version:2,auth:"https://oauth.vk.com/authorize",grant:"https://oauth.vk.com/access_token"},scope:{email:"email",friends:"friends",photos:"photos",videos:"video",share:"share",offline_access:"offline"},refresh:!0,login:function(e){e.qs.display=window.navigator&&window.navigator.userAgent&&/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase())?"mobile":"popup"},base:"https://api.vk.com/method/",get:{me:function(e,t){e.query.fields="id,first_name,last_name,photo_max",t("users.get")}},wrap:{me:function(e,r,o){return n(e),t(e,o)}},xhr:!1,jsonp:!0,form:!1}})}(a),function(e){function t(e){return"data"in e&&e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.images&&(e.pictures=e.images.map(n).sort(function(e,t){return e.width-t.width}))}),e}function n(e){return{width:e.width,height:e.height,source:e.source}}function r(e){return"data"in e&&e.data.forEach(function(e){e.photos=e.files="https://apis.live.net/v5.0/"+e.id+"/photos"}),e}function o(e,t,n){if(e.id){var r=n.query.access_token;if(e.emails&&(e.email=e.emails.preferred),e.is_friend!==!1){var o=e.user_id||e.id;e.thumbnail=e.picture="https://apis.live.net/v5.0/"+o+"/picture?access_token="+r}}return e}function i(e,t,n){return"data"in e&&e.data.forEach(function(e){o(e,t,n)}),e}e.init({windows:{name:"Windows live",oauth:{version:2,auth:"https://login.live.com/oauth20_authorize.srf",grant:"https://login.live.com/oauth20_token.srf"},refresh:!0,logout:function(){return"http://login.live.com/oauth20_logout.srf?ts="+(new Date).getTime()},scope:{basic:"wl.signin,wl.basic",email:"wl.emails",birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"wl.contacts_emails",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",share:"wl.share",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},base:"https://apis.live.net/v5.0/",get:{me:"me","me/friends":"me/friends","me/following":"me/contacts","me/followers":"me/friends","me/contacts":"me/contacts","me/albums":"me/albums","me/album":"@{id}/files","me/photo":"@{id}","me/files":"@{parent|me/skydrive}/files","me/folders":"@{id|me/skydrive}/files","me/folder":"@{id|me/skydrive}/files"},post:{"me/albums":"me/albums","me/album":"@{id}/files/","me/folders":"@{id|me/skydrive/}","me/files":"@{parent|me/skydrive}/files"},del:{"me/album":"@{id}","me/photo":"@{id}","me/folder":"@{id}","me/files":"@{id}"},wrap:{me:o,"me/friends":i,"me/contacts":i,"me/followers":i,"me/following":i,"me/albums":r,"me/photos":t,"default":t},xhr:function(t){return"get"===t.method||"delete"===t.method||e.utils.hasBinary(t.data)||("string"==typeof t.data.file?t.data.file=e.utils.toBlob(t.data.file):(t.data=JSON.stringify(t.data),t.headers={"Content-Type":"application/json"})),!0},jsonp:function(t){"get"===t.method||e.utils.hasBinary(t.data)||(t.data.method=t.method,t.method="get")}}})}(a),function(e){function t(e){e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message})}function n(e){if(t(e),e.query&&e.query.results&&e.query.results.profile){e=e.query.results.profile,e.id=e.guid,e.last_name=e.familyName,e.first_name=e.givenName||e.nickname;var n=[];e.first_name&&n.push(e.first_name),e.last_name&&n.push(e.last_name),e.name=n.join(" "),e.email=e.emails&&e.emails[0]?e.emails[0].handle:null,e.thumbnail=e.image?e.image.imageUrl:null}return e}function r(e,n,r){t(e),i(e,n,r);return e.query&&e.query.results&&e.query.results.contact&&(e.data=e.query.results.contact,delete e.query,Array.isArray(e.data)||(e.data=[e.data]),e.data.forEach(o)),e}function o(e){e.id=null,!e.fields||e.fields instanceof Array||(e.fields=[e.fields]),(e.fields||[]).forEach(function(t){"email"===t.type&&(e.email=t.value),"name"===t.type&&(e.first_name=t.value.givenName,e.last_name=t.value.familyName,e.name=t.value.givenName+" "+t.value.familyName),"yahooid"===t.type&&(e.id=t.value)})}function i(e,t,n){return e.query&&e.query.count&&n.options&&(e.paging={next:"?start="+(e.query.count+(+n.options.start||1))}),e}function a(e){return"https://query.yahooapis.com/v1/yql?q="+(e+" limit @{limit|100} offset @{start|0}").replace(/\s/g,"%20")+"&format=json"}e.init({yahoo:{oauth:{version:"1.0a",auth:"https://api.login.yahoo.com/oauth/v2/request_auth",request:"https://api.login.yahoo.com/oauth/v2/get_request_token",token:"https://api.login.yahoo.com/oauth/v2/get_token"},login:function(e){e.options.popup.width=560;try{delete e.qs.state.scope}catch(t){}},base:"https://social.yahooapis.com/v1/",get:{me:a("select * from social.profile(0) where guid=me"),"me/friends":a("select * from social.contacts(0) where guid=me"),"me/following":a("select * from social.contacts(0) where guid=me")},wrap:{me:n,"me/friends":r,"me/following":r,"default":i}}})}(a),r=function(){return a}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)),"object"==typeof e&&e.exports&&(e.exports=a)}).call(t,n(289),n(536).setImmediate)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HttpMiddleware=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function h(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=n(434),l=n(590),f=r(l);t.HttpMiddleware=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"Kinvey PhoneGap Http Middleware":arguments[0];return o(this,t),i(this,Object.getPrototypeOf(t).call(this,e))}return a(t,e),u(t,[{key:"handle",value:function(e){return s(Object.getPrototypeOf(t.prototype),"handle",this).call(this,e).then(function(){var t=new Promise(function(t,n){var r=new XMLHttpRequest;r.open(e.method,e.url),r.responseType=e.responseType;for(var o in e.headers)e.headers.hasOwnProperty(o)&&r.setRequestHeader(o,e.headers[o]);r.onload=r.ontimeout=r.onabort=r.onerror=function(){var o=r.status,i=r.response||null;
return r.response&&(i=r.responseText||null),e.response={statusCode:o,headers:(0,f["default"])(r.getAllResponseHeaders()),data:i},o>=200&&300>o||304===o?t(e):n(e)},r.send(e.data)});return t})}}]),t}(c.KinveyMiddleware)},function(e,t,n){var r=n(591),o=n(592),i=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return o(r(e).split("\n"),function(e){var n=e.indexOf(":"),o=r(e.slice(0,n)).toLowerCase(),a=r(e.slice(n+1));"undefined"==typeof t[o]?t[o]=a:i(t[o])?t[o].push(a):t[o]=[t[o],a]}),t}},function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){function r(e,t,n){if(!u(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===s.call(e)?o(e,t,n):"string"==typeof e?i(e,t,n):a(e,t,n)}function o(e,t,n){for(var r=0,o=e.length;o>r;r++)c.call(e,r)&&t.call(n,e[r],r,e)}function i(e,t,n){for(var r=0,o=e.length;o>r;r++)t.call(n,e.charAt(r),r,e)}function a(e,t,n){for(var r in e)c.call(e,r)&&t.call(n,e[r],r,e)}var u=n(593);e.exports=r;var s=Object.prototype.toString,c=Object.prototype.hasOwnProperty},function(e,t){function n(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=n;var r=Object.prototype.toString},function(e,t,n){(function(e,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Push=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(294),l=o(c),f=n(298),h=n(558),p=n(533),d=n(420),v=n(554),y=n(517),m=n(418),g=n(305),_=n(595),b=n(405),w=o(b),E=n(507),x=o(E),k=n(559),O=o(k),j=n(490),S=o(j),T=e.env.KINVEY_PUSH_NAMESPACE||"push",I=e.env.KINVEY_NOTIFICATION_EVENT||"notification",A=e.env.KINVEY_DEVICE_COLLECTION_NAME||"kinvey_device",P=e.env.KINVEY_ID_ATTRIBUTE||"_id",C=void 0;t.Push=function(e){function t(){i(this,t);var e=a(this,Object.getPrototypeOf(t).call(this));return e.client=m.Client.sharedInstance(),C=(0,O["default"])(e.notificationListener,e),e.deviceReady=new l["default"](function(t){var n=(0,O["default"])(function(){document.removeEventListener("deviceready",n),t()},e);document.addEventListener("deviceready",n,!1),e.deviceReady=new l["default"](function(){})}).then(function(){var t=e.client.push;t&&(e.phonegapPush=r.PushNotification.init(t),e.phonegapPush.on(I,C))}),e}return u(t,e),s(t,[{key:"isSupported",value:function(){return(0,_.isiOS)()||(0,_.isAndroid)()}},{key:"onNotification",value:function(e){return this.on(I,e)}},{key:"onceNotification",value:function(e){return this.once(I,e)}},{key:"notificationListener",value:function(e){this.emit(I,e)}},{key:"register",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.deviceReady.then(function(){if(!e.isSupported())return l["default"].reject(new f.KinveyError("Kinvey currently only supports push notifications on iOS and Android platforms."));t=(0,w["default"])({force:!1},t);var n=new l["default"](function(o,i){return r.PushNotification?r.PushNotification.hasPermission(function(a){return a.isEnabled?(e.phonegapPush&&e.phonegapPush.off(I,C),e.phonegapPush=r.PushNotification.init(t),e.phonegapPush.on(I,C),e.phonegapPush.on("registration",function(e){o(e.registrationId)}),e.phonegapPush.on("error",function(e){i(new f.KinveyError("An error occurred registering this device for push notifications.",e))}),n):i(new f.KinveyError("Permission for push notifications has not been granted by the user."))}):i(new f.KinveyError("PhoneGap Push Notification Plugin is not installed.","Please refer to http://devcenter.kinvey.com/phonegap-v3.0/guides/push#ProjectSetUp for help with setting up your project."))}).then(function(n){if(!n)throw new f.KinveyError("Unable to retrieve the device id to register this device for push notifications.");var o=p.DataStore.getInstance(A,p.DataStoreType.Sync);return o.client=e.client,o.disableSync(),o.findById(n)["catch"](function(e){if(!(e instanceof f.NotFoundError))throw e}).then(function(i){if(i&&t.force!==!0)return i;var a=v.User.getActiveUser(e.client),u=new y.NetworkRequest({method:d.HttpMethod.POST,url:x["default"].format({protocol:e.client.protocol,host:e.client.host,pathname:e._pathname+"/register-device"}),properties:t.properties,authType:a?d.AuthType.Session:d.AuthType.Master,data:{platform:r.device.platform.toLowerCase(),framework:"phonegap",deviceId:n,userId:a?void 0:t.userId},timeout:t.timeout,client:e.client});return u.execute().then(function(){return o.save({_id:n,registered:!0})}).then(function(){e.client.push=t})})});return n})}},{key:"unregister",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.deviceReady.then(function(){if(!e.isSupported())return l["default"].reject(new f.KinveyError("Kinvey currently only supports push notifications on iOS and Android platforms."));var n=p.DataStore.getInstance(A,p.DataStoreType.Sync);n.client=e.client,n.disableSync();var o=new l["default"](function(t,n){e.phonegapPush&&e.phonegapPush.unregister(function(){e.phonegapPush=null,t()},function(){n(new f.KinveyError("Unable to unregister with the PhoneGap Push Plugin."))}),t()});return o=o.then(function(){var e=new g.Query;return e.equalTo("registered",!0),n.find(e)}).then(function(o){if(0===!o.length)throw new f.KinveyError("This device has not been registered for push notifications.");var i=v.User.getActiveUser(e.client),a=(0,S["default"])(o,function(o){var a=o[P],u=new y.NetworkRequest({method:d.HttpMethod.POST,url:x["default"].format({protocol:e.client.protocol,host:e.client.host,pathname:e._pathname+"/unregister-device"}),properties:t.properties,authType:i?d.AuthType.Session:d.AuthType.Master,data:{platform:r.device.platform.toLowerCase(),framework:"phonegap",deviceId:a,userId:i?null:t.userId},timeout:t.timeout,client:e.client});return u.execute().then(function(){return n.removeById(a)})});return l["default"].all(a)}).then(function(){e.client.push=null})})}},{key:"_pathname",get:function(){return"/"+T+"/"+this.client.appKey}},{key:"client",get:function(){return this._client},set:function(e){if(!e)throw new f.KinveyError("Kinvey.Push much have a client defined.");this._client=e}}]),t}(h.EventEmitter)}).call(t,n(289),function(){return this}())},function(e,t){(function(e){"use strict";function n(){var t=e.device.platform;return"browser"===t||!t}function r(){var t=e.device.platform;return"iOS"===t}function o(){var t=e.device.platform;return"Android"===t}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=n,t.isiOS=r,t.isAndroid=o}).call(t,function(){return this}())}])});